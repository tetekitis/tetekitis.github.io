if (self.CavalryLogger) { CavalryLogger.start_js(["txc5T"]); }

__d("FBRTCMessageType",[],(function(a,b,c,d,e,f){e.exports={JOIN:0,SERVER_MEDIA_UPDATE:1,HANGUP:2,ICE_CANDIDATE:3,RING:4,DISMISS:5,CONFERENCE_STATE:6,ADD_PARTICIPANTS:7,SUBSCRIPTION:8,CLIENT_MEDIA_UPDATE:9,DATA_MESSAGE:10,REMOVE_PARTICIPANTS:11,EXPERIMENT:12,APPROVAL:17}}),null);
__d("DockTabsViewportFantaTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();f=9;var g=284,h=g+f;function a(){return h+1}function b(a){return Math.floor(a/h)}function c(a){if(!a)return null;a=a.fantaTabModelStateGetter;return a?a():null}function d(a){return a?a.size:0}e.exports={getTabCountToFitWidth:b,getMinRequiredWidthForFirstFantaTab:a,getFantaTabModelFromCallbacks:c,getNumFantaTabsFromModel:d}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=496+9+2,h=210+9+2,i=52;function j(){return g}function k(){return h}function a(){return i}function b(a){return a.getIsRaised()?j():k()}function c(){return j()+i}function d(a){a=a||{};a=a.pinnedConvoTabStateGetter;return a?a():null}function f(a){return a?a.getTotalTabCount():0}e.exports={getRaisedPinnedConvoTabWidth:j,getLoweredPinnedConvoTabWidth:k,getPinnedConvoSelectorWidth:a,getPinnedConvoTabWidth:b,getMinRequiredWidthForFirstConvoTab:c,getPinnedConvoTabsStateFromCallbacks:d,getNumPinnedConvoTabsFromModel:f}}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=50;a=35;var i=a,j="dock-tab-viewport-inst",k=b("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,l=b("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,m=b("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,n=b("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,o=b("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,p=b("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function q(a){return a?b("Vector").getElementDimensions(a).x:0}function r(a){this.$1=a,this.$3=0,this.$4=0,this.$5=null,this.$6=null,this.$7=!1,this.$8=!1,this.$9=!1,this.$2=new(b("SubscriptionsHandler"))(),this.$10(),this.$11()}r.prototype.$10=function(){var a=this.$12.bind(this);this.$2.addSubscriptions(b("Event").listen(window,"resize",a),b("Dock").subscribe("resize",a),b("Arbiter").subscribeOnce("sidebar/initialized",a,"new"),b("FullScreen").subscribe("changed",function(){b("FullScreen").isFullScreen()?(this.$7=!0,this.$8=!1):(this.$7=!1,this.$8&&(b("setImmediate")(function(){a()}),this.$8=!1))}.bind(this)))};r.prototype.registerFantaTabCallbacks=function(a){this.$5=a};r.prototype.registerPinnedConvoTabCallbacks=function(a){this.$6=a};r.prototype.forceRecalculateFBDockWidth=function(){this.$11(),this.$13({forceRecalculateChatTabs:!1,pinnedConvoUpdateData:null})};r.prototype.forceRecalculateChatTabs=function(){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:null})};r.prototype.forceRecalculatePinnedConvoTabs=function(a){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:a})};r.prototype.$12=function(){if(b("FullScreen").isFullScreen()||this.$7){this.$8=!0;return}this.forceRecalculateFBDockWidth()};r.prototype.$13=function(a){var b=a.forceRecalculateChatTabs;a=a.pinnedConvoUpdateData;var c=this.$14(),d=c.chatTabAvailableWidth;c=c.pinnedConvoTabAvailableWidth;this.$15(d,!!b);this.$16(c,a)};r.prototype.$16=function(a,b){var c=this.$6||{};c=c.onAvailableWidthChanged;c&&c(a,b)};r.prototype.$15=function(a,b){b=this.$5||{};b=b.onAvailableWidthChanged;b&&b(a)};r.prototype.$17=function(){var a=l(this.$5);return m(a)};r.prototype.$18=function(){return k()};r.prototype.$14=function(){__p&&__p();var a=this.$3,b={chatTabAvailableWidth:a,pinnedConvoTabAvailableWidth:0},c={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:a},d=this.$17(),e=p(this.$6),f=o(e);if(!e||f===0)return b;else if(d===0)return c;e=this.$18();if(a<=e)return b;f=n();d=a-e;if(d<f)return b;else c=f;d=c;b=Math.max(e,a-c);return{chatTabAvailableWidth:b,pinnedConvoTabAvailableWidth:d}};r.prototype.$11=function(){this.$3=this.$19(),this.$20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};r.prototype.$21=function(){var a=this.$1;if(!a)return{buddyListNubWidth:0,employeeNubsWidth:0};var c=q(a),d=q(b("DOM").find(a,"._56ox")),e=q(b("DOM").scry(a,"._56oy")[0]);a=q(b("DOM").scry(a,"._ph1")[0]);c=Math.max(c-d-e-a,0);return{buddyListNubWidth:d,employeeNubsWidth:c}};r.prototype.$19=function(){__p&&__p();var a=b("getViewportDimensions").withoutScrollbars().width;a-=b("ViewportBounds").getLeft()+b("ViewportBounds").getRight();a-=h;var c=this.$21(),d=c.buddyListNubWidth;c=c.employeeNubsWidth;a-=d;this.$4=Math.max(this.$4,c);a-=this.$4;a-=i;return Math.max(a,0)};r.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$9=!0};r.prototype.$20=function(a){this.$9&&b("Arbiter").inform(a)};r.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().chatTabAvailableWidth};r.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().pinnedConvoTabAvailableWidth};r.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$3};e.exports={getInstance:function(a){__p&&__p();var c=b("ge")("pagelet_dock");if(!c||!b("DOM").contains(c,a))return null;a=b("DataStore").get(c,j);if(a instanceof r)return a;var d=b("DOM").scry(c,".fbDockWrapperRight .fbDock")[0];a=new r(d);b("DataStore").set(c,j,a);return a}}}),null);
__d("FBRTCConstants",["keyMirror"],(function(a,b,c,d,e,f){__p&&__p();a=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway"});c=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"});d=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"});f=b("keyMirror")({SCREEN:null,CAMERA:null});var g=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),h=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"}),i=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",NO_VIDEO:"NO_VIDEO",SD_VIDEO:"SD_VIDEO",HD_IDEAL_LQ_REQUIRED_VIDEO:"HD_IDEAL_LQ_REQUIRED_VIDEO"}),j=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),k=Object.freeze({UNKNOWN:-1,IGNORE_CALL:0,HANGUP_CALL:1,IN_ANOTHER_CALL:2,ACCEPT_AFTER_HANGUP:3,NO_ANSWER_TIMEOUT:4,INCOMING_TIMEOUT:5,OTHER_INSTANCE_HANDLED:6,SIGNALING_MESSAGE_FAILED:7,CONNECTION_DROPPED:8,CLIENT_INTERRUPTED:9,WEBRTC_ERROR:10,CLIENT_ERROR:11,NO_PERMISSION:12,OTHER_NOT_CAPABLE:13,NO_UI_ERROR:14,UNSUPPORTED_VERSION:15,CALLER_NOT_VISIBLE:16,CARRIER_BLOCKED:17,OTHER_CARRIER_BLOCKED:18,CLIENT_ENCRYPTION_ERROR:19,INACTIVE_TIMEOUT:20}),l=["IgnoreCall","HangupCall","InAnotherCall","CallEndAcceptAfterHangUp","NoAnswerTimeout","IncomingTimeout","OtherInstanceHandled","SignalingMessageFailed","ConnectionDropped","ClientInterrupted","WebRTCError","ClientError","NoPermission","OtherNotCapable","NoUIShown","VersionUnsupported","CallerNotVisible","CarrierBlocked","OtherCarrierBlocked","ClientEncryptionError","InactiveTimeout"],m=Object.freeze({CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",CLOSED_AS_STALE:"CollabClosedAsStale",CLOSED_BY_MCU:"CollabClosedByMcu",INVALID_MEETING_ID:"CollabInvalidMeetingId",LOST_MCU_CONNECTION:"CollabLostMcuConnection",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",UNKNOWN:"CollabUnknown"}),n=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),o=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"});b=b("keyMirror")({AUDIO:null,VIDEO:null});var p=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),q=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"});o={CallBlockingConstants:o,CallEndReason:k,CallType:d,ChildWindowMessageType:c,CollabCallEndSubreason:m,GroupVideoViewLayout:q,IncomingCallDialogTypes:b,PayloadType:a,RTCConstraints:j,SignalingProtocol:p,StreamType:h,UIEventType:n,UploadLogLevel:g,VideoQuality:i,MediaContentTypes:f,convertFromUploadLogLevel:function(a){switch(a){case g.LL_DEBUG:return"d";case g.LL_BASIC:return"b";case g.LL_WARNING:return"w";case g.LL_INFO:return"i";case g.LL_VERBOSE:return"v";case g.LL_NONE:default:return null}},convertToUploadLogLevel:function(a){switch(a){case"d":return g.LL_DEBUG;case"b":return g.LL_BASIC;case"w":return g.LL_WARNING;case"i":return g.LL_INFO;case"v":return g.LL_VERBOSE;default:return g.LL_NONE}},uploadLogLevelString:function(a){switch(a){case g.LL_BASIC:return"basic";case g.LL_DEBUG:return"debug";case g.LL_WARNING:return"warning";case g.LL_INFO:return"info";case g.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function(a){return l.indexOf(a)},callEndReasonString:function(a){a=l[a];return!a?"Unknown":a},fullCallEndReasonString:function(a,b){return this.callEndReasonString(a)+"_"+(b?"remote":"local")}};e.exports=o}),null);
__d("FBRTCIceStatsParser",[],(function(a,b,c,d,e,f){__p&&__p();var g=null;h.getInstance=function(){"use strict";g||(g=new h());return g};h.prototype.extractIceInfo=function(a){"use strict";var b=[];a=a.split("\r\n");for(var c=0;c<a.length;c++){var d=a[c];this.$1(d)&&b.push({gen:this.$2(d),type:this.$3(d)})}return b};h.prototype.$1=function(a){"use strict";return a.indexOf("candidate:")>-1};h.prototype.$2=function(a){"use strict";var b=0;a=a.match(/generation (\d+)/);a&&(b=parseInt(a[1],10));return b};h.prototype.$3=function(a){"use strict";a=a.match(/typ (host|relay|srflx|prflx)/);if(a)return a[1];else return"unknown"};function h(){"use strict"}e.exports=h}),null);
__d("FBRTCLocalUploadLogLevel",["CurrentUser","FBRTCConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("FBRTCConstants").UploadLogLevel,h={getUploadLogLevel:function(a){return Math.max(h.getLocalUploadLogLevel(),a)},getLocalUploadLogLevel:function(){return b("CurrentUser").isEmployee()?g.LL_DEBUG:g.LL_NONE}};e.exports=h}),null);
__d("FBRTCConsoleLogger",["Log","LogHistory","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g||(g=new h());return g};function h(){this.$1=b("LogHistory").getInstance(h.MODULE_NAME)}h.prototype.getLogHistory=function(){return this.$1};h.prototype.log=function(a,b,c,event,d){event===void 0&&(event="Console");d===void 0&&(d="DEBUG");d=" "+JSON.stringify({conferenceName:b,callID:c});this.$1.log(event||"Console",a+d);return this};h.MODULE_NAME="webrtc";e.exports=h}),null);
__d("P2PReliabilityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:P2PReliabilityLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAppBuildNumber=function(a){this.$1.app_build_number=a;return this};a.prototype.setAppID=function(a){this.$1.app_id=a;return this};a.prototype.setAppVersion=function(a){this.$1.app_version=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setDeviceID=function(a){this.$1.device_id=a;return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setExtra=function(a){this.$1.extra=a;return this};a.prototype.setMsgID=function(a){this.$1.msg_id=a;return this};a.prototype.setMsgType=function(a){this.$1.msg_type=a;return this};a.prototype.setProcessingTimeSinceRecvOnWww=function(a){this.$1.processing_time_since_recv_on_www=a;return this};a.prototype.setRawTime=function(a){this.$1.raw_time=a;return this};a.prototype.setReceiverID=function(a){this.$1.receiver_id=a;return this};a.prototype.setResultCode=function(a){this.$1.result_code=a;return this};a.prototype.setSenderID=function(a){this.$1.sender_id=a;return this};a.prototype.setServiceName=function(a){this.$1.service_name=a;return this};a.prototype.setUserCountry=function(a){this.$1.user_country=a;return this};c={app_build_number:!0,app_id:!0,app_version:!0,call_id:!0,device_id:!0,event_name:!0,extra:!0,msg_id:!0,msg_type:!0,processing_time_since_recv_on_www:!0,raw_time:!0,receiver_id:!0,result_code:!0,sender_id:!0,service_name:!0,user_country:!0};e.exports=a}),null);
__d("RTWebLoggingSharedInstance",["CurrentUser","UserAgentData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;h.getInstance=function(){g==null&&(g=new h());return g};function h(){this.$1=b("UserAgentData").browserName+b("CurrentUser").getID().substr(-4)+"_"+Date.now().toString().substr(-5)}h.prototype.getDeviceID=function(){return this.$1};e.exports=h}),null);
__d("FBRTCLogger",["ChannelManager","FBRTCConsoleLogger","FBRTCMessageType","MarauderLogger","P2PReliabilityTypedLogger","RTWebLoggingSharedInstance","UserAgentData","CurrentUser","pageID"],(function(a,b,c,d,e,f){__p&&__p();var g=b("CurrentUser").getID(),h="call_action",i="rtc_client_call_summary",j="client_error",k="client_event",l="info",m="received_message",n="send_failed",o="send_succeeded",p="sent_message",q=null;r.getInstance=function(){"use strict";q==null&&(q=new r());return q};r.multiwayMessageTypeName=function(a){"use strict";__p&&__p();switch(a){case b("FBRTCMessageType").JOIN:return"JOIN";case b("FBRTCMessageType").SERVER_MEDIA_UPDATE:return"SERVER_MEDIA_UPDATE";case b("FBRTCMessageType").HANGUP:return"HANGUP";case b("FBRTCMessageType").ICE_CANDIDATE:return"ICE_CANDIDATE";case b("FBRTCMessageType").RING:return"RING";case b("FBRTCMessageType").DISMISS:return"DISMISS";case b("FBRTCMessageType").CONFERENCE_STATE:return"CONFERENCE_STATE";case b("FBRTCMessageType").ADD_PARTICIPANTS:return"ADD_PARTICIPANTS";case b("FBRTCMessageType").SUBSCRIPTION:return"SUBSCRIPTION";case b("FBRTCMessageType").CLIENT_MEDIA_UPDATE:return"CLIENT_MEDIA_UPDATE";case b("FBRTCMessageType").DATA_MESSAGE:return"DATA_MESSAGE";case b("FBRTCMessageType").REMOVE_PARTICIPANTS:return"REMOVE_PARTICIPANTS";case b("FBRTCMessageType").EXPERIMENT:return"EXPERIMENT";case b("FBRTCMessageType").CONNECT:return"CONNECT";case b("FBRTCMessageType").APPROVAL:return"APPROVAL"}return a.toString()};function r(){"use strict";this.$2=JSON.stringify({version:2,device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion}),this.$1=b("RTWebLoggingSharedInstance").getInstance().getDeviceID()}r.prototype.logToConsole=function(a){"use strict";this.$3(null,null,"Console",a)};r.prototype.$4=function(a){"use strict";return new(b("P2PReliabilityTypedLogger"))().setExtra(this.$2).setDeviceID(this.$1).setRawTime(Date.now()).setServiceName("WEB_CLIENT").setMsgType(a.toUpperCase())};r.prototype.logMultiwayMessageReceived=function(a,b){"use strict";var c=r.multiwayMessageTypeName(a.type());this.$3(a.conferenceName(),b,"Received MW",c+", "+a.transactionId(),c==="EXPERIMENT"?"DEBUG":"INFO")};r.prototype.logReceivedMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,from:a,msg_id:c.msg_id,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);var f=c.type||c.msgType;this.$4(f).setEventName("CLIENT_RECEIVED_CHAT_PROXY").setCallID(d).setMsgID(c.msg_id).setSenderID(a).setReceiverID(g).log();this.$5(m,e);this.$3(a,b,"Received P2P",c.type+", "+c.msg_id)};r.prototype.logSentMessage=function(a,b,c){"use strict";var d=b?b.toString():null,e={call_id:b,msg_id:c.msg_id,to:a,type:c.type};c.sdp&&(e.content=c.sdp);c.ack_id&&(e.ack_msg_id=c.ack_id);this.$4(c.type).setEventName("CLIENT_SENT").setCallID(d).setMsgID(c.msg_id).setSenderID(g).setReceiverID(a).log();this.$5(p,e);this.$3(a,b,"Sent",c.type+", "+c.msg_id)};r.prototype.logSentMessageSuccess=function(a,b,c,d){"use strict";var e={call_id:b,msg_id:d,peer_id:a,type:c};b=b?b.toString():null;this.$4(c).setEventName("CLIENT_SENT_SUCCESS").setCallID(b).setMsgID(d.toString()).setSenderID(g).setReceiverID(a).log();this.$5(o,e)};r.prototype.logSentMessageFailure=function(a,b,c,d,e){"use strict";var f={call_id:b,error_code:e,msg_id:d,peer_id:a,type:c},h=b?b.toString():null;this.$4(c).setEventName("CLIENT_SENT_FAILURE").setCallID(h).setMsgID(d.toString()).setSenderID(a).setSenderID(g).setReceiverID(a).setResultCode(e).log();this.$5(n,f);this.$3(a,b,"Send Failed",c+", "+e)};r.prototype.logCallAction=function(a,b,c,d,e){"use strict";var f={call_action:c,call_id:b,content:d,peer_id:a};e&&(f.trigger=e);this.$5(h,f);this.$3(a,b,"CallAction",c+", "+JSON.stringify(d))};r.prototype.logEvent=function(a,b,event){"use strict";var c={call_id:b,content:event,peer_id:a};this.$5(k,c);this.$3(a,b,"Event",JSON.stringify(event))};r.prototype.logInfo=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$5(l,d);this.$3(a,b,"Info",JSON.stringify(c))};r.prototype.logError=function(a,b,c){"use strict";var d={call_id:b,content:c,peer_id:a};this.$5(j,d);this.$3(a,b,"Error",JSON.stringify(c))};r.prototype.logErrorWithoutID=function(a){"use strict";this.logError(null,null,a)};r.prototype.logEndCallSummary=function(a){"use strict";if(!a)return;var c={call_id:a.callID,channel_session_id:b("ChannelManager").getCompleteConfig().sessionID,content:a.toString(),peer_id:a.peerID,tag:"endcallstats"},d=a.getExtraInfo();for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(c[e]=d[e]);this.$5(i,c);this.$3(a.peerID,a.callID,"Call Summary",JSON.stringify(c))};r.prototype.$5=function(a,c){"use strict";c.page_id=b("pageID"),b("FBRTCConsoleLogger").getInstance().getLogHistory().log(a,c),b("MarauderLogger").log(a,b("FBRTCConsoleLogger").MODULE_NAME,c)};r.prototype.$3=function(a,c,d,e,f){f===void 0&&(f="DEBUG"),b("FBRTCConsoleLogger").getInstance().log(e,a,c,d,f)};r.CallAction=Object.freeze({ANSWER_CALL:"answer_call",AUTO_DISABLE_VIDEO:"auto_disable_video",DENIED_PERMISSION:"denied_permission",END_CALL:"end_call",FAILED_GETTING_URI:"failed_getting_uri",OLD_URI:"old_uri",OPEN_POPUP:"open_popup",POPUP_OPENED:"popup_opened",RECEIVED_CALL:"received_call",SET_FULLSCREEN_ON:"set_fullscreen_on",SET_MUTE:"set_mute",SET_SELF_VIEW_ON:"set_self_view_on",SET_VIDEO_ON:"set_video_on",START_CALL:"start_call",START_SKYPE:"start_skype",TRY_NEW:"try_new",USER_SETTINGS_CHANGED:"user_settings_changed"});r.Trigger=Object.freeze({ADMIN_MESSAGE:"admin_message",CHAT_TAB_ICON_TOUR:"chat_tab_icon_tour",CHAT_TAB_ICON:"chat_tab_icon",CHAT_TAB_VOICE_ICON:"chat_tab_voice_icon",MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:"multiway_chat_tab_sheet_join_call_button",MULTIWAY_POPUP_START_CALL_BUTTON:"multiway_popup_start_call_button",MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:"multiway_thread_header_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_audio_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_audio_call_video_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_video_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_video_call_video_button",MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:"multiway_thread_header_video_button",MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:"multiway_thread_list_join_call_button",POPUP_CALL_START_BUTTON:"popup_start_call_button",REDIAL_BUTTON:"redial_button",RESET_CALL:"install_screen_sharing_ext_dialog",RETURN_CALL:"return_call",SKYPE_DEPRECATION_DIALOG:"skype_deprecation_dialog",TIMELINE_PROFILE:"timeline_profile",VC_PRECALL_SETUP:"vc_precall_setup",UNKNOWN:"unknown",WEB_MESSENGER:"web_messenger"});r.Key=Object.freeze({CONNECTION_EFFECTIVE_TYPE:"conn_effective_type",CPU_CORES:"cpu_cores",DEVICE_INFO:"device_info",DEVICE_MEMORY:"device_memory",DEVICE_PIXEL_RATIO:"device_pixel_ratio",INITIATED_BY_PAGE_ID:"initiated_by_page_id",PEER_IS_MOBILE:"peer_is_mobile",RATING_SHOWN:"rating_shown",RATING:"rating5",SCREEN_DURATION:"screen_duration",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",MEDIA_INPUTS:"media_inputs",VIDEO_CAPABILITIES:"video_capabilities"});e.exports=r}),null);
__d("FBRTCMediaMetricTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={count:0,current:-1,first:-1,min:-1,max:-1,mean:-1,median:-1,startedTime:-1,total:-1,updatedTime:-1};function h(){this.$1={},this.$2={},this.$3={}}h.prototype.getVideoStreamReportKeys=function(){return Object.keys(this.$3)};h.prototype.getJitterStreamReportKey=function(){return Object.keys(this.$1)};h.prototype.getAudioStreamReportKeys=function(){return Object.keys(this.$2)};h.prototype.addJitterBufferDelay=function(a,b){b!==null&&b!==undefined&&(this.$1[a]||(this.$1[a]=[]),this.$1[a].push(b))};h.prototype.setVideoMetric=function(a,b,c){c!==null&&c!==undefined&&(this.$3[a]||(this.$3[a]={}),this.$3[a][b]=this.$4(this.$3[a][b],c))};h.prototype.$4=function(a,c){__p&&__p();if(a!==null&&a!==undefined){a.current=c;a.updatedTime=b("performanceNow")();a.total+=c;a.count+=1;a.min=Math.min(a.min,c);a.max=Math.max(a.max,c);a.mean=a.total/a.count;return a}else return{min:c,max:c,total:c,count:1,mean:c,first:c,startedTime:b("performanceNow")(),current:c,updatedTime:b("performanceNow")()}};h.prototype.getVideoMetric=function(a,b){return this.$3[a]?this.$3[a][b]:null};h.prototype.addMetricStat=function(a,b,c){c!==null&&c!==undefined&&(this.$2[a]||(this.$2[a]={}),this.$2[a][b]=this.$4(this.$2[a][b],c))};h.prototype.getMetricStats=function(a,b){return!this.$2[a]?null:this.$2[a][b]};h.prototype.getJitterBufferStats=function(a){__p&&__p();if(!this.$1[a])return g;var b=this.$1[a].length;if(b===0)return g;this.$1[a].sort(function(a,b){return a-b});var c=this.$1[a].reduce(function(a,b){return a+b});if(b%2===0){var d=Math.floor((b-1)/2),e=Math.ceil((b-1)/2);d=(this.$1[a][d]+this.$1[a][e])/2}else d=this.$1[a][(b-1)/2];return{max:this.$1[a][b-1],min:this.$1[a][0],mean:c/b,median:d,total:c,count:b,first:-1,startedTime:-1,current:-1,updatedTime:-1}};h.prototype.toJsonString=function(){return JSON.stringify({stats:this.$2,jitterBufferDelays:this.$1,videoMetric:this.$3})};h.fromJsonString=function(a){var b=new h();try{a=JSON.parse(a),a=a}catch(a){return b}a.stats&&(b.$2=a.stats);a.jitterBufferDelays&&(b.$1=a.jitterBufferDelays);a.videoMetric&&(b.$3=a.videoMetric);return b};e.exports=h}),null);
__d("FBRTCMediaMetricsConst",[],(function(a,b,c,d,e,f){"use strict";a={JITTER:"jitter",ACCELERATE_RATE:"accelerate_rate",DECODING_CNG:"decoding_cng",DECODING_NORMAL:"decoding_normal",DECODING_PLC:"decoding_plc",DECODING_PLC_CNG:"decoding_plc_cng",DISCARD_RATE:"discard_rate",EXPAND_RATE:"expand_rate",PREEMPTIVE_RATE:"preemptive_rate",AUDIO_PACKETS_RECEIVED:"audio_packets_received",AUDIO_PACKETS_RECEIVED_LOST:"audio_packets_received_lost",AUDIO_PACKETS_SENT:"audio_packets_sent",AUDIO_PACKETS_SENT_LOST:"audio_packets_sent_lost",VIDEO_BYTES_RECEIVED:"video_bytes_received",VIDEO_BYTES_SENT:"video_bytes_sent",INBOUND_QP:"inbound_qp",OUTBOUND_QP:"outbound_qp",FRAMES_ENCODED:"frames_encoded",FRAMES_DECODED:"frames_decoded",VIDEOBWE_SEND_BANDWIDTH:"videobwe_send_bandwidth",VIDEOBWE_TRANSMIT_BITRATE:"videobwe_transmit_bitrate",VIDEOBWE_RETRANSMIT_BITRATE:"videobwe_retransmit_bitrate",AUDIO_BYTES_SENT:"audio_bytes_sent",AUDIO_BYTES_RECEIVED:"audio_bytes_received",VIDEO_PKTS_SENT:"video_pkts_sent",VIDEO_PKTS_SEND_LOST:"video_pkts_send_lost",VIDEO_PKTS_RECEIVED:"video_pkts_received",VIDEO_PKTS_RECV_LOST:"video_pkts_receive_lost",AUDIO_RTT_RECEIVED:"audio_rtt_received",AUDIO_RTT_SENT:"audio_rtt_sent"};e.exports=a}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLocalUploadLogLevel","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMediaMetricTracker","SiteData","UserAgentData","performanceNow"],(function(a,b,c,d,e,f){__p&&__p();var g=5*60*1e3,h={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended",SENT_JOIN_REQUEST:"s_jreq",RECV_JOIN_RESPONSE:"r_jresp",PROC_JOIN_RESPONSE:"p_jresp",RECV_RING_REQUEST:"r_rreq",SENT_RING_RESPONSE:"s_rresp"},i={FELLBACK_TO_AUDIO:"f_a",MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"},k={ESCALATION_INITIATION_BUTTON_CLICKED:"esc_init_button",ESCALATION_APPROVED_BUTTON_CLICKED:"esc_appr_button",ESCALATION_DECLINED_BUTTON_CLICKED:"esc_decl_button",USERMEDIA_REQUEST:"media_req",USERMEDIA_SUCCESS:"media_success",USERMEDIA_FAILURE:"media_fail",SENT_ESC_REQUEST:"s_esc_req",RECV_ESC_REQUEST:"r_esc_req",SENT_ESC_REQUEST_ACK:"s_esc_req_ack",RECV_ESC_REQUEST_ACK:"s_esc_req_ack",SENT_ESC_RESPONSE:"s_esc_rep",RECV_ESC_ACCEPT:"r_esc_accept",RECV_ESC_DECLINE:"r_esc_decl",RECV_ESC_TIMEOUT:"r_esc_timeout"},l=[b("FBRTCMediaMetricsConst").ACCELERATE_RATE,b("FBRTCMediaMetricsConst").DISCARD_RATE,b("FBRTCMediaMetricsConst").EXPAND_RATE,b("FBRTCMediaMetricsConst").PREEMPTIVE_RATE];m.nullSummary=function(){"use strict";return new m({peerID:"0",callID:"0",isCaller:!1,callTrigger:"NULL_SUMMARY"})};function m(a){"use strict";this.peerID=String(a.peerID),this.callID=String(a.callID),this.$2=a.isCaller,this.$1=a.version||m.CURRENT_SUMMARY_VERSION,this.$3=b("FBRTCLocalUploadLogLevel").getLocalUploadLogLevel(),this.$14=new Date().valueOf(),this.$4=a.callTrigger||null,this.$5={},this.$7={},this.$8={},this.$13={},this.$34=null,this.$35=null,this.$36=null,this.$16=0,this.$17=0,this.$33=!1,this.$24={},this.$9={},this.$10={},this.$11={},this.$12={},this.$37=null,this.$19=b("performanceNow")(),this.$15=0,this.$6={},this.$18=this.$19,this.$20=0,this.$21={},this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_INFO,this.$42()),this.addExtraInfo(b("FBRTCLogger").Key.CPU_CORES,navigator.hardwareConcurrency),window.navigator.deviceMemory!=null&&this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_MEMORY,window.navigator.deviceMemory),window.navigator.connection!=null&&window.navigator.connection.effectiveType!=null&&this.addExtraInfo(b("FBRTCLogger").Key.CONNECTION_EFFECTIVE_TYPE,window.navigator.connection.effectiveType),this.addExtraInfo(b("FBRTCLogger").Key.DEVICE_PIXEL_RATIO,window.devicePixelRatio),this.$43(),this.$23=b("FBRTCIceStatsParser").getInstance(),this.$41=new(b("FBRTCMediaMetricTracker"))(),this.$22=b("FBRTCLogger").getInstance()}m.prototype.toJsonString=function(){"use strict";this.$17=new Date().valueOf();return JSON.stringify({version:this.$1,peerID:this.peerID,callID:this.callID,isCaller:this.$2,uploadLogLevel:this.$3,callType:this.$29,conferenceName:this.$26,joinWithSID:this.$27,activeConn:this.$25,escP2PCallID:this.$28,serverInfoData:this.$30,localVideoDuration:this.$31,remoteVideoDuration:this.$32,startTime:this.$14,trigger:this.$4,signalingTime:this.$5,escStateTimes:this.$7,applicationEventTime:this.$8,videoEscTimes:this.$13,endCallReason:this.$34,endCallSubreason:this.$35,isRemoteEnded:this.$36,lastUpdatedTime:this.$16,lastSerializedTime:this.$17,unsetOnRetrieve:this.$33,openCount:this.$20,extraInfo:this.$21,captureStats:this.$24,gen0IceSentCount:this.$9,gen0IceReceivedCount:this.$10,iceSentCount:this.$11,iceReceivedCount:this.$12,connectionType:this.$37,mediaMetricStats:this.$41.toJsonString(),newSignalingTime:this.$6,accumulatedCallTime:this.$44(),deviceCharged:this.$38,videoReceivedCodec:this.$39,videoSentCodec:this.$40})};m.fromJsonString=function(a){"use strict";__p&&__p();try{a=JSON.parse(a)}catch(a){return null}if(a.version<m.OLDEST_SUPPORTED_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(a,"peerID")||!Object.prototype.hasOwnProperty.call(a,"callID")||!Object.prototype.hasOwnProperty.call(a,"isCaller")||!Object.prototype.hasOwnProperty.call(a,"startTime")||!Object.prototype.hasOwnProperty.call(a,"trigger")||!Object.prototype.hasOwnProperty.call(a,"signalingTime")||!Object.prototype.hasOwnProperty.call(a,"endCallReason")||!Object.prototype.hasOwnProperty.call(a,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(a,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(a,"lastSerializedTime"))return null;var c=new m({peerID:a.peerID,callID:a.callID,isCaller:a.isCaller});c.$1=a.version;c.$3=a.uploadLogLevel;c.$14=a.startTime;c.$4=a.trigger;c.$5=a.signalingTime;c.$34=a.endCallReason;c.$35=a.endCallSubreason;c.$36=a.isRemoteEnded;c.$16=a.lastUpdatedTime;c.$17=a.lastSerializedTime;c.$27=a.joinWithSID;a.callType&&(c.$29=a.callType);a.conferenceName&&(c.$26=a.conferenceName);a.escP2PCallID&&(c.$28=a.escP2PCallID);a.activeConn&&(c.$25=a.activeConn);a.serverInfoData&&(c.$30=a.serverInfoData);a.localVideoDuration&&(c.$31=a.localVideoDuration);a.remoteVideoDuration&&(c.$32=a.remoteVideoDuration);a.unsetOnRetrieve&&(c.$33=a.unsetOnRetrieve);a.openCount&&(c.$20=a.openCount);a.extraInfo&&(c.$21=a.extraInfo);a.captureStats&&(c.$24=a.captureStats);a.gen0IceSentCount&&(c.$9=a.gen0IceSentCount);a.gen0IceReceivedCount&&(c.$10=a.gen0IceReceivedCount);a.iceSentCount&&(c.$11=a.iceSentCount);a.iceReceivedCount&&(c.$12=a.iceReceivedCount);a.newSignalingTime&&(c.$6=a.newSignalingTime);a.accumulatedCallTime&&(c.$15=a.accumulatedCallTime);a.escStateTimes&&(c.$7=a.escStateTimes);a.applicationEventTime&&(c.$8=a.applicationEventTime);a.videoEscTimes&&(c.$13=a.videoEscTimes);a.mediaMetricStats&&(c.$41=b("FBRTCMediaMetricTracker").fromJsonString(a.mediaMetricStats));a.connectionType&&(c.$37=a.connectionType);a.deviceCharged&&(c.$38=a.deviceCharged);a.videoReceivedCodec!==null&&(c.$39=a.videoReceivedCodec);a.videoSentCodec!==null&&(c.$40=a.videoSentCodec);return c};m.restoreOrInitialize=function(a,c,d,e,f,g){"use strict";c=String(c);d=String(d);a=a.retrieveCallSummary(c,d);!a?(a=new m({peerID:c,callID:d,isCaller:e}),f?(a.onFullMessageReceived({msg:f}),a.onOfferAckSent(f)):a.onCallStarted(g||b("FBRTCLogger").Trigger.UNKNOWN),b("FBRTCLogger").getInstance().logError(c,d,"Missing call summary from storage")):a.$33&&(a.$34=null,a.$35=null,a.$36=null,delete a.$5[h.CALL_ENDED],delete a.$6[h.CALL_ENDED],a.$19=0,a.$33=null);return a};m.logSavedSummaries=function(a){"use strict";__p&&__p();var c=a.getLoggableSummaries(),d=c.length;if(d<=0)return;var e=b("FBRTCLogger").getInstance(),f=[];for(var g=0;g<d;g++){var h=c[g];e.logEndCallSummary(h);f.push({peerID:h.peerID,callID:h.callID})}a.removeCallSummaries(f);e.logToConsole("Logged pending summaries: "+d)};m.prototype.isNull=function(){"use strict";var a=m.CANONICAL_NULL_SUMMARY;return this.peerID===a.peerID&&this.callID===a.callID&&this.isCaller()===a.isCaller()&&this.getCallTrigger()===a.getCallTrigger()};m.prototype.save=function(a){"use strict";var c=b("performanceNow")(),d=c-this.$18;if(d>g){this.$22.logInfo(this.peerID,this.callID,"Summary too old: "+d);return}a.storeCallSummary(this.peerID,this.callID,this);this.$18=c};m.prototype.getVersion=function(){"use strict";return this.$1};m.prototype.getLastUpdatedTime=function(){"use strict";return this.$16};m.prototype.setLastUpdatedTime=function(a){"use strict";this.$16=a};m.prototype.getExtraInfo=function(){"use strict";return this.$21};m.prototype.getCallTrigger=function(){"use strict";return this.$4};m.prototype.addExtraInfo=function(a,b){"use strict";this.$21[a]=b,this.$43()};m.prototype.isCaller=function(){"use strict";return this.$2};m.prototype.isNetworkReady=function(){"use strict";if(this.$5[h.NETWORK_READY])return!0;else return!1};m.prototype.isAnswerReceived=function(){"use strict";if(this.$5[h.RECV_ANSWER])return!0;else return!1};m.prototype.onCallStarted=function(a){"use strict";this.$4=a,this.$45(h.CALL_STARTED),this.$43()};m.prototype.setCallTrigger=function(a){"use strict";this.$4=a,this.$43()};m.prototype.onPopupOpened=function(){"use strict";this.$46(i.POPUP_OPENED),this.$20++,this.$43()};m.prototype.onPressedAnswer=function(){"use strict";this.$46(i.PRESSED_ANSWER),this.$43()};m.prototype.onMediaRequested=function(){"use strict";this.$46(i.MEDIA_REQUESTED),this.$43()};m.prototype.onMediaSucceeded=function(){"use strict";this.$46(i.MEDIA_SUCCEEDED),this.$43()};m.prototype.onFellbackToAudio=function(){"use strict";this.$46(i.FELLBACK_TO_AUDIO),this.$43()};m.prototype.setConnectionType=function(a){"use strict";this.$37=a,this.$43()};m.prototype.setVideoCaptureStats=function(a,b){"use strict";this.$24={w:a,h:b},this.$43()};m.prototype.setUploadLogLevel=function(a){"use strict";this.$3=a,this.$43()};m.prototype.getCallType=function(){"use strict";return this.$29};m.prototype.setCallType=function(a){"use strict";this.$29=a,this.addExtraInfo("call_type",a),this.$43()};m.prototype.setVideoDurations=function(a,b){"use strict";this.$31=a,this.$32=b,this.$43()};m.prototype.setScreenDuration=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.SCREEN_DURATION,a)};m.prototype.setConferenceName=function(a){"use strict";this.$26=a,this.$43()};m.prototype.setTotalVideoFilterDuration=function(a){"use strict";this.addExtraInfo("rtc_video_duration_with_filter_enabled",Math.ceil(a).toString())};m.prototype.setCoExperienceEffectDuration=function(a){"use strict";this.addExtraInfo("rtc_effect_total_duration",Math.ceil(a).toString())};m.prototype.setEffectCount=function(a){"use strict";this.addExtraInfo("rtc_effect_count",a.toString())};m.prototype.setJoinWithSID=function(a){"use strict";this.$27=a,this.$43()};m.prototype.setServerInfoData=function(a){"use strict";this.$30=a,this.$43()};m.prototype.setActiveConnection=function(a){"use strict";this.$25=a,this.$43()};m.prototype.setEscalationP2PCallID=function(a){"use strict";this.$28=a,this.$43()};m.prototype.onOfferAckSent=function(a){"use strict";this.onMessageSent({type:b("FBRTCConstants").PayloadType.OFFER_ACK,flag:a.flag})};m.prototype.onMessageSent=function(a){"use strict";__p&&__p();var c=a.flag===1;switch(a.type){case b("FBRTCConstants").PayloadType.OFFER:this.$47(c,h.SENT_OFFER,h.SENT_RETRIED_OFFER);this.$48(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$47(c,h.SENT_ANSWER,h.SENT_RETRIED_ANSWER);this.$48(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.OK:this.$45(h.SENT_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$45(h.SENT_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$47(c,h.SENT_OFFER_ACK,h.SENT_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$47(c,h.SENT_ANSWER_ACK,h.SENT_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$48(a,this.$9,this.$11);break;case b("FBRTCConstants").PayloadType.ACK:a.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$49(k.SENT_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:a.ack_id?this.$49(k.SENT_ESC_RESPONSE):this.$49(k.SENT_ESC_REQUEST);break;default:}this.$43()};m.prototype.$48=function(a,b,c){"use strict";var d,e=null;a=this.$23.extractIceInfo(a.sdp);for(var f=0;f<a.length;f++)d=a[f].gen,e=a[f].type,d===0&&this.$50(b,e),this.$50(c,e)};m.prototype.$50=function(a,b){"use strict";!a[b]?a[b]=1:a[b]+=1};m.prototype.$51=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.PEER_IS_MOBILE,a.isFromMobile()?"1":"0")};m.prototype.onFullMessageReceived=function(a){"use strict";__p&&__p();var c=a.msg,d=c.flag===1;switch(c.type){case b("FBRTCConstants").PayloadType.OFFER:this.$51(a);this.$47(d,h.RECV_OFFER,h.RECV_RETRIED_OFFER);this.$48(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ANSWER:this.$51(a);this.$47(d,h.RECV_ANSWER,h.RECV_RETRIED_ANSWER);this.$48(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.OK:this.$45(h.RECV_OK);break;case b("FBRTCConstants").PayloadType.PRANSWER:this.$45(h.RECV_PRANSWER);break;case b("FBRTCConstants").PayloadType.OFFER_ACK:this.$47(d,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK);break;case b("FBRTCConstants").PayloadType.ANSWER_ACK:this.$47(d,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK);break;case b("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$48(c,this.$10,this.$12);break;case b("FBRTCConstants").PayloadType.ACK:c.ack_type===b("FBRTCConstants").PayloadType.VIDEO_REQUEST&&this.$49(k.RECV_ESC_REQUEST_ACK);break;case b("FBRTCConstants").PayloadType.VIDEO_REQUEST:c.ack_id?c.videoon||c.reqVideoOn?this.$49(k.RECV_ESC_ACCEPT):this.$49(k.RECV_ESC_DECLINE):c.videoon||c.reqVideoOn?this.$49(k.RECV_ESC_REQUEST):this.$49(k.RECV_ESC_TIMEOUT);default:}this.$43()};m.prototype.onMsgAckReceived=function(a,b){"use strict";a=a.msg.flag===1;b?this.$47(a,h.RECV_OFFER_ACK,h.RECV_RETRIED_OFFER_ACK):this.$47(a,h.RECV_ANSWER_ACK,h.RECV_RETRIED_ANSWER_ACK)};m.prototype.onNetworkReady=function(){"use strict";this.$45(h.NETWORK_READY),this.$43()};m.prototype.onCallConnected=function(){"use strict";this.$45(h.CALL_CONNECTED),this.$43()};m.prototype.onCallEnded=function(a,b,c,d){"use strict";this.$33=c,this.$34=String(a),this.$35=d,this.$36=b,this.$45(h.CALL_ENDED),this.$43()};m.prototype.setOfferSentTime=function(){"use strict";this.$45(h.SENT_OFFER)};m.prototype.setOfferAckReceivedTime=function(){"use strict";this.$45(h.RECV_OFFER_ACK)};m.prototype.setAnswerSentTime=function(){"use strict";this.$45(h.SENT_ANSWER)};m.prototype.setAnswerReceivedTime=function(){"use strict";this.$45(h.RECV_ANSWER)};m.prototype.setJoinRequestSent=function(){"use strict";this.$45(h.SENT_JOIN_REQUEST),this.$43()};m.prototype.setJoinResponseReceived=function(){"use strict";this.$45(h.RECV_JOIN_RESPONSE),this.$43()};m.prototype.setJoinResponseProcessed=function(){"use strict";this.$45(h.PROC_JOIN_RESPONSE),this.$43()};m.prototype.setRingRequestReceived=function(){"use strict";this.$45(h.RECV_RING_REQUEST),this.$43()};m.prototype.setRingResponseSent=function(){"use strict";this.$45(h.SENT_RING_RESPONSE),this.$43()};m.prototype.setEscalationAvailable=function(){"use strict";this.$52(j.ESCALATION_IS_AVAILABLE)};m.prototype.setEscalationInitiated=function(){"use strict";this.$52(j.USER_INITIATED_REQUEST)};m.prototype.setReceivedEscalationRequest=function(){"use strict";this.$52(j.RECEIVED_INCOMING_REQUEST)};m.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$52(j.REJECTED_INVALID_P2P_STATE)};m.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$52(j.CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$52(j.CONNECTED_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$52(j.PEER_CONNECTING_TO_MULTIWAY)};m.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$52(j.PEER_CONNECTED_TO_MULTIWAY)};m.prototype.setReadyToEscalate=function(){"use strict";this.$52(j.READY_TO_ESCALATE)};m.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$52(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};m.prototype.setEscalationTimedOut=function(){"use strict";this.$52(j.TIMED_OUT)};m.prototype.setVidEscalationInitClick=function(){"use strict";this.$49(k.ESCALATION_INITIATION_BUTTON_CLICKED)};m.prototype.setVidEscalationAcceptedClick=function(){"use strict";this.$49(k.ESCALATION_APPROVED_BUTTON_CLICKED)};m.prototype.setVidEscalationDeclinedClick=function(){"use strict";this.$49(k.ESCALATION_DECLINED_BUTTON_CLICKED)};m.prototype.setVidEscalationMediaRequested=function(){"use strict";this.$49(k.USERMEDIA_REQUEST)};m.prototype.setVidEscalationMediaSuccess=function(){"use strict";this.$49(k.USERMEDIA_SUCCESS)};m.prototype.setVidEscalationMediaFailed=function(){"use strict";this.$49(k.USERMEDIA_FAILURE)};m.prototype.setVideoCapabilities=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.VIDEO_CAPABILITIES,a)};m.prototype.setMediaInputs=function(a){"use strict";this.addExtraInfo(b("FBRTCLogger").Key.MEDIA_INPUTS,a)};m.prototype.getVideoReceivedCodec=function(){"use strict";return this.$39};m.prototype.setVideoReceivedCodec=function(a){"use strict";this.$39=a};m.prototype.getVideoSentCodec=function(){"use strict";return this.$40};m.prototype.setVideoSentCodec=function(a){"use strict";this.$40=a};m.prototype.toString=function(){"use strict";var a={};a.core_metrics=this.$53();a.time_series=null;return JSON.stringify(a)};m.prototype.$53=function(){"use strict";__p&&__p();var a={};a.ver=this.$1;a.log_level=b("FBRTCConstants").uploadLogLevelString(this.$3);a.caller=this.$2;a.call_type=this.$29;a.active_conn=this.$25;a.app_event_times=this.$8;a.conf_name=this.$26;a.join_with_sid=this.$27;a.esc_p2p_call_id=this.$28;a.esc_state_times=this.$7;a.vid_esc_times=this.$13;a.serv_info=this.$30;a.conn=this.$54();a.peer_id=this.peerID;a.has_video=!0;a.open_count=this.$20;a.signaling=this.$55();a.sender=this.$56();a.receiver=this.$57();a.end=this.$58();a.video=this.$59();a.push_phase=b("SiteData").push_phase;a.DebugAudioMetrics=this.$60();a.device_charged=this.$38;return a};m.prototype.$60=function(){"use strict";return{NetworkReceive:{jb_nm:this.$61()}}};m.prototype.$61=function(){"use strict";var a={},b=this.$41.getAudioStreamReportKeys().pop();l.forEach(function(c){var d=this.$41.getMetricStats(b,c);d&&(a[c]={m:d.min,M:d.max,avg:d.mean})}.bind(this));var c=this.$41.getJitterBufferStats(b);a.neteq={maxWait:c.max,meanWait:c.mean||0,mediaWait:c.median||0,minWait:c.min};return a};m.prototype.$54=function(){"use strict";var a={dtls:1},b=this.$56();b.avgrtt&&(a.avgrtt=b.avgrtt,a.maxrtt=b.maxrtt,a.minrtt=b.minrtt);return a};m.prototype.$55=function(){"use strict";__p&&__p();var a={};this.$4&&(a.trigger=this.$4);a.start_time=this.$14;a.time_from_start=this.$5;a.new_time_from_start=this.$6;var b=this.$6[h.CALL_CONNECTED]||this.$6[h.NETWORK_READY],c=this.$6[h.CALL_ENDED];if(b){c||(this.$15>0?c=this.$15:c=this.$44());c=c-b;c>0&&(a.duration=c)}return a};m.prototype.$56=function(){"use strict";__p&&__p();var a={},c=this.$41.getAudioStreamReportKeys();c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_BYTES_SENT);if(c!=null){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.ube_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT);if(c){a.psent=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_RTT_SENT);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$9&&(a.ice_g0=this.$9);this.$11&&(a.ice=this.$11);return a};m.prototype.$57=function(){"use strict";__p&&__p();var a={},c=this.$41.getAudioStreamReportKeys();c.some(function(c){__p&&__p();var d=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_PLC),e=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_PLC_CNG),f=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_CNG);c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").DECODING_NORMAL);if(f!=null&&c!=null&&d!=null&&e!=null){a.dec_cng=f.current;a.dec_normal=c.current;a.dec_plc=d.current;a.dec_plc_cng=e.current;a.neteq_calls=a.dec_cng+a.dec_normal+a.dec_plc+a.dec_plc_cng;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED);if(c){a.bytes=c.current;var d=c.updatedTime-c.startedTime;d>0&&(a.dbe_avg=(c.current-c.first)*8/d*1e3);return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST);if(c){a.plost=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED);if(c){a.precv=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getMetricStats(c,b("FBRTCMediaMetricsConst").AUDIO_RTT_RECEIVED);if(c){a.avgrtt=c.mean;a.maxrtt=c.max;a.minrtt=c.min;return!0}return!1}.bind(this));this.$10&&(a.ice_g0=this.$10);this.$12&&(a.ice=this.$12);return a};m.prototype.$58=function(){"use strict";var a={};this.$34!==null&&(a.end_call_reason_string=b("FBRTCConstants").callEndReasonString(this.$34),this.$35!==null&&(a.end_call_subreason_string=this.$35),a.remote_ended=this.$36);this.$37&&(a.conn_type=this.$37);return a};m.prototype.$59=function(){"use strict";var a={capture:{},ename:this.$40,eqps:this.$62(),frames:this.$63(),psent:null,ploss:null};this.$24&&Object.assign(a.capture,this.$24);return{sender:this.$64(a),receiver:this.$65(),ld:this.$31,rd:this.$32,bwe:this.$66()}};m.prototype.$62=function(){"use strict";__p&&__p();var a=null,c=this.$41.getVideoStreamReportKeys();c.some(function(c){c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").OUTBOUND_QP);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$63=function(){"use strict";__p&&__p();var a=null,c=this.$41.getVideoStreamReportKeys();c.some(function(c){c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").FRAMES_ENCODED);if(c){a=c.current;return!0}return!1}.bind(this));return a};m.prototype.$66=function(){"use strict";__p&&__p();var a={avg_enc_bitrate:this.$67(),avg_send_bw:null,avg_trans_bitrate:null,avg_retrans_bitrate:null},c=this.$41.getVideoStreamReportKeys();c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH),e=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE);if(d&&e&&c){a.avg_send_bw=d.mean;a.avg_trans_bitrate=e.mean;a.avg_retrans_bitrate=c.mean;return!0}return!1}.bind(this));return a};m.prototype.$67=function(){"use strict";__p&&__p();var a=this.$41.getVideoStreamReportKeys(),c=null;a.some(function(a){a=this.$41.getVideoMetric(a,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT);if(a){var d=a.current-a.first;a=a.updatedTime-a.startedTime;a>0&&(c=d*8/a*1e3);return!0}return!1}.bind(this));return c};m.prototype.$64=function(a){"use strict";__p&&__p();var c=this.$41.getVideoStreamReportKeys();c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SENT);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST);if(d&&c){a.psent=d.current;a.ploss=c.current;return!0}return!1}.bind(this));return a};m.prototype.$65=function(){"use strict";__p&&__p();var a={dec_bytes:null,dec_time:null,dname:this.$39,frd:null,precv:null,ploss:null,qps:null},c=this.$41.getVideoStreamReportKeys();c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST);if(d&&c){a.precv=d.current;a.ploss=c.current;return!0}return!1}.bind(this));c.some(function(c){c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED);if(c){a.dec_bytes=c.current-c.first;a.dec_time=c.updatedTime-c.startedTime;return!0}return!1}.bind(this));c.some(function(c){var d=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").FRAMES_DECODED);c=this.$41.getVideoMetric(c,b("FBRTCMediaMetricsConst").INBOUND_QP);if(d&&c){a.frd=d.current;a.qps=c.current;return!0}return!1}.bind(this));return a};m.prototype.$68=function(){"use strict";return new Date().valueOf()-this.$14};m.prototype.$44=function(){"use strict";var a=b("performanceNow")()-this.$19;return Math.floor(this.$15+a)};m.prototype.$45=function(a){"use strict";if(this.$5[a])return;this.$5[a]=this.$68();this.$6[a]=this.$44()};m.prototype.$52=function(a){"use strict";if(this.$7[a])return;this.$7[a]=this.$68()};m.prototype.$46=function(event){"use strict";if(this.$8[event])return;this.$8[event]=this.$68()};m.prototype.$49=function(event){"use strict";if(this.$13[event])return;this.$13[event]=this.$68()};m.prototype.setDeviceCharged=function(a){"use strict";this.$38=a};m.prototype.$47=function(a,b,c){"use strict";a?this.$45(c):this.$45(b)};m.prototype.$43=function(){"use strict";this.$16=new Date().valueOf()};m.prototype.$42=function(){"use strict";return{device:b("UserAgentData").deviceName,os:b("UserAgentData").platformName,os_version:b("UserAgentData").platformFullVersion,browser:b("UserAgentData").browserName,browser_version:b("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};m.prototype.getCallDuration=function(){"use strict";var a=this.$55();return a.duration?a.duration:0};m.prototype.getConnectedStartTime=function(){"use strict";return this.$5[h.CALL_CONNECTED]?this.$5[h.CALL_CONNECTED]+this.$14:0};m.prototype.getCurrentTimeFromCallConnected=function(){"use strict";var a=this.$6[h.CALL_CONNECTED];return this.$44()-a};m.prototype.getMediaMetricTracker=function(){"use strict";return this.$41};m.CANONICAL_NULL_SUMMARY=Object.freeze(m.nullSummary());m.OLDEST_SUPPORTED_SUMMARY_VERSION=19;m.CURRENT_SUMMARY_VERSION=24;m.REPORT_KEY="reportID";e.exports=m}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBLogger","FBRTCCallSummary","FBRTCLogger","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="localstorage",h="RTC_CALL_SUMMARY_",i="summary",j=2e3,k=3,l=3*60*1e3,m=null;n.getInstance=function(){m||(m=new n());return m};function n(){this.$1=new(b("CacheStorage"))(g,h),this.$2=b("FBRTCLogger").getInstance()}n.prototype.storeCallSummary=function(a,c,d){__p&&__p();if(d.isNull()){b("FBLogger")("rtweb").mustfix("Storing invalid FBRTCCallSummary!");return}var e=this;this.$3(function(b){__p&&__p();b[a]||(b[a]={});var f=b[a][c];if(f){f=e.$4(f);if(f&&f.getLastUpdatedTime()>d.getLastUpdatedTime()){e.$2.logToConsole("Outdated summaries");return null}}b[a][c]=e.$5(d);return b},e.$2.logError.bind(e.$2,a,c))};n.prototype.retrieveCallSummary=function(a,b){var c=this.getCallSummaries(),d=null;c[a]&&(d=c[a][b]);if(d)return this.$4(d);else return null};n.prototype.removeCallSummary=function(a,b){this.removeCallSummaries([{peerID:a,callID:b}])};n.prototype.removeCallSummaries=function(a){this.$3(function(b){var c=a.length;for(var d=0;d<c;d++){var e=a[d].peerID,f=a[d].callID;b[e]&&b[e][f]&&(delete b[e][f],this.$6(b[e])&&delete b[e])}return b}.bind(this),this.$2.logError.bind(this.$2,null,null))};n.prototype.getLoggableSummaries=function(){var a=this.getCallSummaries(),b=[];for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))for(var d in a[c])if(Object.prototype.hasOwnProperty.call(a[c],d)){var e=this.$4(a[c][d],l);e&&b.push(e)}return b};n.prototype.$6=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return!1;return!0};n.prototype.$5=function(a){a={__t:Date.now(),__d:a.toJsonString()};return a};n.prototype.$4=function(a,c){return a&&(!c||Date.now()-a.__t>=c)?b("FBRTCCallSummary").fromJsonString(a.__d):null};n.prototype.getCallSummaries=function(){var a=this.$1.get(i)||{};return a};n.prototype.$3=function(a,c,d,e){__p&&__p();d===void 0&&(d=k);(d===undefined||d===null)&&(d=k);var f=this.getCallSummaries(),g=this.getCallSummaries();f=a(f);if(f===null)return;var h=this.getCallSummaries();if(b("areEqual")(g,h))this.$1.set(i,f);else if(d>0){c("Retry lock");if(e){var l=this;setTimeout(function(){l.$3(a,c,d-1,!0)},j)}else this.$3(a,c,d-1,!0)}else c("Failed to lock")};e.exports=n}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],(function(a,b,c,d,e,f){a={init:function(){var a=b("FBRTCCallSummaryStore").getInstance();b("Banzai").subscribe(b("Banzai").SEND,function(){b("FBRTCCallSummary").logSavedSummaries(a)})}};e.exports=a}),null);
__d("CollabMinimumChromeVersion",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SCREEN_SHARE_CALL:65,VIDEO_CALL:48})}),null);
__d("FBRTCSupport",["CollabMinimumChromeVersion","RTCConfig","UserAgent"],(function(a,b,c,d,e,f){var g={isWebrtcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Firefox >= 25")||b("UserAgent").isBrowser("Edge >= 15.15042")||b("UserAgent").isBrowser("Opera >= 20")},isGroupCallWebtrcSupported:function(){return b("UserAgent").isBrowser("Chrome >= 28")||b("UserAgent").isBrowser("Opera >= 20")},isCollabSupported:function(){return g.isWebrtcSupported()&&(!!b("RTCConfig").CollabWhitelistedBrowserGK||b("UserAgent").isBrowser("Chrome >= "+b("CollabMinimumChromeVersion").VIDEO_CALL))},isMobileDevice:function(){return b("UserAgent").isPlatform("Android")||b("UserAgent").isPlatform("iOS")},isVideoFilterEffectSupported:function(){return!g.isMobileDevice()&&(b("UserAgent").isBrowser("Chrome >= 51")||b("UserAgent").isBrowser("Opera >= 36"))},videoEscalationByUnmuteWorkaround:function(){return b("UserAgent").isBrowser("Firefox < 60")||b("UserAgent").isBrowser("Edge")}};e.exports=g}),null);
__d("FBRTCCallControlActions",["FBRTCDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ACCEPT_ESCALATION:null,HANG_UP:null,PARENT_WINDOW_START_CALL:null,TOGGLE_FULL_SCREEN:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_MUTE_VIDEO:null,TOGGLE_SCREEN_SHARING:null,TOGGLE_SELF_VIEW:null,SHOW_SETTINGS:null,START_CALL:null,DECLINE_ESCALATION:null,RECEIVED_SIGNALING_MESSAGE:null,RESET_CALL:null,OPEN_SCREEN_IN_NEW:null,CLOSE_STANDALONE_SCREEN:null,REDIAL_CALL:null});a={Types:g,hangUp:function(){b("FBRTCDispatcher").dispatch({type:g.HANG_UP})},toggleMuteAudio:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_MUTE_AUDIO})},toggleMuteVideo:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_MUTE_VIDEO})},toggleFullScreen:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_FULL_SCREEN})},toggleSelfView:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_SELF_VIEW})},showSettings:function(){b("FBRTCDispatcher").dispatch({type:g.SHOW_SETTINGS})},toggleScreenSharing:function(){b("FBRTCDispatcher").dispatch({type:g.TOGGLE_SCREEN_SHARING})},startCall:function(){b("FBRTCDispatcher").dispatch({type:g.START_CALL})},openScreenInNewWindow:function(){b("FBRTCDispatcher").dispatch({type:g.OPEN_SCREEN_IN_NEW})},receivedSignalingMessage:function(a){b("FBRTCDispatcher").dispatch({type:g.RECEIVED_SIGNALING_MESSAGE,message_type:a.msgType,message:a})},acceptEscalation:function(){b("FBRTCDispatcher").dispatch({type:g.ACCEPT_ESCALATION})},declineEscalation:function(){b("FBRTCDispatcher").dispatch({type:g.DECLINE_ESCALATION})},resetCall:function(a){b("FBRTCDispatcher").dispatch({type:g.RESET_CALL,trigger:a})},redialCall:function(){b("FBRTCDispatcher").dispatch({type:g.REDIAL_CALL})},parentWindowStartCall:function(){b("FBRTCDispatcher").dispatch({type:g.PARENT_WINDOW_START_CALL})}};e.exports=a}),null);
__d("FBRTCExperiment",["FBRTCExperimentsConfig","QE2Logger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();g.gen=function(a){var c={params:{},auto_exposure:!1,in_experiment:!1};c=b("FBRTCExperimentsConfig")[a]||c;a=new g(a,c);return a};g.getIncomingCallExperiments=function(){return g.gen("rtweb_incoming_call_experiments")};function g(a,b){this.$1=a,this.$2=b}g.prototype.$3=function(){this.$2.auto_exposure&&this.logExposure()};g.prototype.logExposure=function(){this.$2.in_experiment&&b("QE2Logger").logExposureForUser(this.$1)};g.prototype.getParam=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==undefined)return this.$2.params[a].toString()}return b};g.prototype.getInt=function(a,b){if(this.$2.in_experiment){this.$3();if(this.$2.params[a]!==undefined)return parseInt(this.$2.params[a],10)}return b};g.prototype.getBool=function(a,b){var c=this.$2.params;if(this.$2.in_experiment){this.$3();if(c[a]!==undefined)return c[a]==="1"||c[a]===1||c[a]==="true"||c[a]===!0}return b};e.exports=g}),null);
__d("MediaStream",[],(function(a,b,c,d,e,f){e.exports=window.MediaStream||window.webkitMediaStream}),null);
__d("EmojiLikeConstants",["EmojiStaticConfig"],(function(a,b,c,d,e,f){"use strict";a=b("EmojiStaticConfig").sizeMap;c=Object.freeze({XSMALL:"xsmall",SMALL:"small",MEDIUM:"medium",LARGE:"large"});d={dp16:"xsmall",dp32:"small",dp64:"medium",db64:"medium",dp128:"large"};f=Object.freeze({PICKER:"picker",HOT_LIKE:"hot_like"});b=[983040];var g="hot_emoji_source",h="hot_emoji_size",i="emoji_like",j="\ud83d\udc4d",k=[128077];e.exports={FB_THUMBS_UP_EMOJI:b,size:c,sizeMap:a,sizeMapTransfer:d,source:f,SOURCE_TAG_PREFIX:g,TAG_PREFIX_NEW:h,TAG_PREFIX_OLD:i,THUMBS_UP_EMOJI:j,THUMBS_UP_EMOJI_CODES:k}}),null);
__d("MercuryThreadInformer",["ArbiterMixin","LogHistory","MercuryAssert","MercurySingletonProvider","mixin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("LogHistory").getInstance("mercury_informer");c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;a.get=function(){return i.get()};a.getForFBID=function(a){return i.getForFBID(a)};function a(a){g.constructor.call(this),this.$MercuryThreadInformer1=a,this.$MercuryThreadInformer2={},this.$MercuryThreadInformer3={},this.$MercuryThreadInformer4={},this.$MercuryThreadInformer5={},this.$MercuryThreadInformer6=!1,this.$MercuryThreadInformer7=!1,this.$MercuryThreadInformer8=!1,this.$MercuryThreadInformer9={},this.$MercuryThreadInformer10={},this.$MercuryThreadInformer11={},this.$MercuryThreadInformer12=0}a.prototype.updatedThread=function(a){this.$MercuryThreadInformer3[a]=!0,this.$MercuryThreadInformer13()};a.prototype.invalidatedThread=function(a){this.$MercuryThreadInformer4[a]=!0,this.$MercuryThreadInformer13()};a.prototype.deletedThread=function(a){this.$MercuryThreadInformer2[a]=!0,this.$MercuryThreadInformer13()};a.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer6=!0,this.$MercuryThreadInformer13()};a.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer7=!0,this.$MercuryThreadInformer13()};a.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer8=!0,this.$MercuryThreadInformer13()};a.prototype.changedThreadReadState=function(a,b,c){(!this.$MercuryThreadInformer5[a]||this.$MercuryThreadInformer5[a].timestamp<c)&&(this.$MercuryThreadInformer5[a]={mark_as_read:b,timestamp:c}),this.$MercuryThreadInformer13()};a.prototype.receivedMessage=function(a){b("MercuryAssert").isThreadID(a.thread_id);var c=a.thread_id;this.$MercuryThreadInformer9[c]||(this.$MercuryThreadInformer9[c]=[]);this.$MercuryThreadInformer9[c].push(a);this.updatedThread(c)};a.prototype.reorderedMessages=function(a,b){this.$MercuryThreadInformer10[a]={source:b},this.$MercuryThreadInformer13()};a.prototype.updatedMessage=function(a,b,c){this.$MercuryThreadInformer11[a]||(this.$MercuryThreadInformer11[a]={}),this.$MercuryThreadInformer11[a][b]={source:c},this.updatedThread(a)};a.prototype.synchronizeInforms=function(a){this.$MercuryThreadInformer12++;try{a()}catch(a){throw a}finally{this.$MercuryThreadInformer12--,this.$MercuryThreadInformer13()}};a.prototype.listen=function(a,b){return this.subscribe("threads-updated",function(c,d){d[a]&&b(a)})};a.prototype.$MercuryThreadInformer13=function(){__p&&__p();if(!this.$MercuryThreadInformer12){var a=this.$MercuryThreadInformer2,b=this.$MercuryThreadInformer3,c=this.$MercuryThreadInformer4,d=this.$MercuryThreadInformer5,e=this.$MercuryThreadInformer6,f=this.$MercuryThreadInformer7,g=this.$MercuryThreadInformer8,h=this.$MercuryThreadInformer9,i=this.$MercuryThreadInformer10,j=this.$MercuryThreadInformer11;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5={};this.$MercuryThreadInformer6=!1;this.$MercuryThreadInformer7=!1;this.$MercuryThreadInformer8=!1;this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11={};var k=Object.keys(b);(k.length||e)&&this.inform("threadlist-updated",k);k.length&&this.$MercuryThreadInformer14("threads-updated",b);for(var e in c){this.$MercuryThreadInformer14("thread-invalidated",c);break}for(var e in d){this.$MercuryThreadInformer14("thread-read-changed",d);break}for(e in a){this.$MercuryThreadInformer14("threads-deleted",a);break}f&&this.$MercuryThreadInformer14("unseen-updated",null);g&&this.$MercuryThreadInformer14("unread-updated",null);for(e in h){this.$MercuryThreadInformer14("messages-received",h);break}for(e in i){this.$MercuryThreadInformer14("messages-reordered",i);break}for(e in j){this.$MercuryThreadInformer14("messages-updated",j);break}}};a.prototype.$MercuryThreadInformer14=function(a,b){a==="threads-updated"&&h.debug(a,JSON.stringify(b)),this.inform(a,b)};var i=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MessengerMQTTConnectionEvents",[],(function(a,b,c,d,e,f){"use strict";e.exports={DELTA_EVENT:"messenger-mqtt-delta",STREAM_DISCONNECT:"messenger-mqtt-stream-disconnect",STREAM_CONNECTING:"messenger-mqtt-stream-connecting",STREAM_CONNECT:"messenger-mqtt-stream-connect",STATE_CONNECTED:"Connected",STATE_DISCONNECTED:"Disconnected",STATE_CONNECTING:"Connecting",TYP:"messenger-mqtt-typ"}}),null);
__d("MessengerMQTTGating",["gkx"],(function(a,b,c,d,e,f){"use strict";var g={_forcedOff:!1,isEnabled:function(){return b("gkx")("678651")&&!g._forcedOff},turnOff:function(){g._forcedOff=!0}};e.exports=g}),null);
__d("SoundPlayer",["URI","createArrayFromMixed"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new Map();function h(a){var c=new(b("URI"))(a);return c.getDomain()?a:new(b("URI"))(window.location.href).setPath(c.getPath()).toString()}function i(a){a=new(b("URI"))(a).getPath();if(/\.mp3$/.test(a))return"audio/mpeg";return/\.og[ga]$/.test(a)?"audio/ogg":""}var j={preload:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(g.has(e))return;var f=document.createElement("audio");if(!f||!f.canPlayType||!f.canPlayType(i(e)))continue;f.preload="auto";f.src=h(e);document.body&&document.body.appendChild(f);g.set(e,f);return}},play:function(a,c){__p&&__p();c===void 0&&(c={});for(var a=b("createArrayFromMixed")(a),d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=a.length)break;f=a[e++]}else{e=a.next();if(e.done)break;f=e.value}f=f;g.has(f)||j.preload(f);f=g.get(f);if(!f)continue;c.loop&&f.setAttribute("loop","");c.volume&&(f.volume=c.volume);f.play();return}},pause:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=g.get(e);if(e){e.pause();return}}},stop:function(a){__p&&__p();for(var a=b("createArrayFromMixed")(a),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;var f=g.get(e);if(f){f.pause();f.removeAttribute("src");f.src=h(e);return}}}};e.exports=j}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function(a,b,c,d,e,f){__p&&__p();var g="fb_sounds_playing3";function h(){__p&&__p();var a=b("WebStorage").getLocalStorage();if(a)try{a=a[g];if(a){a=JSON.parse(a);if(Array.isArray(a))return a}}catch(a){}return[]}function i(a){var c=b("WebStorage").getLocalStorage();if(c){var d=h();d.push(a);while(d.length>5)d.shift();try{c[g]=JSON.stringify(d)}catch(a){}}}function j(a){return h().some(function(b){return b===a})}a={play:function(a,c,d){a=b("createArrayFromMixed")(a);c=c||a[0]+Math.floor(Date.now()/1e3);if(j(c))return;b("SoundPlayer").play(a,{loop:!!d});i(c)},isSupported:function(){return!!b("WebStorage").getLocalStorage()}};e.exports=a}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function(a,b,c,d,e,f){__p&&__p();function g(a,c,d){b("SoundSynchronizer").play(a,c,d)}a={playLocal:g,playRemote:function(a,c,d,e){c={name:"SoundRPC",data:{paths:c,sync:d,loop:e}};a.postMessage(b("FBJSON").stringify(c),"*")},supportsRPC:function(){return!!window.postMessage},_listen:function(){b("Event").listen(window,"message",function(a){if(!/\.facebook.com$/.test(a.origin))return;var c={};try{c=b("FBJSON").parse(a.data)}catch(a){}c.name==="SoundRPC"&&g(c.data.paths,c.data.sync,c.data.loop)})}};e.exports=a}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=!1;c={init:function(a){},play:function(a,c,d){g?b("SoundRPC").playRemote(g.contentWindow,a,c,!1):b("SoundRPC").playLocal(a,c,d),h=!0},hasPlayedSoundBefore:function(){return h},playOnlyIfImmediate:function(a,c,d){if(!h&&b("Visibility").isHidden())return;this.play(a,c,d)},stop:function(a){g||b("SoundPlayer").stop(a)}};d=new(b("URI"))(location.href);d.getSubdomain()&&d.getSubdomain()!=="www"&&d.setSubdomain("www");f=d.getDomain();function a(){if(b("UserAgent_DEPRECATED").ie()<9)return!1;return b("SoundInitialData").RPC_DISABLED?!1:b("SoundSynchronizer").isSupported()&&b("SoundRPC").supportsRPC()}b("isFacebookURI")(d)&&location.host!==f&&a()&&(g=document.createElement("iframe"),g.setAttribute("src","//"+f+"/sound_iframe.php"),g.style.display="none",document.body&&document.body.appendChild(g));e.exports=c}),null);
__d("QPEventHandling",[],(function(a,b,c,d,e,f){"use strict";a={registerClickListener:function(a,b,c){a.addEventListener("click",c)}};e.exports=a}),null);
__d("QPRenderer",["csx","CSS","FBLogger","Parent","QPEventHandling","XAsyncRequest","XQuickPromotionSimpleLoggingController","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,event,c){a=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a).setString("qp_event",event).setStringToStringMap("qp_instance_log_data",c).getURI();new(b("XAsyncRequest"))(a).send()}function a(a,c,d){a=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a).setEnum("qp_action",c).setStringToStringMap("qp_instance_log_data",d).getURI();new(b("XAsyncRequest"))(a).send()}function c(a,c,d,e,f,g){e=b("ge")(e);e!==null?i(a,d,e,g,function(){f&&b("CSS").hide(c)}):b("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",a,d)}function d(a,c,d,e,f){i(a,c,d,f,function(){if(e){var a=b("Parent").bySelector(d,"._5jmm");a instanceof HTMLElement&&b("CSS").hide(a)}})}function e(a,c,d){c.show();h(a,"view",{});c.subscribe("cancel",function(){h(a,"dialog_cancel",{})});for(var e=0;e<d.length;e++){var f=d[e],g=b("ge")(f.element_id);g!==null?(i(a,f.action,g,f.extra_log_data,f.should_close?function(){c.hide()}:function(){}),f.action=="primary"&&g.focus()):b("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",a,f.action)}}function i(a,c,d,e,f){b("QPEventHandling").registerClickListener(d,c,function(){var d=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a).setEnum("qp_action",c).setStringToStringMap("qp_instance_log_data",e).getURI();new(b("XAsyncRequest"))(d).send();f()})}f.setAction=c;f.setComponentActionForFeedUnitQP=d;f.setDialogActionsAndShow=e;f.logAction=a;f.logEvent=h}),null);
__d("bs_js_int",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a===b}b=2147483647;c=-2147483648;f.equal=a;f.max=b;f.min=c}),null);
__d("bs_js_math",["bs_js_int"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){return Math.ceil(a)}function c(a){if(a>b("bs_js_int").max)return b("bs_js_int").max;else if(a<b("bs_js_int").min)return b("bs_js_int").min;else return Math.ceil(a)}function d(a){return Math.floor(a)}function g(a){if(a>b("bs_js_int").max)return b("bs_js_int").max;else if(a<b("bs_js_int").min)return b("bs_js_int").min;else return Math.floor(a)}function e(a,b){return g(Math.random()*(b-a|0))+a|0}var h=c,i=g;f.unsafe_ceil=a;f.ceil_int=c;f.ceil=h;f.unsafe_floor=d;f.floor_int=g;f.floor=i;f.random_int=e}),null);
__d("bs_belt_Array",["bs_curry","bs_js_math","bs_js_primitive","bs_caml_primitive"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){if(c>=0&&c<a.length)return b("bs_js_primitive").some(a[c])}function c(a,b){if(!(b>=0&&b<a.length))throw new Error('File "belt_Array.ml", line 25, characters 6-12');return a[b]}function d(a,b,c){if(b>=0&&b<a.length){a[b]=c;return!0}else return!1}function e(a,b,c){if(!(b>=0&&b<a.length))throw new Error('File "belt_Array.ml", line 31, characters 4-10');a[b]=c;return 0}function g(a,b,c){var d=a[b];a[b]=a[c];a[c]=d;return 0}function h(a){var c=a.length;for(var d=0,e=c-1|0;d<=e;++d)g(a,d,b("bs_js_math").random_int(d,c));return 0}function i(a){a=a.slice(0);h(a);return a}function j(a){var b=a.length;a=a;var c=0;b=b;for(var d=0,e=(b/2|0)-1|0;d<=e;++d)g(a,c+d|0,((c+b|0)-d|0)-1|0);return 0}function k(a){var b=a.length,c=new Array(b);for(var d=0,e=b-1|0;d<=e;++d)c[d]=a[(b-1|0)-d|0];return c}function l(a,b){if(a<=0)return[];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b;return c}}function m(a,b){if(a<=0)return[];else{var c=new Array(a);for(var d=0,a=a-1|0;d<=a;++d)c[d]=b(d);return c}}function n(a,c){return m(a,b("bs_curry").__1(c))}function o(a,b){a=m(a,b);h(a);return a}function p(a,c){return o(a,b("bs_curry").__1(c))}function q(a,b){b=b-a|0;if(b<0)return[];else{var c=new Array(b+1|0);for(var d=0;d<=b;++d)c[d]=a+d|0;return c}}function r(a,b,c){__p&&__p();b=b-a|0;if(b<0||c<=0)return[];else{b=(b/c|0)+1|0;var d=new Array(b);a=a;for(var e=0,b=b-1|0;e<=b;++e)d[e]=a,a=a+c|0;return d}}function s(a,b){var c=a.length,d=b.length;c=c<d?c:d;d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=[a[e],b[e]];return d}function t(a,b,c){var d=a.length,e=b.length;d=d<e?d:e;e=new Array(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=c(a[f],b[f]);return e}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){var c=a.length,d=b.length,e=new Array(c+d|0);for(var f=0,g=c-1|0;f<=g;++f)e[f]=a[f];for(var a=0,f=d-1|0;a<=f;++a)e[c+a|0]=b[a];return e}function w(a){__p&&__p();var b=a.length,c=0;for(var d=0,e=b-1|0;d<=e;++d)c=c+a[d].length|0;d=new Array(c);c=0;for(var e=0,b=b-1|0;e<=b;++e){var f=a[e];for(var g=0,h=f.length-1|0;g<=h;++g)d[c]=f[g],c=c+1|0}return d}function x(a,c,d){__p&&__p();if(d<=0)return[];else{var e=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(e+c|0,0):c;e=e-c|0;e=e<d?e:d;if(e<=0)return[];else{d=new Array(e);for(var f=0,e=e-1|0;f<=e;++f)d[f]=a[c+f|0];return d}}}function y(a,c){var d=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(d+c|0,0):c;d=d-c|0;var e=new Array(d);for(var f=0,d=d-1|0;f<=d;++f)e[f]=a[c+f|0];return e}function z(a,c,d,e){__p&&__p();if(d>0){var f=a.length;c=c<0?b("bs_caml_primitive").caml_int_max(f+c|0,0):c;f=f-c|0;f=f<d?f:d;if(f>0){for(var d=c,c=(c+f|0)-1|0;d<=c;++d)a[d]=e;return 0}else return 0}else return 0}function A(a,b,c,d,e){if(d<=b){for(var f=0,g=e-1|0;f<=g;++f)c[f+d|0]=a[f+b|0];return 0}else{for(var f=e-1|0;f>=0;--f)c[f+d|0]=a[f+b|0];return 0}}function B(a,c,d,e,f){__p&&__p();var g=a.length,h=d.length;c=c<0?b("bs_caml_primitive").caml_int_max(g+c|0,0):c;e=e<0?b("bs_caml_primitive").caml_int_max(h+e|0,0):e;f=b("bs_caml_primitive").caml_int_min(f,b("bs_caml_primitive").caml_int_min(g-c|0,h-e|0));if(e<=c){for(var g=0,h=f-1|0;g<=h;++g)d[g+e|0]=a[g+c|0];return 0}else{for(var g=f-1|0;g>=0;--g)d[g+e|0]=a[g+c|0];return 0}}function C(a,b){for(var c=0,d=a.length-1|0;c<=d;++c)b(a[c]);return 0}function D(a,c){return C(a,b("bs_curry").__1(c))}function E(a,b){var c=a.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=b(a[e]);return d}function F(a,c){return E(a,b("bs_curry").__1(c))}function G(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0,c=c-1|0;f<=c;++f){var g=a[f];b(g)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function H(a,c){return G(a,b("bs_curry").__1(c))}function I(a,b){var c=a.length,d=new Array(c),e=0;for(var f=0,c=c-1|0;f<=c;++f){var g=a[f];b(g,f)&&(d[e]=g,e=e+1|0)}d.length=e;return d}function J(a,c){return I(a,b("bs_curry").__2(c))}function K(a,c){var d=a.length,e=new Array(d),f=0;for(var g=0,d=d-1|0;g<=d;++g){var h=a[g];h=c(h);h!==undefined&&(e[f]=b("bs_js_primitive").valFromOption(h),f=f+1|0)}e.length=f;return e}function L(a,c){return K(a,b("bs_curry").__1(c))}function M(a,b){for(var c=0,d=a.length-1|0;c<=d;++c)b(c,a[c]);return 0}function N(a,c){return M(a,b("bs_curry").__2(c))}function O(a,b){var c=a.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=b(e,a[e]);return d}function P(a,c){return O(a,b("bs_curry").__2(c))}function Q(a,b,c){b=b;for(var d=0,e=a.length-1|0;d<=e;++d)b=c(b,a[d]);return b}function aa(a,c,d){return Q(a,c,b("bs_curry").__2(d))}function R(a,b,c){b=b;for(var d=a.length-1|0;d>=0;--d)b=c(b,a[d]);return b}function ba(a,c,d){return R(a,c,b("bs_curry").__2(d))}function S(a,c,d,e){d=d;var f=b("bs_caml_primitive").caml_int_min(a.length,c.length);for(var f=f-1|0;f>=0;--f)d=e(d,a[f],c[f]);return d}function ca(a,c,d,e){return S(a,c,d,b("bs_curry").__3(e))}function T(a,b){__p&&__p();var c=a.length;a=a;var d=0;b=b;c=c;while(!0){var e=d;if(e===c)return!0;else if(b(a[e])){d=e+1|0;continue}else return!1}}function da(a,c){return T(a,b("bs_curry").__1(c))}function U(a,b){__p&&__p();var c=a.length;a=a;var d=0;b=b;c=c;while(!0){var e=d;if(e===c)return!1;else if(b(a[e]))return!0;else{d=e+1|0;continue}}}function ea(a,c){return U(a,b("bs_curry").__1(c))}function V(a,b,c,d,e){__p&&__p();while(!0){var f=c;if(f===e)return!0;else if(d(a[f],b[f])){c=f+1|0;continue}else return!1}}function W(a,c,d){return V(a,c,0,d,b("bs_caml_primitive").caml_int_min(a.length,c.length))}function fa(a,c,d){return W(a,c,b("bs_curry").__2(d))}function X(a,c,d){__p&&__p();var e=a,f=c,g=0;d=d;a=b("bs_caml_primitive").caml_int_min(a.length,c.length);while(!0){c=g;if(c===a)return!1;else if(d(e[c],f[c]))return!0;else{g=c+1|0;continue}}}function ga(a,c,d){return X(a,c,b("bs_curry").__2(d))}function Y(a,b,c){var d=a.length,e=b.length;if(d===e)return V(a,b,0,c,d);else return!1}function ha(a,c,d){return Y(a,c,b("bs_curry").__2(d))}function Z(a,b,c){__p&&__p();var d=a.length,e=b.length;if(d>e)return 1;else if(d<e)return-1;else{e=a;a=b;b=0;c=c;d=d;while(!0){var f=b;if(f===d)return 0;else{var g=c(e[f],a[f]);if(g===0){b=f+1|0;continue}else return g}}}}function ia(a,c,d){return Z(a,c,b("bs_curry").__2(d))}function $(a,b){var c=a.length,d=0,e=0,f=new Array(c),g=new Array(c);for(var h=0,c=c-1|0;h<=c;++h){var i=a[h];b(i)?(f[d]=i,d=d+1|0):(g[e]=i,e=e+1|0)}f.length=d;g.length=e;return[f,g]}function ja(a,c){return $(a,b("bs_curry").__1(c))}function ka(a){var b=a.length,c=new Array(b),d=new Array(b);for(var e=0,b=b-1|0;e<=b;++e){var f=a[e];c[e]=f[0];d[e]=f[1]}return[c,d]}f.get=a;f.getExn=c;f.set=d;f.setExn=e;f.shuffleInPlace=h;f.shuffle=i;f.reverseInPlace=j;f.reverse=k;f.make=l;f.range=q;f.rangeBy=r;f.makeByU=m;f.makeBy=n;f.makeByAndShuffleU=o;f.makeByAndShuffle=p;f.zip=s;f.zipByU=t;f.zipBy=u;f.unzip=ka;f.concat=v;f.concatMany=w;f.slice=x;f.sliceToEnd=y;f.fill=z;f.blit=B;f.blitUnsafe=A;f.forEachU=C;f.forEach=D;f.mapU=E;f.map=F;f.keepU=G;f.keep=H;f.keepWithIndexU=I;f.keepWithIndex=J;f.keepMapU=K;f.keepMap=L;f.forEachWithIndexU=M;f.forEachWithIndex=N;f.mapWithIndexU=O;f.mapWithIndex=P;f.partitionU=$;f.partition=ja;f.reduceU=Q;f.reduce=aa;f.reduceReverseU=R;f.reduceReverse=ba;f.reduceReverse2U=S;f.reduceReverse2=ca;f.someU=U;f.some=ea;f.everyU=T;f.every=da;f.every2U=W;f.every2=fa;f.some2U=X;f.some2=ga;f.cmpU=Z;f.cmp=ia;f.eqU=Y;f.eq=ha}),null);
__d("bs_belt_Id",["bs_curry"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a=a[0];return[a]}function c(a){a=a[0];a=b("bs_curry").__2(a);return[a]}function d(a){return[a]}function e(a){a=b("bs_curry").__2(a);return[a]}function g(a){var b=a[0];a=a[1];return[b,a]}function h(a){var c=a[0];c=b("bs_curry").__1(c);a=a[1];a=b("bs_curry").__2(a);return[c,a]}function i(a,b){return[a,b]}function j(a,c){a=b("bs_curry").__1(a);c=b("bs_curry").__2(c);return[a,c]}f.MakeComparableU=a;f.MakeComparable=c;f.comparableU=d;f.comparable=e;f.MakeHashableU=g;f.MakeHashable=h;f.hashableU=i;f.hashable=j}),null);
__d("bs_belt_SortArray",["bs_curry","bs_belt_Array"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b,c,d,e){__p&&__p();while(!0){var f=c,g=b;if(f>=d)return f;else{var h=a[f];if(e(h,g)){c=f+1|0;b=h;continue}else return f}}}function h(a,b){__p&&__p();var c=a.length;if(c===0||c===1)return c;else{var d=a[0],e=a[1];if(b(d,e)){var f=a,h=e,i=2,j=c,k=b;while(!0){var l=i,m=h;if(l>=j)return l;else{var n=f[l];if(k(m,n)){i=l+1|0;h=n;continue}else return l}}}else if(b(e,d))return-g(a,e,2,c,b)|0;else return 1}}function a(a,c){return h(a,b("bs_curry").__2(c))}function i(a,b){__p&&__p();var c=a.length;if(c===0)return!0;else{a=a;var d=0;b=b;c=c-1|0;while(!0){var e=d;if(e===c)return!0;else if(b(a[e],a[e+1|0])<=0){d=e+1|0;continue}else return!1}}}function c(a,c){return i(a,b("bs_curry").__2(c))}function j(a,c,d,e,f,g,h,i,j){__p&&__p();d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;if(j(p,n)<=0){h[m]=p;p=q+1|0;if(p<d){i=m+1|0;c=a[p];k=p;continue}else return b("bs_belt_Array").blitUnsafe(e,o,h,m+1|0,g-o|0)}else{h[m]=n;p=o+1|0;if(p<g){i=m+1|0;f=e[p];l=p;continue}else return b("bs_belt_Array").blitUnsafe(a,q,h,m+1|0,d-q|0)}}}function k(a,c,d,e,f,g,h,i,j){__p&&__p();d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k,r=j(p,n);if(r<0){h[m]=p;var s=q+1|0,t=m+1|0;if(s<d){i=t;c=a[s];k=s;continue}else{b("bs_belt_Array").blitUnsafe(e,o,h,t,g-o|0);return(t+g|0)-o|0}}else if(r===0){h[m]=p;s=q+1|0;t=o+1|0;r=m+1|0;if(s<d&&t<g){i=r;f=e[t];l=t;c=a[s];k=s;continue}else if(s===d){b("bs_belt_Array").blitUnsafe(e,t,h,r,g-t|0);return(r+g|0)-t|0}else{b("bs_belt_Array").blitUnsafe(a,s,h,r,d-s|0);return(r+d|0)-s|0}}else{h[m]=n;p=o+1|0;t=m+1|0;if(p<g){i=t;f=e[p];l=p;continue}else{b("bs_belt_Array").blitUnsafe(a,q,h,t,d-q|0);return(t+d|0)-q|0}}}}function d(a,c,d,e,f,g,h,i,j){return k(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function l(a,b,c,d,e,f,g,h,i){__p&&__p();c=b+c|0;f=e+f|0;var j=b;b=a[b];var k=e;e=d[e];h=h;while(!0){var l=h,m=e,n=k,o=b,p=j;m=i(o,m);if(m<0){var q=p+1|0;if(q<c){b=a[q];j=q;continue}else return l}else if(m===0){g[l]=o;q=p+1|0;m=n+1|0;o=l+1|0;if(q<c&&m<f){h=o;e=d[m];k=m;b=a[q];j=q;continue}else return o}else{p=n+1|0;if(p<f){e=d[p];k=p;continue}else return l}}}function e(a,c,d,e,f,g,h,i,j){return l(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function m(a,c,d,e,f,g,h,i,j){__p&&__p();d=c+d|0;g=f+g|0;var k=c;c=a[c];var l=f;f=e[f];i=i;while(!0){var m=i,n=f,o=l,p=c,q=k;n=j(p,n);if(n<0){h[m]=p;p=m+1|0;var r=q+1|0;if(r<d){i=p;c=a[r];k=r;continue}else return p}else if(n===0){r=q+1|0;p=o+1|0;if(r<d&&p<g){f=e[p];l=p;c=a[r];k=r;continue}else if(r===d)return m;else{b("bs_belt_Array").blitUnsafe(a,r,h,m,d-r|0);return(m+d|0)-r|0}}else{n=o+1|0;if(n<g){f=e[n];l=n;continue}else{b("bs_belt_Array").blitUnsafe(a,q,h,m,d-q|0);return(m+d|0)-q|0}}}}function n(a,c,d,e,f,g,h,i,j){return m(a,c,d,e,f,g,h,i,b("bs_curry").__2(j))}function o(a,b,c,d,e,f){for(var g=0,e=e-1|0;g<=e;++g){var h=a[b+g|0],i=(d+g|0)-1|0;while(i>=d&&f(c[i],h)>0)c[i+1|0]=c[i],i=i-1|0;c[i+1|0]=h}return 0}function p(a,b,c,d,e,f){if(e<=5)return o(a,b,c,d,e,f);else{var g=e/2|0;e=e-g|0;p(a,b+g|0,c,d+g|0,e,f);p(a,b,a,b+e|0,g,f);return j(a,b+e|0,g,c,d+g|0,e,c,d,f)}}function q(a,b){__p&&__p();var c=a.length;if(c<=5)return o(a,0,a,0,c,b);else{var d=c/2|0;c=c-d|0;var e=new Array(c);p(a,d,e,0,c,b);p(a,0,a,c,d,b);return j(a,c,d,e,0,c,a,0,b)}}function r(a,c){return q(a,b("bs_curry").__2(c))}function s(a,b){a=a.slice(0);q(a,b);return a}function t(a,c){return s(a,b("bs_curry").__2(c))}function u(a,b,c){__p&&__p();var d=a.length;if(d===0)return-1;else{var e=a[0];e=c(b,e);if(e<0)return-1;else{e=a[d-1|0];e=c(b,e);if(e>0)return-(d+1|0)|0;else{e=a;a=0;d=d-1|0;b=b;c=c;while(!0){var f=d,g=a,h=(g+f|0)/2|0,i=e[h];i=c(b,i);if(i===0)return h;else if(i<0)if(f===h)if(c(e[g],b)===0)return g;else return-(f+1|0)|0;else{d=h;continue}else if(g===h)if(c(e[f],b)===0)return f;else return-(f+1|0)|0;else{a=h;continue}}}}}}function v(a,c,d){return u(a,c,b("bs_curry").__2(d))}var w=0,x=0;f.Int=w;f.$$String=x;f.strictlySortedLengthU=h;f.strictlySortedLength=a;f.isSortedU=i;f.isSorted=c;f.stableSortInPlaceByU=q;f.stableSortInPlaceBy=r;f.stableSortByU=s;f.stableSortBy=t;f.binarySearchByU=u;f.binarySearchBy=v;f.unionU=k;f.union=d;f.intersectU=l;f.intersect=e;f.diffU=m;f.diff=n}),null);
__d("bs_belt_internalAVLset",["bs_curry","bs_js_primitive","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c){var d=a!==null?a.height:0,e=c!==null?c.height:0;return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function j(a){return{value:a,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function l(a,b,c){__p&&__p();var d=a!==null?a.height:0,e=c!==null?c.height:0;if(d>(e+2|0)){var f=a.left,g=a.value,h=a.right;if(k(f,h))return i(f,g,i(h,b,c));else{var j=h.left,l=h.value;h=h.right;return i(i(f,g,j),l,i(h,b,c))}}else if(e>(d+2|0)){f=c.left;g=c.value;j=c.right;if(k(j,f))return i(i(a,b,f),g,j);else{l=f.left;h=f.value;f=f.right;return i(i(a,b,l),h,i(f,g,j))}}else return{value:b,height:d>=e?d+1|0:e+1|0,left:a,right:c}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.value}}function a(a){if(a!==null)return b("bs_js_primitive").some(m(a))}function c(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.value}}function d(a){if(a!==null)return b("bs_js_primitive").some(n(a))}function e(a){if(a!==null)return n(a)}function o(a,b){var c=a.left,d=a.right;a=a.value;if(c!==null)return l(o(c,b),a,d);else{b[0]=a;return d}}function p(a){return a===null}function q(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function r(a,b){__p&&__p();while(!0){var c=a;if(c!==null){r(c.left,b);b(c.value);a=c.right;continue}else return 0}}function s(a,c){return r(a,b("bs_curry").__1(c))}function t(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.value;e=e.right;b=c(t(f,d,c),g);a=e;continue}else return d}}function u(a,c,d){return t(a,c,b("bs_curry").__2(d))}function v(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.value)&&v(c.left,b)){a=c.right;continue}else return!1;else return!0}}function w(a,c){return v(a,b("bs_curry").__1(c))}function x(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.value)||x(c.left,b))return!0;else{a=c.right;continue}else return!1}}function y(a,c){return x(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null)return l(z(a.left,b),a.value,a.right);else return j(b)}function A(a,b){if(a!==null)return l(a.left,a.value,A(a.right,b));else return j(b)}function B(a,b,c){__p&&__p();if(a!==null)if(c!==null){var d=a.height,e=c.height;if(d>(e+2|0))return l(a.left,a.value,B(a.right,b,c));else if(e>(d+2|0))return l(B(a,b,c.left),c.value,c.right);else return i(a,b,c)}else return A(a,b);else return z(c,b)}function C(a,b){if(a!==null)if(b!==null){var c=[b.value],d=o(b,c);return B(a,c[0],d)}else return a;else return b}function D(a,b){__p&&__p();if(a!==null){var c=a.value,d=D(a.left,b),e=d[1];d=d[0];var f=b(c);a=D(a.right,b);b=a[1];a=a[0];if(f)return[B(d,c,a),C(e,b)];else return[C(d,a),B(e,c,b)]}else return[null,null]}function E(a,c){return D(a,b("bs_curry").__1(c))}function F(a){var b=a.left;a=a.right;b=b!==null?F(b):0;a=a!==null?F(a):0;return(1+b|0)+a|0}function G(a){if(a!==null)return F(a);else return 0}function H(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d.value,H(d.right,c)];a=d.left;continue}else return c}}function I(a){return H(a,0)}function J(a){__p&&__p();while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLset.ml", line 302, characters 6-12');J(c);a=b;continue}else return 0}}function K(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.value;e=e.right;f=f!==null?K(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function L(a,b,c,d){__p&&__p();while(!0){var e=a,f=e.left,g=e.value;e=e.right;f!==null&&L(f,b,c,d);if(d(g)){f=b.forward;c[f]=g;b.forward=f+1|0}else{f=b.backward;c[f]=g;b.backward=f-1|0}if(e!==null){a=e;continue}else return 0}}function M(a,b,c,d){__p&&__p();while(!0){var e=b,f=a,g=f.left,h=f.value;f=f.right;g=g!==null?M(g,e,c,d):e;e=d(h)?(c[g]=h,g+1|0):g;if(f!==null){b=e;a=f;continue}else return e}}function N(b){if(b!==null){var a=F(b);a=new Array(a);K(b,0,a);return a}else return[]}function O(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=O(a,b,d),f=a[b-d|0];d=O(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f,d)}else switch(c){case 0:return null;case 1:return j(a[b]);case 2:e=a[b];f=a[b-1|0];return{value:f,height:2,left:j(e),right:null};case 3:d=a[b];c=a[b-1|0];f=a[b-2|0];return{value:c,height:2,left:j(d),right:j(f)}}}function P(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=P(a,b,d),f=a[b+d|0];d=P(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f,d)}else switch(c){case 0:return null;case 1:return j(a[b]);case 2:e=a[b];f=a[b+1|0];return{value:f,height:2,left:j(e),right:null};case 3:d=a[b];c=a[b+1|0];f=a[b+2|0];return{value:c,height:2,left:j(d),right:j(f)}}}function aa(a){return P(a,0,a.length)}function Q(a,b){__p&&__p();if(a!==null){var c=a.left,d=a.value,e=a.right,f=Q(c,b),g=b(d);b=Q(e,b);if(g)if(c===f&&e===b)return a;else return B(f,d,b);else return C(f,b)}else return null}function ba(a,c){return Q(a,b("bs_curry").__1(c))}function R(b,c){if(b!==null){var a=F(b);a=new Array(a);b=M(b,0,a,c);return P(a,0,b)}else return null}function ca(a,c){return R(a,b("bs_curry").__1(c))}function S(b,c){if(b!==null){var a=F(b),d=new Array(a),e=a-1|0,f={forward:0,backward:e};L(b,f,d,c);b=f.forward;return[P(d,0,b),O(d,e,a-b|0)]}else return[null,null]}function da(a,c){return S(a,b("bs_curry").__1(c))}function ea(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function T(a,b,c){__p&&__p();var d=G(a),e=G(b);if(d===e){a=q(a,0);b=q(b,0);c=c;while(!0){var f=b,g=a;if(g&&f){var h=f[0],i=g[0],j=c(i.value,h.value);if(j===0){b=q(h.right,f[1]);a=q(i.right,g[1]);continue}else return j}else return 0}}else if(d<e)return-1;else return 1}function fa(a,b,c){return T(a,b,c)===0}function U(b,c,a){__p&&__p();while(!0){var d=c,e=b;if(e!==null)if(d!==null){var f=e.left,g=e.value;e=e.right;var h=d.left,j=d.value;d=d.right;j=a(g,j);if(j===0)if(U(f,h,a)){c=d;b=e;continue}else return!1;else if(j<0)if(U(i(f,g,null),h,a)){b=e;continue}else return!1;else if(U(i(null,g,e),d,a)){b=f;continue}else return!1}else return!1;else return!0}}function ga(c,d,a){__p&&__p();while(!0){var e=c;if(e!==null){var f=e.value,g=a(d,f);if(g===0)return b("bs_js_primitive").some(f);else{c=g<0?e.left:e.right;continue}}else return undefined}}function ha(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else return undefined}}function ia(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.value,f=a(c,e);if(f===0)return e;else{b=f<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function ja(a){var b=W(a.left);a.left=b;return V(a)}function ka(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){__p&&__p();var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(ja(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(ka(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(a,b,c){__p&&__p();if(b!==null){var d=b.value;d=a(c,d);if(d===0)return b;else{var e=b.left,f=b.right;if(d<0){d=Z(a,e,c);b.left=d}else b.right=Z(a,f,c);return Y(b)}}else return j(c)}function la(c,a){__p&&__p();var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b,c)<0}),f;e>=0?f=P(c,0,e):(e=-e|0,f=O(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e)f=Z(a,f,c[e]);return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.value=b.value;return c}}var ma=null;f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.minimum=a;f.minUndefined=c;f.maximum=d;f.maxUndefined=e;f.removeMinAuxWithRef=o;f.empty=ma;f.isEmpty=p;f.stackAllLeft=q;f.forEachU=r;f.forEach=s;f.reduceU=t;f.reduce=u;f.everyU=v;f.every=w;f.someU=x;f.some=y;f.joinShared=B;f.concatShared=C;f.keepSharedU=Q;f.keepShared=ba;f.keepCopyU=R;f.keepCopy=ca;f.partitionSharedU=D;f.partitionShared=E;f.partitionCopyU=S;f.partitionCopy=da;f.lengthNode=F;f.size=G;f.toList=I;f.checkInvariantInternal=J;f.fillArray=K;f.toArray=N;f.fromSortedArrayAux=P;f.fromSortedArrayRevAux=O;f.fromSortedArrayUnsafe=aa;f.has=ea;f.cmp=T;f.eq=fa;f.subset=U;f.get=ga;f.getUndefined=ha;f.getExn=ia;f.fromArray=la;f.addMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_belt_SetDict",["bs_belt_internalAVLset"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(c,d,a){__p&&__p();if(c!==null){var e=c.value,f=a(d,e);if(f===0)return c;else{var h=c.left,i=c.right;if(f<0){f=g(h,d,a);if(f===h)return c;else return b("bs_belt_internalAVLset").bal(f,e,i)}else{f=g(i,d,a);if(f===i)return c;else return b("bs_belt_internalAVLset").bal(h,e,f)}}}else return b("bs_belt_internalAVLset").singleton(d)}function h(c,d,a){__p&&__p();if(c!==null){var e=c.left,f=c.value,g=c.right,i=a(d,f);if(i===0)if(e!==null)if(g!==null){var j=[g.value],k=b("bs_belt_internalAVLset").removeMinAuxWithRef(g,j);return b("bs_belt_internalAVLset").bal(e,j[0],k)}else return e;else return g;else if(i<0){j=h(e,d,a);if(j===e)return c;else return b("bs_belt_internalAVLset").bal(j,f,g)}else{k=h(g,d,a);if(k===g)return c;else return b("bs_belt_internalAVLset").bal(e,f,k)}}else return c}function a(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=g(b,f,a)}return b}function c(b,c,a){var d=c.length;b=b;for(var e=0,d=d-1|0;e<=d;++e){var f=c[e];b=h(b,f,a)}return b}function i(a,c,d){__p&&__p();var e=c.left,f=c.value,g=c.right,h=a(d,f);if(h===0)return[e,g];else if(h<0)if(e!==null){h=i(a,e,d);return[h[0],b("bs_belt_internalAVLset").joinShared(h[1],f,g)]}else return[b("bs_belt_internalAVLset").empty,c];else if(g!==null){h=i(a,g,d);return[b("bs_belt_internalAVLset").joinShared(e,f,h[0]),h[1]]}else return[c,b("bs_belt_internalAVLset").empty]}function j(a,c,d,e){__p&&__p();var f=c.left,g=c.value,h=c.right,i=a(d,g);if(i===0){e[0]=!0;return[f,h]}else if(i<0)if(f!==null){i=j(a,f,d,e);return[i[0],b("bs_belt_internalAVLset").joinShared(i[1],g,h)]}else return[b("bs_belt_internalAVLset").empty,c];else if(h!==null){i=j(a,h,d,e);return[b("bs_belt_internalAVLset").joinShared(f,g,i[0]),i[1]]}else return[c,b("bs_belt_internalAVLset").empty]}function d(c,d,a){if(c!==null){var e=[!1];a=j(a,c,d,e);return[a,e[0]]}else return[[b("bs_belt_internalAVLset").empty,b("bs_belt_internalAVLset").empty],!1]}function k(c,d,a){__p&&__p();if(c!==null)if(d!==null){var e=c.height,f=d.height;if(e>=f)if(f===1)return g(c,d.value,a);else{f=c.left;var h=c.value,j=c.right,l=i(a,d,h);return b("bs_belt_internalAVLset").joinShared(k(f,l[0],a),h,k(j,l[1],a))}else if(e===1)return g(d,c.value,a);else{f=d.left;h=d.value;j=d.right;l=i(a,c,h);return b("bs_belt_internalAVLset").joinShared(k(l[0],f,a),h,k(l[1],j,a))}}else return c;else return d}function l(c,d,a){__p&&__p();if(c!==null&&d!==null){var e=c.left,f=c.value;c=c.right;var g=[!1];d=j(a,d,f,g);e=l(e,d[0],a);c=l(c,d[1],a);if(g[0])return b("bs_belt_internalAVLset").joinShared(e,f,c);else return b("bs_belt_internalAVLset").concatShared(e,c)}else return b("bs_belt_internalAVLset").empty}function m(c,d,a){__p&&__p();if(c!==null&&d!==null){var e=c.left,f=c.value,g=c.right,h=[!1];d=j(a,d,f,h);e=m(e,d[0],a);g=m(g,d[1],a);if(h[0])return b("bs_belt_internalAVLset").concatShared(e,g);else return b("bs_belt_internalAVLset").joinShared(e,f,g)}else return c}e=b("bs_belt_internalAVLset").empty;var n=b("bs_belt_internalAVLset").fromArray,o=b("bs_belt_internalAVLset").fromSortedArrayUnsafe,p=b("bs_belt_internalAVLset").isEmpty,q=b("bs_belt_internalAVLset").has,r=b("bs_belt_internalAVLset").subset,s=b("bs_belt_internalAVLset").cmp,t=b("bs_belt_internalAVLset").eq,u=b("bs_belt_internalAVLset").forEachU,v=b("bs_belt_internalAVLset").forEach,w=b("bs_belt_internalAVLset").reduceU,x=b("bs_belt_internalAVLset").reduce,y=b("bs_belt_internalAVLset").everyU,z=b("bs_belt_internalAVLset").every,A=b("bs_belt_internalAVLset").someU,B=b("bs_belt_internalAVLset").some,C=b("bs_belt_internalAVLset").keepSharedU,D=b("bs_belt_internalAVLset").keepShared,E=b("bs_belt_internalAVLset").partitionSharedU,F=b("bs_belt_internalAVLset").partitionShared,G=b("bs_belt_internalAVLset").size,H=b("bs_belt_internalAVLset").toList,I=b("bs_belt_internalAVLset").toArray,J=b("bs_belt_internalAVLset").minimum,K=b("bs_belt_internalAVLset").minUndefined,L=b("bs_belt_internalAVLset").maximum,M=b("bs_belt_internalAVLset").maxUndefined,N=b("bs_belt_internalAVLset").get,O=b("bs_belt_internalAVLset").getUndefined,P=b("bs_belt_internalAVLset").getExn,Q=b("bs_belt_internalAVLset").checkInvariantInternal;f.empty=e;f.fromArray=n;f.fromSortedArrayUnsafe=o;f.isEmpty=p;f.has=q;f.add=g;f.mergeMany=a;f.remove=h;f.removeMany=c;f.union=k;f.intersect=l;f.diff=m;f.subset=r;f.cmp=s;f.eq=t;f.forEachU=u;f.forEach=v;f.reduceU=w;f.reduce=x;f.everyU=y;f.every=z;f.someU=A;f.some=B;f.keepU=C;f.keep=D;f.partitionU=E;f.partition=F;f.size=G;f.toList=H;f.toArray=I;f.minimum=J;f.minUndefined=K;f.maximum=L;f.maxUndefined=M;f.get=N;f.getUndefined=O;f.getExn=P;f.split=d;f.checkInvariantInternal=Q}),null);
__d("bs_belt_Set",["bs_curry","bs_belt_SetDict"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){c=c[0];return{cmp:c,data:b("bs_belt_SetDict").fromArray(a,c)}}function c(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").remove(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function d(c,d){var a=c.cmp,e=c.data;d=b("bs_belt_SetDict").add(e,d,a);if(d===e)return c;else return{cmp:a,data:d}}function e(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").mergeMany(c.data,d,a)}}function g(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").removeMany(c.data,d,a)}}function h(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").union(c.data,d.data,a)}}function i(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").intersect(c.data,d.data,a)}}function j(c,d){var a=c.cmp;return{cmp:a,data:b("bs_belt_SetDict").diff(c.data,d.data,a)}}function k(c,d){var a=c.cmp;return b("bs_belt_SetDict").subset(c.data,d.data,a)}function l(c,d){var a=c.cmp;c=b("bs_belt_SetDict").split(c.data,d,a);d=c[0];return[[{cmp:a,data:d[0]},{cmp:a,data:d[1]}],c[1]]}function m(a){return{cmp:a[0],data:b("bs_belt_SetDict").empty}}function n(a){return b("bs_belt_SetDict").isEmpty(a.data)}function o(a,c){var d=a.cmp;return b("bs_belt_SetDict").cmp(a.data,c.data,d)}function p(a,c){return b("bs_belt_SetDict").eq(a.data,c.data,a.cmp)}function q(a,c){return b("bs_belt_SetDict").forEachU(a.data,c)}function r(a,c){return b("bs_belt_SetDict").forEachU(a.data,b("bs_curry").__1(c))}function s(a,c,d){return b("bs_belt_SetDict").reduceU(a.data,c,d)}function t(a,c,d){return s(a,c,b("bs_curry").__2(d))}function u(a,c){return b("bs_belt_SetDict").everyU(a.data,c)}function v(a,c){return b("bs_belt_SetDict").everyU(a.data,b("bs_curry").__1(c))}function w(a,c){return b("bs_belt_SetDict").someU(a.data,c)}function x(a,c){return b("bs_belt_SetDict").someU(a.data,b("bs_curry").__1(c))}function y(a,c){return{cmp:a.cmp,data:b("bs_belt_SetDict").keepU(a.data,c)}}function z(a,c){return y(a,b("bs_curry").__1(c))}function A(a,c){c=b("bs_belt_SetDict").partitionU(a.data,c);a=a.cmp;return[{cmp:a,data:c[0]},{cmp:a,data:c[1]}]}function B(a,c){return A(a,b("bs_curry").__1(c))}function C(a){return b("bs_belt_SetDict").size(a.data)}function D(a){return b("bs_belt_SetDict").toList(a.data)}function E(a){return b("bs_belt_SetDict").toArray(a.data)}function F(a){return b("bs_belt_SetDict").minimum(a.data)}function G(a){return b("bs_belt_SetDict").minUndefined(a.data)}function H(a){return b("bs_belt_SetDict").maximum(a.data)}function I(a){return b("bs_belt_SetDict").maxUndefined(a.data)}function J(a,c){return b("bs_belt_SetDict").get(a.data,c,a.cmp)}function K(a,c){return b("bs_belt_SetDict").getUndefined(a.data,c,a.cmp)}function L(a,c){return b("bs_belt_SetDict").getExn(a.data,c,a.cmp)}function M(a,c){return b("bs_belt_SetDict").has(a.data,c,a.cmp)}function N(a,c){return{cmp:c[0],data:b("bs_belt_SetDict").fromSortedArrayUnsafe(a)}}function O(a){return a.data}function P(a){a=a.cmp;return[a]}function Q(a,b){return{cmp:a[0],data:b}}function R(a){return b("bs_belt_SetDict").checkInvariantInternal(a.data)}var S=0,T=0,U=0;f.Int=S;f.$$String=T;f.Dict=U;f.make=m;f.fromArray=a;f.fromSortedArrayUnsafe=N;f.isEmpty=n;f.has=M;f.add=d;f.mergeMany=e;f.remove=c;f.removeMany=g;f.union=h;f.intersect=i;f.diff=j;f.subset=k;f.cmp=o;f.eq=p;f.forEachU=q;f.forEach=r;f.reduceU=s;f.reduce=t;f.everyU=u;f.every=v;f.someU=w;f.some=x;f.keepU=y;f.keep=z;f.partitionU=A;f.partition=B;f.size=C;f.toArray=E;f.toList=D;f.minimum=F;f.minUndefined=G;f.maximum=H;f.maxUndefined=I;f.get=J;f.getUndefined=K;f.getExn=L;f.split=l;f.checkInvariantInternal=R;f.getData=O;f.getId=P;f.packIdData=Q}),null);
__d("bs_belt_internalAVLtree",["bs_curry","bs_js_primitive","bs_belt_SortArray"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==null)return a.height;else return 0}function h(a){if(a!==null){var b=a.left,c=a.right;return{key:a.key,value:a.value,height:a.height,left:h(b),right:h(c)}}else return a}function i(a,b,c,d){var e=g(a),f=g(d);return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function j(a,b){return{key:a,value:b,height:1,left:null,right:null}}function k(a,b){if(b!==null)if(a!==null)return a.height>=b.height;else return!1;else return!0}function a(a,b){if(a.value===b)return a;else return{key:a.key,value:b,height:a.height,left:a.left,right:a.right}}function l(a,b,c,d){__p&&__p();var e=a!==null?a.height:0,f=d!==null?d.height:0;if(e>(f+2|0)){var h=a.left,j=a.key,k=a.value,l=a.right;if(g(h)>=g(l))return i(h,j,k,i(l,b,c,d));else{var m=l.left,n=l.key,o=l.value;l=l.right;return i(i(h,j,k,m),n,o,i(l,b,c,d))}}else if(f>(e+2|0)){h=d.left;j=d.key;k=d.value;m=d.right;if(g(m)>=g(h))return i(i(a,b,c,h),j,k,m);else{n=h.left;o=h.key;l=h.value;h=h.right;return i(i(a,b,c,n),o,l,i(h,j,k,m))}}else return{key:b,value:c,height:e>=f?e+1|0:f+1|0,left:a,right:d}}function m(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return b.key}}function c(a){if(a!==null)return b("bs_js_primitive").some(m(a))}function d(a){if(a!==null)return m(a)}function n(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return b.key}}function e(a){if(a!==null)return b("bs_js_primitive").some(n(a))}function o(a){if(a!==null)return n(a)}function p(a){while(!0){var b=a,c=b.left;if(c!==null){a=c;continue}else return[b.key,b.value]}}function q(a){if(a!==null)return p(a)}function r(a){if(a!==null)return p(a)}function s(a){while(!0){var b=a,c=b.right;if(c!==null){a=c;continue}else return[b.key,b.value]}}function t(a){if(a!==null)return s(a)}function aa(a){if(a!==null)return s(a)}function u(a,b,c){var d=a.left,e=a.right,f=a.key;a=a.value;if(d!==null)return l(u(d,b,c),f,a,e);else{b[0]=f;c[0]=a;return e}}function ba(a){return a===null}function v(a,b){while(!0){var c=b,d=a;if(d!==null){b=[d,c];a=d.left;continue}else return c}}function w(a,b){__p&&__p();if(a!==null){var c=w(a.left,b);if(c!==undefined)return c;else{c=a.key;var d=a.value,e=b(c,d);if(e)return[c,d];else{e=w(a.right,b);if(e!==undefined)return e;else return undefined}}}}function ca(a,c){return w(a,b("bs_curry").__2(c))}function x(a,b){__p&&__p();while(!0){var c=a;if(c!==null){x(c.left,b);b(c.key,c.value);a=c.right;continue}else return 0}}function da(a,c){return x(a,b("bs_curry").__2(c))}function y(a,b){if(a!==null){var c=y(a.left,b),d=b(a.value);b=y(a.right,b);return{key:a.key,value:d,height:a.height,left:c,right:b}}else return null}function ea(a,c){return y(a,b("bs_curry").__1(c))}function z(a,b){if(a!==null){var c=a.key,d=z(a.left,b),e=b(c,a.value);b=z(a.right,b);return{key:c,value:e,height:a.height,left:d,right:b}}else return null}function fa(a,c){return z(a,b("bs_curry").__2(c))}function A(a,b,c){__p&&__p();while(!0){var d=b,e=a;if(e!==null){var f=e.left,g=e.key,h=e.value;e=e.right;b=c(A(f,d,c),g,h);a=e;continue}else return d}}function ga(a,c,d){return A(a,c,b("bs_curry").__3(d))}function B(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.key,c.value)&&B(c.left,b)){a=c.right;continue}else return!1;else return!0}}function ha(a,c){return B(a,b("bs_curry").__2(c))}function C(a,b){__p&&__p();while(!0){var c=a;if(c!==null)if(b(c.key,c.value)||C(c.left,b))return!0;else{a=c.right;continue}else return!1}}function ia(a,c){return C(a,b("bs_curry").__2(c))}function D(a,b,c){if(a!==null)return l(D(a.left,b,c),a.key,a.value,a.right);else return j(b,c)}function E(a,b,c){if(a!==null)return l(a.left,a.key,a.value,E(a.right,b,c));else return j(b,c)}function F(a,b,c,d){__p&&__p();if(a!==null)if(d!==null){var e=a.left,f=a.key,g=a.value,h=a.right,j=a.height,k=d.left,m=d.key,n=d.value,o=d.right,p=d.height;if(j>(p+2|0))return l(e,f,g,F(h,b,c,d));else if(p>(j+2|0))return l(F(a,b,c,k),m,n,o);else return i(a,b,c,d)}else return E(a,b,c);else return D(d,b,c)}function G(a,b){if(a!==null)if(b!==null){var c=[b.key],d=[b.value],e=u(b,c,d);return F(a,c[0],d[0],e)}else return a;else return b}function ja(a,c,d,e){if(d!==undefined)return F(a,c,b("bs_js_primitive").valFromOption(d),e);else return G(a,e)}function H(a,b){if(a!==null){var c=a.key,d=a.value,e=H(a.left,b),f=b(c,d);a=H(a.right,b);if(f)return F(e,c,d,a);else return G(e,a)}else return null}function ka(a,c){return H(a,b("bs_curry").__2(c))}function I(a,c){if(a!==null){var d=a.key,e=a.value,f=I(a.left,c);e=c(d,e);a=I(a.right,c);if(e!==undefined)return F(f,d,b("bs_js_primitive").valFromOption(e),a);else return G(f,a)}else return null}function la(a,c){return I(a,b("bs_curry").__2(c))}function J(a,b){__p&&__p();if(a!==null){var c=a.key,d=a.value,e=J(a.left,b),f=e[1];e=e[0];var g=b(c,d);a=J(a.right,b);b=a[1];a=a[0];if(g)return[F(e,c,d,a),G(f,b)];else return[G(e,a),F(f,c,d,b)]}else return[null,null]}function ma(a,c){return J(a,b("bs_curry").__2(c))}function K(a){var b=a.left;a=a.right;b=b!==null?K(b):0;a=a!==null?K(a):0;return(1+b|0)+a|0}function L(a){if(a!==null)return K(a);else return 0}function M(a,b){__p&&__p();while(!0){var c=b,d=a;if(d!==null){var e=d.left,f=d.right,g=d.key;d=d.value;b=[[g,d],M(f,c)];a=e;continue}else return c}}function na(a){return M(a,0)}function N(a){__p&&__p();while(!0){var b=a;if(b!==null){var c=b.left;b=b.right;var d=g(c)-g(b)|0;if(!(d<=2&&d>=-2))throw new Error('File "belt_internalAVLtree.ml", line 385, characters 6-12');N(c);a=b;continue}else return 0}}function O(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.key;e=e.right;f=f!==null?O(f,d,c):d;c[f]=g;d=f+1|0;if(e!==null){b=d;a=e;continue}else return d}}function P(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.right;f=f!==null?P(f,d,c):d;c[f]=e.value;d=f+1|0;if(g!==null){b=d;a=g;continue}else return d}}function Q(a,b,c){__p&&__p();while(!0){var d=b,e=a,f=e.left,g=e.key,h=e.right;f=f!==null?Q(f,d,c):d;c[f]=[g,e.value];d=f+1|0;if(h!==null){b=d;a=h;continue}else return d}}function oa(b){if(b!==null){var a=K(b);a=new Array(a);Q(b,0,a);return a}else return[]}function pa(b){if(b!==null){var a=K(b);a=new Array(a);O(b,0,a);return a}else return[]}function qa(b){if(b!==null){var a=K(b);a=new Array(a);P(b,0,a);return a}else return[]}function R(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=R(a,b,d),f=a[b-d|0];d=R(a,(b-d|0)-1|0,(c-d|0)-1|0);return i(e,f[0],f[1],d)}else switch(c){case 0:return null;case 1:e=a[b];return j(e[0],e[1]);case 2:f=a[b];d=a[b-1|0];c=d;e=f;return{key:c[0],value:c[1],height:2,left:j(e[0],e[1]),right:null};case 3:d=a[b];f=a[b-1|0];c=a[b-2|0];e=c;a=f;b=d;return{key:a[0],value:a[1],height:2,left:j(b[0],b[1]),right:j(e[0],e[1])}}}function S(a,b,c){__p&&__p();if(c>3||c<0){var d=c/2|0,e=S(a,b,d),f=a[b+d|0];d=S(a,(b+d|0)+1|0,(c-d|0)-1|0);return i(e,f[0],f[1],d)}else switch(c){case 0:return null;case 1:e=a[b];return j(e[0],e[1]);case 2:f=a[b];d=a[b+1|0];c=d;e=f;return{key:c[0],value:c[1],height:2,left:j(e[0],e[1]),right:null};case 3:d=a[b];f=a[b+1|0];c=a[b+2|0];e=c;a=f;b=d;return{key:a[0],value:a[1],height:2,left:j(b[0],b[1]),right:j(e[0],e[1])}}}function ra(a){return S(a,0,a.length)}function T(a,b,c,d){__p&&__p();var e=L(a),f=L(b);if(e===f){a=v(a,0);b=v(b,0);c=c;d=d;while(!0){var g=b,h=a;if(h&&g){var i=g[0],j=h[0],k=c(j.key,i.key);if(k===0){var l=d(j.value,i.value);if(l===0){b=v(i.right,g[1]);a=v(j.right,h[1]);continue}else return l}else return k}else return 0}}else if(e<f)return-1;else return 1}function sa(a,c,d,e){return T(a,c,d,b("bs_curry").__2(e))}function U(a,b,c,d){__p&&__p();var e=L(a),f=L(b);if(e===f){e=v(a,0);f=v(b,0);a=c;b=d;while(!0){c=f;d=e;if(d&&c){var g=c[0],h=d[0];if(a(h.key,g.key)===0&&b(h.value,g.value)){f=v(g.right,c[1]);e=v(h.right,d[1]);continue}else return!1}else return!0}}else return!1}function ta(a,c,d,e){return U(a,c,d,b("bs_curry").__2(e))}function ua(c,d,a){__p&&__p();while(!0){var e=c;if(e!==null){var f=e.key;f=a(d,f);if(f===0)return b("bs_js_primitive").some(e.value);else{c=f<0?e.left:e.right;continue}}else return undefined}}function va(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else return undefined}}function wa(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return d.value;else{b=e<0?d.left:d.right;continue}}else throw new Error("getExn0")}}function xa(b,c,d,a){__p&&__p();while(!0){var e=b;if(e!==null){var f=e.key;f=a(c,f);if(f===0)return e.value;else{b=f<0?e.left:e.right;continue}}else return d}}function ya(b,c,a){__p&&__p();while(!0){var d=b;if(d!==null){var e=d.key;e=a(c,e);if(e===0)return!0;else{b=e<0?d.left:d.right;continue}}else return!1}}function V(a){var b=a.left;a.left=b.right;b.right=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.left);d=a.height;b.height=(c>d?c:d)+1|0;return b}function W(a){var b=a.right;a.right=b.left;b.left=a;var c=g(a.left),d=g(a.right);a.height=(c>d?c:d)+1|0;c=g(b.right);d=a.height;b.height=(c>d?c:d)+1|0;return b}function za(a){var b=W(a.left);a.left=b;return V(a)}function Aa(a){var b=V(a.right);a.right=b;return W(a)}function X(a){var b=g(a.left),c=g(a.right);a.height=(b>c?b:c)+1|0;return a}function Y(a){__p&&__p();var b=a.left,c=a.right,d=g(b),e=g(c);if(d>(2+e|0)){var f=b.left;b=b.right;if(k(f,b))return X(V(a));else return X(za(a))}else if(e>(2+d|0)){f=c.left;b=c.right;if(k(b,f))return X(W(a));else return X(Aa(a))}else{a.height=(d>e?d:e)+1|0;return a}}function Z(b,c,d,a){__p&&__p();if(b!==null){var e=b.key;e=a(c,e);if(e===0){b.value=d;return b}else{var f=b.left,g=b.right;if(e<0){e=Z(f,c,d,a);b.left=e}else b.right=Z(g,c,d,a);return Y(b)}}else return j(c,d)}function Ba(c,a){__p&&__p();var d=c.length;if(d===0)return null;else{var e=b("bs_belt_SortArray").strictlySortedLengthU(c,function(b,c){return a(b[0],c[0])<0}),f;e>=0?f=S(c,0,e):(e=-e|0,f=R(c,e-1|0,e));for(var e=e,d=d-1|0;e<=d;++e){var g=c[e];f=Z(f,g[0],g[1],a)}return f}}function $(a,b){var c=b.right,d=b.left;if(d!==null){b.left=$(a,d);return Y(b)}else{a.key=b.key;return c}}var Ca=null;f.copy=h;f.create=i;f.bal=l;f.singleton=j;f.updateValue=a;f.minKey=c;f.minKeyUndefined=d;f.maxKey=e;f.maxKeyUndefined=o;f.minimum=q;f.minUndefined=r;f.maximum=t;f.maxUndefined=aa;f.removeMinAuxWithRef=u;f.empty=Ca;f.isEmpty=ba;f.stackAllLeft=v;f.findFirstByU=w;f.findFirstBy=ca;f.forEachU=x;f.forEach=da;f.mapU=y;f.map=ea;f.mapWithKeyU=z;f.mapWithKey=fa;f.reduceU=A;f.reduce=ga;f.everyU=B;f.every=ha;f.someU=C;f.some=ia;f.join=F;f.concat=G;f.concatOrJoin=ja;f.keepSharedU=H;f.keepShared=ka;f.keepMapU=I;f.keepMap=la;f.partitionSharedU=J;f.partitionShared=ma;f.lengthNode=K;f.size=L;f.toList=na;f.checkInvariantInternal=N;f.fillArray=Q;f.toArray=oa;f.keysToArray=pa;f.valuesToArray=qa;f.fromSortedArrayAux=S;f.fromSortedArrayRevAux=R;f.fromSortedArrayUnsafe=ra;f.cmpU=T;f.cmp=sa;f.eqU=U;f.eq=ta;f.get=ua;f.getUndefined=va;f.getWithDefault=xa;f.getExn=wa;f.has=ya;f.fromArray=Ba;f.updateMutate=Z;f.balMutate=Y;f.removeMinAuxWithRootMutate=$}),null);
__d("bs_js_dict",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){delete a[b];return 0};function a(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e){var f=b[e];d[e]=[f,a[f]]}return d}function b(a){var b=Object.keys(a),c=b.length,d=new Array(c);for(var e=0,c=c-1|0;e<=c;++e)d[e]=a[b[e]];return d}function c(a){__p&&__p();var b={};a=a;while(!0){var c=a;if(c){var d=c[0];b[d[0]]=d[1];a=c[1];continue}else return b}}function d(a){var b={},c=a.length;for(var d=0,c=c-1|0;d<=c;++d){var e=a[d];b[e[0]]=e[1]}return b}function e(a,b){var c={},d=Object.keys(b),e=d.length;for(var f=0,e=e-1|0;f<=e;++f){var g=d[f];c[g]=a(b[g])}return c}f.unsafeDeleteKey=g;f.entries=a;f.values=b;f.fromList=c;f.fromArray=d;f.map=e}),null);