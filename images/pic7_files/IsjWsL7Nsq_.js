if (self.CavalryLogger) { CavalryLogger.start_js(["0RQ+o"]); }

__d("AdsBlueTip.react",["cx","CSS","LayerFadeOnShow","React","XUIAmbientNUX.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=1e3;d=b("LayerFadeOnShow").forDuration(c);var h={BlueTipFadeOnShow:d};f=b("React").createClass({displayName:"AdsBlueTip",propTypes:{behaviors:a.object,context:a.object.isRequired,highlightContext:a.bool,insertParent:a.object,shown:a.bool,useDarkMode:a.bool,onClose:a.func,onImpression:a.func},getDefaultProps:function(){return{shown:!0}},onClose:function(){this.props.onClose&&this.props.onClose()},UNSAFE_componentWillMount:function(){var a=this.props.context.getAttribute("tabIndex");this._contextHasTabIndex=!!a||a===0},UNSAFE_componentWillReceiveProps:function(a){var c=this.props,d=c.context,e=c.highlightContext;c=c.shown;a.context!==d&&e&&c&&b("CSS").removeClass(d,"_z8p")},componentDidMount:function(){this._removeTabIndex(),this.props.onImpression&&this.props.onImpression()},componentDidUpdate:function(){setTimeout(this._removeTabIndex,0)},componentWillUnmount:function(){b("CSS").removeClass(this.props.context,"_z8p")},_removeTabIndex:function(){this.isMounted()&&!this._contextHasTabIndex&&this.props.context.removeAttribute("tabIndex")},renderLayers:function(){var a=this.props.behaviors?this.props.behaviors:h;return b("React").createElement(b("XUIAmbientNUX.react"),babelHelpers["extends"]({},this.props,{behaviors:a,onCloseButtonClick:this.onClose,key:"blueTip"}),this.props.children)},render:function(){this.props.highlightContext&&this.props.shown?b("CSS").addClass(this.props.context,"_z8p"):b("CSS").removeClass(this.props.context,"_z8p");return b("React").createElement("span",null,this.renderLayers())}});e.exports=f}),null);
__d("AdsBlueTour.react",["cx","fbt","LeftRight.react","React","XUIButton.react","emptyFunction"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=b("React").PropTypes;var j=-1;d=babelHelpers.inherits(a,b("React").PureComponent);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=function(){return this.props.step===0}.bind(this),this.$2=function(){return this.props.step===j}.bind(this),this.$3=function(){return this.props.step===this.props.steps.length-1}.bind(this),this.$4=function(){this.props.onStart(),this.props.onStep(0)}.bind(this),this.$5=function(){var a=[];if(!this.$2())for(var c=0;c<this.props.steps.length;++c)a.push(b("React").createElement("span",{className:"_4a-k"+(c===this.props.step?" _4a-l":""),key:"bullet"+c},"\u25cf"));return a}.bind(this),this.$6=function(){__p&&__p();var a=[];if(this.$2())a.push(b("React").createElement(b("XUIButton.react"),{className:"_4a-j",key:"take-tour",label:h._("Visite guid\u00e9e"),size:"large",onClick:this.$4}));else{var c=!1,d=function(){return this.props.onStep(this.props.step-1)}.bind(this);this.$1()&&(c=!0,d=null);c||a.push(b("React").createElement(b("XUIButton.react"),{className:"_4a-j",key:"back",label:h._("Retour"),size:"large",onClick:d}));c=function(){return this.props.onStep(this.props.step+1)}.bind(this);d=h._("Suivant");this.$3()&&(d=h._("Termin\u00e9"),c=this.props.onComplete);a.push(b("React").createElement(b("XUIButton.react"),{className:"_4a-j",key:"next",label:d,size:"large",onClick:c}))}return a}.bind(this),c}a.prototype.render=function(){return b("React").createElement("div",{className:"_135w"},b("React").createElement("div",{className:"_4a-p"},this.props.children),b("React").createElement(b("LeftRight.react"),{className:"_4a-m"},b("React").createElement("div",null,this.$6()),b("React").createElement("div",{className:"_4a-n"},this.$5())))};a.propTypes={onComplete:c.func,onStep:c.func.isRequired,onStart:c.func,step:c.number.isRequired,steps:c.arrayOf(c.object).isRequired};a.INTRO_STEP=j;a.defaultProps={onCompletet:b("emptyFunction"),onStart:b("emptyFunction")};e.exports=a}),null);
__d("AdsBlueTipTour.react",["AdsBlueTip.react","AdsBlueTour.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").PureComponent);g=d&&d.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.state={step:this.props.introStep?b("AdsBlueTour.react").INTRO_STEP:0,shown:!0},this.$4=function(){this.$3(),this.props.onXOut()}.bind(this),this.$5=function(){this.$3(),this.props.onComplete()}.bind(this),this.$6=function(a){this.setState({step:a}),this.props.onStep&&this.props.onStep(a)}.bind(this),c}a.prototype.$1=function(){return this.$2()?this.props.introStep:this.props.steps[this.state.step]};a.prototype.$3=function(){this.setState({shown:!1})};a.prototype.$2=function(){return this.state.step===b("AdsBlueTour.react").INTRO_STEP};a.prototype.render=function(){var a=this.$1();return b("React").createElement(b("AdsBlueTip.react"),babelHelpers["extends"]({behaviors:this.props.behaviors},a,{highlightContext:this.props.highlightContext,shown:this.state.shown,onClose:this.$4}),b("React").createElement(b("AdsBlueTour.react"),babelHelpers["extends"]({},this.props,{step:this.state.step,onComplete:this.$5,onStep:this.$6}),a.content))};a.propTypes={behaviors:c.object,highlightContext:c.bool,introStep:c.object,steps:c.arrayOf(c.object).isRequired,onComplete:c.func.isRequired,onStart:c.func,onStep:c.func,onXOut:c.func.isRequired};e.exports=a}),null);
__d("ShowCreationFlowTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ShowCreationFlowLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ShowCreationFlowLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ShowCreationFlowLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setConnectedPageID=function(a){this.$1.connected_page_id=a;return this};a.prototype.setError=function(a){this.$1.error=a;return this};a.prototype.setFlowSource=function(a){this.$1.flow_source=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setStep=function(a){this.$1.step=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={connected_page_id:!0,error:!0,flow_source:!0,page_id:!0,step:!0,vc:!0};e.exports=a}),null);
__d("DebugOverlayBitrate",["BinarySearch"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={computeBitrate:function(a,b,c){__p&&__p();var d=[],e=0;b=b;a=a;d[0]=d[1]="N/A";if(!b)return{bitrate:d,currentPlayingSegment:e};for(var f=0;f<=1;f++){if(!b[f])continue;c>b[f].length&&(c=0);e=this._getCurrentSegment(f,a,b,c);var g=this._getSegmentSize(f,e,b),h=this._getSegmentLength(f,e,b);d[f]=g&&h?this._getBitrateString(h?g*8/h:0):"N/A"}return{bitrate:d,currentPlayingSegment:e}},_getBitrateString:function(a){var b=1024;return(a/b).toFixed(1)+"Kbps"},_isPlayheadInsideSegment:function(a,b,c){return a>=b&&a<=c},_getCurrentSegment:function(a,c,d,e){__p&&__p();e=e;if(!(d[a]&&d[a][e]))return-1;var f=d[a][e].startTime,g=d[a][e].endTime;this._isPlayheadInsideSegment(c,f,g)||(e<d[a].length-1?(f=d[a][e+1].startTime,g=d[a][e+1].endTime,this._isPlayheadInsideSegment(c,f,g)?++e:e=-1):e=-1);if(e===-1){f=b("BinarySearch").findBoundInArray(d[a].map(function(a){return a.startTime}),c,function(a,b){return a-b},b("BinarySearch").LEAST_STRICT_UPPER_BOUND);e=--f}return e},_getSegmentSize:function(a,b,c){if(c[a]&&c[a][b]&&c[a][b].url){c=c[a][b].url;a=c.startByte;b=c.endByte;return a===null||b===null||!b?0:b-a}return 0},_getSegmentLength:function(a,b,c){if(c[a]&&c[a][b]){c=c[a][b];a=c.startTime;b=c.endTime;return a===null||b===null||!b?0:b-a}return 0}};e.exports=a}),null);
__d("VDOPropertyUpdater",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();function a(a,b,c){"use strict";this.parent=b,this.property=a,this.initValue=c}a.prototype.safeValue=function(a){"use strict";return a===undefined?this.initValue:a};a.prototype.get=function(a){"use strict";return this.parent.getProp(a||this.property)};a.prototype.replace=function(a){"use strict";this.parent.replace(this.property,this.safeValue(a))};a.prototype.update=function(a,b){"use strict";this.parent.update(this.property,a,this.safeValue(b))};return a}()}),null);
__d("VDOIdentityHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOPropertyUpdater"));c=a&&a.prototype;function d(a,b,d){"use strict";c.constructor.call(this,a,b),this.recordEvent=function(a,b){this.history[a]=this.safeValue(b)}.bind(this),this.recordProperty=this.recordEvent,this.history=[],this.initValue=d}d.prototype.previous=function(a,b){"use strict";this.replace(this.history[b])};d.prototype.next=function(a){"use strict";this.replace(this.history[a])};d.prototype.last=function(){"use strict";return this.safeValue(this.history[this.history.length-1])};return d}()}),null);
__d("VDOSegmentArraysHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOPropertyUpdater"));c=a&&a.prototype;function d(a,b){"use strict";c.constructor.call(this,a,b),this.indexDiffs=[]}d.prototype.recordEvent=function(a,b){"use strict";this.indexDiffs[a]=this.computeSegmentDiffToLog(b)};d.prototype.computeSegmentDiffToLog=function(a){"use strict";__p&&__p();var b=a;this.segmentIndexEndTimes&&(b=a.map(function(a,b){__p&&__p();b=this.segmentIndexEndTimes[b];if(b==null)return a;var c=a.length;while(--c>=0)if(a[c].endTime<=b){c++;break}return a.slice(c)}.bind(this)));this.segmentIndexEndTimes=this.extractEndTimes(a);return b};d.prototype.extractEndTimes=function(a){"use strict";a=a.map(function(a){return a[a.length-1]});return a.filter(function(a){return a}).map(function(a){a=a.endTime;return a})};d.prototype.previous=function(a,b){"use strict";__p&&__p();b=this.indexDiffs[a];if(b){a=this.get();for(var c=0;c<b.length;c++){var d=b[c].length;if(!d)continue;var e=a[c];b[c]=e.splice(e.length-d,d)}this.updateLivehead(a)}};d.prototype.next=function(a){"use strict";__p&&__p();a=this.indexDiffs[a];if(a){var b=this.get();for(var c=0;c<a.length;c++){var d=b[c];d.push.apply(d,a[c])}this.updateLivehead(b)}};d.prototype.updateLivehead=function(a){"use strict";a=this.extractEndTimes(a);a.length&&this.parent.replace("liveheadPosition",Math.min.apply(Math,a))};return d}()}),null);
__d("VDOSegmentStatesHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOPropertyUpdater"));c=a&&a.prototype;function d(a,b){"use strict";c.constructor.call(this,a,b),this.segmentStates=[],this.segmentIDs=[]}d.prototype.recordEvent=function(a,b){"use strict";var c=b[0];b=b[1];this.segmentIDs[a]=c;this.segmentStates[a]=b};d.prototype.previous=function(a,b){"use strict";a=this.segmentIDs[a];if(a){b=b<0?-1:this.segmentIDs.lastIndexOf(a,b);this.update(a,b===-1?0:this.segmentStates[b])}};d.prototype.next=function(a){"use strict";var b=this.segmentIDs[a];b&&this.update(b,this.segmentStates[a])};return d}()}),null);
__d("VDOSparseHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOPropertyUpdater"));c=a&&a.prototype;function d(a,b,d){"use strict";c.constructor.call(this,a,b,d),this.recordEvent=function(a,b){this.isUpdate(b)&&(this.history[a]=b,this.mostRecent=b)}.bind(this),this.recordProperty=this.recordEvent,this.getAllUntil=function(a){var b=[];for(var c in this.history)Number(c)<=a&&b.push(this.history[c]);return b}.bind(this),this.history={},this.initValue=d,this.mostRecent=undefined}d.prototype.isUpdate=function(a){"use strict";return this.mostRecent!==a};d.prototype.previous=function(a,b){"use strict";a=-1;for(var c in this.history){if(Number(c)>b)break;a=Number(c)}a>=0&&this.replace(this.history[a])};d.prototype.next=function(a){"use strict";a in this.history&&this.replace(this.history[a])};return d}()}),null);
__d("VDOSourceBufferHealthHistory",["VDOSparseHistory"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function a(b){if(b==null||typeof b!=="object")return b;if(Array.isArray(b))return b.map(a);var c={};for(var d in b)c[d]=a(b[d]);return c};e.exports=(c=a=function(){__p&&__p();var a,c;a=babelHelpers.inherits(d,b("VDOSparseHistory"));c=a&&a.prototype;function d(a,b,d){"use strict";__p&&__p();c.constructor.call(this,a,b,d),this.recordEvent=function(a,b){b=b();var c=this.isUpdate(b);window.updates=!!c+(window.updates||0);if(c){var d=g(b);this.history[a]=function(){return d};this.mostRecent=d}}.bind(this),this.recordProperty=this.recordEvent}d.prototype.isUpdate=function(a){"use strict";__p&&__p();var b=this.mostRecent;if(a&&!b)return!0;if(a.length!==this.mostRecent.length)return!0;for(var c=0;c<a.length;c++){var d=a[c],e=b[c];if(!!d!==!!e)return!0;var f=d.length;if(f!==e.length)return!0;if(!f)continue;d=d[f-1].endTime;e=e[f-1].endTime;if(d!==e)return!0}return!1};return d}(),a.deepClone=g,c)}),null);
__d("VideoDebugHistory",["VDOIdentityHistory","VDOSegmentArraysHistory","VDOSegmentStatesHistory","VDOSourceBufferHealthHistory","VDOSparseHistory"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a){if(typeof a==="function"){a=a();return function(){return a}}if(a==null||typeof a!=="object")return a;return Array.isArray(a)?a.slice():Object.assign({},a)};e.exports=function(){__p&&__p();function a(a){"use strict";this.frozenProps={},this.$1=a,this.history=[],this.offset=Infinity,this.reconstructors={lastError:new(b("VDOIdentityHistory"))("lastError",this),stallTime:new(b("VDOSparseHistory"))("stallTime",this,0),playerState:new(b("VDOIdentityHistory"))("playerState",this,"loading"),playbackPosition:new(b("VDOIdentityHistory"))("playbackPosition",this,0),lastMpdFetchDuration:new(b("VDOSparseHistory"))("lastMpdFetchDuration",this),mpdUpdatePollCount:new(b("VDOSparseHistory"))("mpdUpdatePollCount",this),segmentStates:new(b("VDOSegmentStatesHistory"))("segmentStates",this),segmentArrays:new(b("VDOSegmentArraysHistory"))("segmentArrays",this),getSourceBufferHealth:new(b("VDOSourceBufferHealthHistory"))("getSourceBufferHealth",this),lastLogEvent:new(b("VDOSparseHistory"))("lastLogEvent",this)}}a.prototype.freezeProps=function(){"use strict";this.offset=this.history.length;var a=this.$1();for(var b in a)a[b]=g(a[b]);this.frozenProps=a;return this.offset};a.prototype.record=function(event,a,b){"use strict";var c=this.history.length;this.history.push(b);for(var d in this.reconstructors){b=this.reconstructors[d];var e=event[d],f=a[d];e!==undefined&&"recordEvent"in b?b.recordEvent(c,e,a):f!==undefined&&"recordProperty"in b&&b.recordProperty(c,f,a)}};a.prototype.getProps=function(){"use strict";return Object.assign(this.frozenProps,{atHistoryEntry:this.offset,historyLength:this.history.length})};a.prototype.prev=function(){"use strict";__p&&__p();var a=Math.min(this.offset,this.history.length),b=a-1;if(b<0)return-Infinity;for(var c in this.reconstructors){var d=this.reconstructors[c];d.previous(a,b)}this.frozenProps.historyEventType=this.history[b];return this.offset=b};a.prototype.next=function(){"use strict";__p&&__p();var a=Math.min(this.offset,this.history.length);a=a+1;if(a>this.history.length)return Infinity;for(var b in this.reconstructors){var c=this.reconstructors[b];c.next(a)}this.frozenProps.historyEventType=this.history[a];return this.offset=a};a.prototype["goto"]=function(a){"use strict";var b=this.reconstructors.playbackPosition.last(),c=a>b,d=0;while(this.frozenProps.playbackPosition>a&&isFinite(d))d=this.prev();while(this.frozenProps.playbackPosition<a&&isFinite(d))d=this.next();this.frozenProps.playbackPosition=Math.max(0,Math.min(a,b));return c?Infinity:d};a.prototype.getProp=function(a){"use strict";return this.frozenProps[a]};a.prototype.replace=function(a,b){"use strict";this.frozenProps[a]=b};a.prototype.update=function(a,b,c){"use strict";this.frozenProps[a][b]=c};return a}()}),null);
__d("VideoDebugDashManifestView.react",["cx","Promise","regeneratorRuntime","React","TooltipLink.react","URI","UserAgent","XHRRequest"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i={streamInterruptAt:"rgba(227,26,28,0.7)",commercialBreakAt:"rgba(127,188,65,0.7)",endedAt:"rgba(0,0,0,0.7)",timelineGapAt:"rgba(255,50,50,0.7)",timelineOverlapAt:"rgba(255,255,255,0.7)"},j=10,k=10,l=2/15,m=1+2*l,n=.25;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){__p&&__p();h.constructor.call(this,a),this.eventInView=function(event){return event.time<this.tMax&&event.time>=this.tMin}.bind(this),this.rangeInView=function(a){return a.startTime<this.tMax&&a.endTime>=this.tMin-n}.bind(this),this.renderTimeline=function(a,c){var d=["v","a"][c];a=a.map(this.renderSegment.bind(this,d));d=m*c;return b("React").createElement("g",{key:"track-"+c,transform:"translate(0,"+d+")"},a)}.bind(this),this.renderBufferHealth=function(a,c){var d=c*m-l;return b("React").createElement("g",{key:"buffer"+c,transform:"translate(0,"+d+")"},a.filter(this.rangeInView).map(this.renderBufferRange))}.bind(this),this.renderMomentEvent=function(a,c){var d=a.type;a=a.time;c={key:c+"-"+d+"-"+a,stroke:i[d]};return b("React").createElement("line",babelHelpers["extends"]({x1:a,x2:a,y1:this.yMin,y2:this.yMax},c))}.bind(this),this.getVisibleSegments=function(a){return a.filter(this.rangeInView)}.bind(this),this.$1=0}a.prototype.$2=function(a){a=new(b("URI"))(a.url);a=this.props.segmentInitSourceMap.get(a.getPath());if(!a)return"";a=a.getFailoverUri();a=this.$3(a);return a};a.prototype.$3=function(a){var c=new(b("URI"))(a),d=a.getStartByte();a=a.getEndByte();(d||a)&&(c.addQueryData("bytestart",d),c.addQueryData("byteend",a));return c.toString()};a.prototype.$4=function(a){return new(b("Promise"))(function(c,d){new(b("XHRRequest"))(a).setMethod("GET").setResponseType("blob").setResponseHandler(function(a,b,d){d&&c(a)}).setErrorHandler(d).send()})};a.prototype.$5=function(a){a=new(b("URI"))(a.url).getPath();a=a.substring(a.lastIndexOf("/")+1);return a};a.prototype.$6=function(a){var b={a:"audio/mp4",v:"video/mp4"};return b[a[0]]};a.prototype.$7=function(a,c,event){var d,e,f,g,h,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:d=b("UserAgent").isPlatform("Mac OS X")?event.metaKey:event.ctrlKey;m.next=3;return b("regeneratorRuntime").awrap(this.$8(a,c,d));case 3:e=m.sent,f=document.createElement("a"),g=window.URL.createObjectURL(e),f.href=g,h=this.$5(a),i=h.lastIndexOf("."),j=h.substring(0,i),k=h.substring(i),f.download=j+"-"+c+k,l=this.$6(c),f.type=l,f.click(),window.URL.revokeObjectURL(g);case 16:case"end":return m.stop()}},null,this)};a.prototype.$8=function(a,c,d){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=[this.$3(a.url)];d&&c.unshift(this.$2(a));return e.abrupt("return",b("Promise").all(c.map(function(a){return this.$4(a)}.bind(this))).then(function(a){return new Blob(a)}));case 3:case"end":return e.stop()}},null,this)};a.prototype.renderSegment=function(a,c,d){var e=c.startTime,f=c.debugInfo;f=f&&f.delta>0?f.endTime:c.endTime;f=f-e;var g=this.props.getSegmentClass(this.props.segmentStates,c,a),h=""+a+d;return b("React").createElement(b("TooltipLink.react"),{key:h,tooltip:"Segment "+d+" - "+a,onClick:this.$7.bind(this,c,h)},b("React").createElement("rect",{className:g,x:e,width:f,height:"1"}))};a.prototype.renderBufferRange=function(a,c){var d=a.gap,e=a.startTime;a=a.endTime;d=d?"_4yqh _4sco":"_4yqi _4scq";return b("React").createElement("line",{key:"buffer-"+c,className:d,x1:e,x2:a})};a.prototype.renderDurationEvent=function(a,c){var d=a.type,e=a.track,f=a.startTime;a=a.endTime;e=m*e;var g=e+1,h=f-n,j=f+n,k=a+n,l=a-n;h={d:"M"+h+" "+e+"L"+j+" "+g+"H"+k+"L"+l+" "+e,key:c+"-"+d+"-"+f+"-"+a,fill:i[d],stroke:i[d]};return b("React").createElement("path",h)};a.prototype.renderSegmentStats=function(a,c,d){if(!c)return null;a||(a=[],a[0]=a[1]="N/A");return b("React").createElement(b("TooltipLink.react"),{key:"length-"+d,display:"inline",href:"#",className:"_2io3 _4scr",tooltip:"Current bitrate / Length of the largest buffered segment shown in this track"},a[d]+" / "+c.toFixed(2)+"s")};a.prototype.getLongestSegmentLength=function(a){return a.reduce(function(a,b){var c=b.startTime;b=b.endTime;return Math.max(a,b-c)},0)};a.prototype.computeViewBox=function(a,b){var c=this.props.segmentArrays.length;this.tMin=a-j;this.tMax=a+k;this.yMin=-2*l;this.yMax=c+2*l*b;return this.tMin+" "+this.yMin+" "+(j+k)+" "+this.yMax};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.segmentArrays;a=a.playbackPosition;if(!c)return null;var d=this.props.getSourceBufferHealth(),e=this.computeViewBox(a,d.length);c=c.map(this.getVisibleSegments);var f=c.map(this.getLongestSegmentLength);a=b("React").createElement("line",{x1:a,x2:a,y1:this.yMin,y2:this.yMax,stroke:"#000"});var g=this.props.timelineEvents.filter(this.eventInView),h=this.props.timelineRanges.filter(this.rangeInView);for(var i=0,m;m=c[i];i++)for(var m=m,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}p=p;p=p.debugInfo;if(p){var q=p.delta,r;void 0;var s;void 0;var t;void 0;q>0?(r="timelineGapAt",s=p.endTime,t=p.endTime+q):(r="timelineOverlapAt",s=p.endTime+q,t=p.endTime);h.push({type:r,track:i,startTime:s,endTime:t})}}return this.props.isVisible?b("React").createElement("div",{className:"_2iob _4scs"},b("React").createElement(b("TooltipLink.react"),{display:"inline",href:"#",className:"_2iof _4scu",tooltip:"The vertical line marks the current playhead position. To the left of it, a "+j+"s window of past segments. Afterwards, the next upcoming "+k+"s of known segments."},"Video:",b("React").createElement("br",null),"Audio:"),b("React").createElement("div",{className:"_2iog _4scv"},f.map(function(a,b){return this.renderSegmentStats(this.props.bitrate,a,b)}.bind(this))),b("React").createElement("svg",{className:"_2ioh _4scw",viewBox:e,strokeWidth:l},c.map(this.renderTimeline),g.map(this.renderMomentEvent),h.map(this.renderDurationEvent),a,d.map(this.renderBufferHealth))):""};e.exports=a}),null);
__d("VideoDebugItem.react",["cx","React","TooltipLink.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props.children,c=null;this.props.column==="right"&&(c="_s5q");var d=this.props.label;this.props.tooltip&&(d=b("React").createElement(b("TooltipLink.react"),this.props,d));return b("React").createElement("div",{className:c},b("React").createElement("b",null,d),": ",a)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugDashMpdLag.react",["React","TooltipLink.react","VideoDebugItem.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.UNSAFE_componentWillReceiveProps=function(a){a=a.mpdUpdatePollCount!==this.props.mpdUpdatePollCount;this.setState({mpdPoll:a})};a.prototype.shouldComponentUpdate=function(a,b){return b.mpdPoll};a.prototype.$1=function(a){return(a/1e3).toFixed(3)+"s"};a.prototype.render=function(){var a=this.props,c=a.lastMpdFetchDuration;a=a.lastMpdChangesTime;if(!c)return null;var d=this.$1(Date.now()-a);d="We saw no new segments in this number of MPD polls.\n"+(c?"Last poll with news was "+d+" ago.":"It has been "+d+" without news, since we started polling.");var e=null,f=this.props.prevMpdChangesTime;f&&(e=this.$1(a-f),e=": "+e);return b("React").createElement("div",null,b("React").createElement(b("VideoDebugItem.react"),{label:"MPD load time",column:"right",tooltip:"Load time of the most recent dash manifest"},c.toFixed(3),"s"),b("React").createElement(b("VideoDebugItem.react"),{label:"MPD polls",href:this.props.liveManifestUrl||null,tooltip:"Number of recent dash manifest polls without news,\nand the time last poll for new segments took."},b("React").createElement(b("TooltipLink.react"),{tooltip:d},this.props.mpdUpdatePollCount),e))};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugDashRepresentation.react",["React","TooltipLink.react","VideoDebugItem.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.idToolLink=function(a){return"https://our.intern.facebook.com/intern/id2/"+a+"/"};a.prototype.render=function(){__p&&__p();var a=this.props,c=a.streamId,d=a.audioStreamId;a=a.audioFormat;if(!c)return null;var e=c;c=c.replace(/vd?$/,"");/^\d+$/.test(c)&&(e=b("React").createElement(b("TooltipLink.react"),{target:"_blank",display:"inline",tooltip:"Show VideoEncoding of the playing video representation id",href:this.idToolLink(c)},e));c="";if(d){var f=d.replace(/ad?$/,"");/^\d+$/.test(f)?c=b("React").createElement(b("VideoDebugItem.react"),{label:"Audio Representation"},b("React").createElement(b("TooltipLink.react"),{target:"_blank",display:"inline",tooltip:"Show VideoEncoding of the playing audio representation id",href:this.idToolLink(f)},d)," ","(",a,")"):c=b("React").createElement(b("VideoDebugItem.react"),{label:"Audio Representation"},d)}return b("React").createElement("div",null,b("React").createElement(b("VideoDebugItem.react"),{label:"Video Representation"},e),c)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("exposeVideoDebug",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,b){__p&&__p();var c=a.getDebug,d=a.videoID,e=a.loggedError;a=a.lastError;c=c();var f=c.VideoPlayerController,g=c.VideoDebugParent,h=c.VideoDebugOverlay,i=c.VideoBufferGaps,j=c.ComboBufferGaps;c=c.AudioBufferGaps;var k=g.getProps();k=k.segmentArrays;k=k||[];var l=k[0];k=k[1];var m=f.getVideoAPI(),n=m.getDOMElement(),o=m.getDebug();o=o.VideoPlayerHTML5DashPlayer;var p={},q={};if(o){p=o.getDebug();var r=p;r=r.DashPlayer;r&&(q=r.getDebug(),q.identifiersIntact||!1)}var s={vid:"videoID",vel:"VideoElement",man:"manifest",mpd:"getManifest",abr:"AbrManager",bwe:"BandwidthEstimator",src:"VideoSource",vss:"VideoSourceStream",vsi:"VideoSegmentIndex",vbm:"VideoBufferManager",vsb:"VideoSourceBuffer",vbg:"VideoBufferGaps",cbg:"ComboBufferGaps",ass:"AudioSourceStream",asi:"AudioSegmentIndex",abm:"AudioBufferManager",asb:"AudioSourceBuffer",abg:"AudioBufferGaps",vtq:"VideoTaskQueue",vts:"VideoTaskScheduler",tss:"TextSourceStream",dsp:"DashPlayer",h5d:"VideoPlayerHTML5DashPlayer",h5a:"VideoPlayerHTML5Api",vpc:"VideoPlayerController",vdp:"VideoDebugParent",vdo:"VideoDebugOverlay",lpe:"LoggedPlayerError",err:"PlayerError"},t=babelHelpers["extends"]({videoID:d,VideoElement:n,VideoBufferGaps:i,ComboBufferGaps:j,AudioBufferGaps:c,VideoSegmentIndex:l,AudioSegmentIndex:k},p,q,{VideoPlayerHTML5DashPlayer:o,VideoPlayerHTML5Api:m,VideoPlayerController:f,VideoDebugParent:g,VideoDebugOverlay:h,LoggedPlayerError:e,PlayerError:a,ns:function(a){a===void 0&&(a=window);console.group("videoDebug [videoID "+d+"]");for(var b in s){var c=s[b],e=t[c];e!==undefined&&(a[b]=e,window.console.log(b+" = "+c))}console.groupEnd();return t}});window.videoDebug=t;!1;b&&t.ns()};e.exports=a}),null);
__d("VideoDebugExposeVideoDebug.react",["cx","React","TooltipLink.react","exposeVideoDebug"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.$1=function(event){event.preventDefault(),b("exposeVideoDebug")(this.props,!!event.shiftKey)}.bind(this),c}a.prototype.render=function(){return b("React").createElement(b("TooltipLink.react"),{display:"inline",className:"_5jy",style:{right:"15px"},onClick:this.$1,tooltip:"Expose a videoDebug object for this video to js devtools.\n(Shift-click to break out independent globals immediately.)"},"js")};e.exports=a}),null);
__d("VideoDebugFlag.react",["cx","React","TooltipLink.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a=this.props,c=a.tooltip,d=a.active;a=a.available;var e="_45za";d=this.renderDot(d,a);a=this.props.label;c&&(a=b("React").createElement(b("TooltipLink.react"),{display:"inline",href:"#",tooltip:c},a));return b("React").createElement("li",{className:e},b("React").createElement("b",null,a),": ",d)};a.prototype.renderDot=function(a,c){"use strict";a={color:a?"green":c?"red":"gray"};return b("React").createElement("span",{className:"_45zb",style:a},"\u25cf")};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugLogMessages.react",["cx","React","VideoDebugItem.react","VideoPlayerLoggerEvent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=" \ud83d\ude1e";c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.renderOption=function(a,c){var event=a.event;(event===b("VideoPlayerLoggerEvent").PAUSED||event===b("VideoPlayerLoggerEvent").FINISHED_PLAYING)&&(event=event.toUpperCase());a=a.logData;var d=a.time_ms;a=a.recent_stalls_count;var e=this.props.initializationTimestamp;d=((d-e)/1e3).toFixed(3);e=a?i:null;return b("React").createElement("option",{key:c,value:c},d,"s: ",event,e)}.bind(this),this.$2=function(event){var a=this.$3();a=a[Number(event.target.value)];console.group("log = %s event",a.event);!1;console.groupEnd()}.bind(this),c}a.prototype.shouldComponentUpdate=function(a){return this.$1!==a.lastLogEvent};a.prototype.$3=function(){var a=this.props,b=a.getLogEventsUntil;a=a.atHistoryEntry;a=a==null?Infinity:a;return b(a)};a.prototype.render=function(){var a=this.$3(),c=a.length-1;this.$1=a[c];var d;a.length&&(d=b("React").createElement("select",{value:c,className:"_4a8p",onChange:this.$2},a.map(this.renderOption)));return b("React").createElement(b("VideoDebugItem.react"),{label:"Log"},d)};e.exports=a}),null);
__d("VideoDebugScubaEventsLink.react",["CurrentUser","React","TooltipLink.react","URI","VideoDebugItem.react","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.getScubaUrl=function(a,c,d){function e(a){a=new Date(a);return b("formatDate")(a,"Y-m-d H:i:s",{skipPatternLocalization:!0})}e={cols:["time_ms","time_ms_begin","event_name","userid","video_id","time_ms_done","stall_time"],derivedCols:[],num_samples:"100",dimensions:["event_name"],startcol:"time_ms_begin",endcol:"time_ms_done",colorcol:"event_name",bordercol:"event_name",ordercol:"time_ms_begin",labelcol:"__number",unit:"Auto",aggregate:"",start:e(d-5e3),end:"now",modifiers:[],aggregateList:[],constraints:{userid:{eq:['["'+a+'"]']},video_id:{eq:['["'+c+'"]']}},c_constraints:{},b_constraints:{}};return new(b("URI"))("https://our.intern.facebook.com/intern/scuba/query/").setQueryData({dataset:"video_player_log",view:"TimelineBreakdown",drillstate:JSON.stringify(e)}).toString()};a.prototype.shouldComponentUpdate=function(a){var b=this.props.atHistoryEntry!==null;return b?a.atHistoryEntry!==this.props.atHistoryEntry||a.historyLength!==this.props.historyLength:!!a.atHistoryEntry};a.prototype.render=function(){__p&&__p();var a=this.props.videoID,c=[];if(this.props.isLiveStream){var d=b("React").createElement(b("TooltipLink.react"),{display:"inline",href:new(b("URI"))("https://our.intern.facebook.com/intern/facecast/debug/").setQueryData({video_broadcast_id:a}).toString(),tooltip:"Debug in Facecast"},"FC");c.push(b("React").createElement("span",{key:"live"}," [",d,"]"))}if(this.props.isSpherical){d=b("React").createElement(b("TooltipLink.react"),{display:"inline",target:"_blank",href:new(b("URI"))("https://our.intern.facebook.com/intern/360dive/").setQueryData({video_id:a}).toString(),tooltip:"Debug in 360dive"},"360dive");c.push(b("React").createElement("span",{key:"spherical"}," [",d,"]"))}d=b("React").createElement(b("TooltipLink.react"),{display:"inline",target:"_blank",href:new(b("URI"))("https://our.intern.facebook.com/intern/ads/video_ads/state_based_debugger/").setQueryData({query_id:b("CurrentUser").getID()+":"+a}).toString(),tooltip:"Debug in StateBasedDebug"},"SBL");c.push(b("React").createElement("span",{key:"sbl"}," [",d,"]"));d=b("React").createElement(b("TooltipLink.react"),{display:"inline",target:"_blank",href:new(b("URI"))("https://our.intern.facebook.com/intern/video_metrics/vsl/session_explorer/").setQueryData({session_key:b("CurrentUser").getID()+":"+a}).toString(),tooltip:"Debug in VSL Explorer"},"VSL");c.push(b("React").createElement("span",{key:"vsl"}," [",d,"]"));d=this.props.initializationTimestamp;d={href:this.getScubaUrl(b("CurrentUser").getID(),a,d),tooltip:"Show scuba video_player_log events timeline for this video",target:"_blank",label:"Video"};var e=null,f=this.props,g=f.atHistoryEntry;f=f.historyLength;g!=null&&(e=b("React").createElement("span",null,b("React").createElement("b",null," frozen at")," ",g,"/",f));return b("React").createElement(b("VideoDebugItem.react"),d,a,c,e)};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugOverlay.react",["cx","CurrentUser","React","TooltipLink.react","VideoDebugDashManifestView.react","VideoDebugDashMpdLag.react","VideoDebugDashRepresentation.react","VideoDebugExposeVideoDebug.react","VideoDebugFlag.react","VideoDebugItem.react","VideoDebugLogMessages.react","VideoDebugScubaEventsLink.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.$1=function(a){"use strict";return Number(a||0).toFixed(1)+"ms"};a.prototype.$2=function(a,b){b===void 0&&(b=3);return Number(a||0).toFixed(b)+"s"};a.prototype.$3=function(a,b){"use strict";return Math.floor(a)+" / "+Math.floor(b)};a.prototype.render=function(){"use strict";__p&&__p();var a=null;if(this.props.streamType==="dash")a=b("React").createElement(b("VideoDebugDashRepresentation.react"),{streamId:this.props.streamId,audioStreamId:this.props.audioStreamId,audioFormat:this.props.dashAudioFormat});else{var c=this.props,d=c.tagSD;c=c.tagHD;c?a=d+" (SD) / "+c+" (HD)":a=d+" (SD)";a=b("React").createElement(b("VideoDebugItem.react"),{label:"Encoding"},a)}c=!!this.props.segmentArrays;d="The current time of the video.";c&&(d+=" (The black bar in the graph.)");c=null;var e=this.props,f=e.liveheadPosition;e=e.playbackPosition;if(f&&this.props.isLiveStream){f=this.$2(f-e);c=b("React").createElement(b("VideoDebugItem.react"),{label:"Livehead \u0394",column:"right",tooltip:"How much ahead of the playhead the current livehead is. In the graph below, that amounts to the time between the playhead (the black bar) and the end of the final segment."},f)}else c=b("React").createElement(b("VideoDebugItem.react"),{label:"Duration",column:"right"},this.$2(this.props.playbackDuration));f=null;this.props.isLiveStream&&this.props.streamType=="dash"&&(f=b("React").createElement(b("VideoDebugDashMpdLag.react"),{liveManifestUrl:this.props.liveManifestUrl,lastMpdFetchDuration:this.props.lastMpdFetchDuration,mpdUpdatePollCount:this.props.mpdUpdatePollCount,prevMpdChangesTime:this.props.prevMpdChangesTime,lastMpdChangesTime:this.props.lastMpdChangesTime}));var g=this.props.lastError;if(g){var h=g,i=h.error;h=h.message;g=b("React").createElement(b("VideoDebugItem.react"),{label:"Error"},i,": ",h)}i=this.props;h=i.atHistoryEntry;i=i.historyEventType;h=h!=null?"isFrozen":null;var j=null;i?j=b("React").createElement(b("VideoDebugItem.react"),{label:"History event"},i):j=b("React").createElement(b("VideoDebugItem.react"),{label:"Autoplay reason"},b("React").createElement(b("TooltipLink.react"),{display:"inline",href:"#",tooltip:this.props.autoplayReasonReadable},this.props.autoplayReason));i=null;this.props.isLiveStream&&this.props.fblsHost&&(i=b("React").createElement(b("VideoDebugItem.react"),{label:"FBLS Host",column:"left"},this.props.fblsHost));var k=null;this.props.isLiveStream&&this.props.fblsTier&&(k=b("React").createElement(b("VideoDebugItem.react"),{label:"FBLS Tier",column:"left"},this.props.fblsTier));var l=null;this.props.isLiveStream&&this.props.shadowId&&(l=b("React").createElement(b("VideoDebugItem.react"),{label:"Shadow Id"},this.props.shadowId));var m=null;this.props.isLiveStream&&(m=b("React").createElement(b("VideoDebugFlag.react"),{label:"IsShadow",active:this.props.isShadow,tooltip:"Indicates if the LIVE video is server side generated replica."}));var n=null;this.props.viewabilityPercentage&&(n=b("React").createElement(b("VideoDebugItem.react"),{label:"Viewability Percentage"},this.props.viewabilityPercentage));var o=b("React").createElement(b("VideoDebugItem.react"),{label:"Projection"},this.props.projection);this.props.isSpherical&&(o=b("React").createElement("div",null,b("React").createElement(b("VideoDebugItem.react"),{label:"Yaw / Pitch",tooltip:"The yaw / pitch orientation of the video"},this.$3(this.props.yaw,this.props.pitch)),o));return b("React").createElement("div",{className:h},b("React").createElement(b("TooltipLink.react"),{target:"_blank",display:"inline",className:"_5jy",href:"https://our.intern.facebook.com/intern/dex/video-debug-overlay/",tooltip:"See the DEX about how to read this overlay"},"?"),b("React").createElement(b("VideoDebugExposeVideoDebug.react"),{videoID:this.props.videoID,getDebug:this.props.getDebug,VideoDebugOverlay:this,loggedError:this.props.loggedError,lastError:this.props.lastError}),b("React").createElement(b("VideoDebugScubaEventsLink.react"),{videoID:this.props.videoID,initializationTimestamp:this.props.initializationTimestamp,atHistoryEntry:this.props.atHistoryEntry,historyLength:this.props.historyLength,isLiveStream:this.props.isLiveStream,isSpherical:this.props.isSpherical}),j,b("React").createElement(b("VideoDebugLogMessages.react"),{lastLogEvent:this.props.lastLogEvent,atHistoryEntry:this.props.atHistoryEntry,getLogEventsUntil:this.props.getLogEventsUntil,initializationTimestamp:this.props.initializationTimestamp}),g,b("React").createElement(b("VideoDebugItem.react"),{label:"State",column:"right"},this.props.playerState),b("React").createElement(b("VideoDebugItem.react"),{label:"Player"},this.props.playerVersion),b("React").createElement(b("VideoDebugItem.react"),{label:"Stalls",column:"right",tooltip:"total stall/in-play stall: total stall time/in-play stall time"},this.props.stallCount+"/"+this.props.inPlayStallCount+": "+(this.$2(this.props.stallTime/1e3,1)+"/")+(""+this.$2(this.props.inPlayStallTime/1e3,1))),b("React").createElement(b("VideoDebugItem.react"),{label:"Init time"},this.$2(this.props.initializationTime/1e3)),b("React").createElement(b("VideoDebugItem.react"),{label:"Interrupts",column:"right"},this.props.interruptCount,": ",this.$2(this.props.interruptTime/1e3)),b("React").createElement(b("VideoDebugItem.react"),{label:"Stream Type"},this.props.streamType),b("React").createElement(b("VideoDebugItem.react"),{label:"Frames/Dropped",column:"right"},this.props.totalFrames+"/"+this.props.droppedFrames),b("React").createElement(b("VideoDebugItem.react"),{label:"Round-trip time"},this.props.lastRTT?this.$1(this.props.lastRTT):"n/a"),b("React").createElement(b("VideoDebugItem.react"),{label:"Rep. Size",column:"right",tooltip:"Resolution of the representation, as reported by the browser, followed by the MOS value"},this.props.videoWidth,"x",this.props.videoHeight,this.props.mosValue?" ("+this.props.mosValue.toFixed(2)+")":""),o,a,b("React").createElement("ul",null,b("React").createElement(b("VideoDebugFlag.react"),{label:"HD",active:this.props.isHD,available:this.props.hasHD,tooltip:"High Definition. Indicates if the video has an HD stream and if it is playing."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"Live",active:this.props.isLiveStream,tooltip:"Indicates if this is a Live stream."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"CVC Poller",active:this.props.isPolling,available:this.props.isLiveStream,tooltip:"Concurrent Viewer Count Poller. Indicates if a poll request was sent recently. This should blink at a ~3 sec inteval."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"RL",active:this.props.isRateLimited,available:this.props.hasRateLimit,tooltip:"Rate Limit. Indicates if the server is rate limiting the video stream."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"ST",active:this.props.hasSubtitles,tooltip:"Subtitles. Indicates if the video has subtitles."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"SA",active:this.props.hasSpatialAudio,tooltip:"Spatial Audio. Indicates if the video has spatial audio."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"Akamai",active:this.props.isAkamai,tooltip:"Akamai. Indicates if the video is being served from Akamai."}),b("React").createElement(b("VideoDebugFlag.react"),{label:"DRM",active:this.props.isDrm,tooltip:"DRM. Indicates if this video is protected by DRM"}),m),c,n,b("React").createElement(b("VideoDebugItem.react"),{label:"Playhead",tooltip:d},this.$2(e)),b("React").createElement(b("VideoDebugDashManifestView.react"),{getSourceBufferHealth:this.props.getSourceBufferHealth,playbackPosition:e,segmentInitSourceMap:this.props.segmentInitSourceMap,segmentStates:this.props.segmentStates,segmentArrays:this.props.segmentArrays,timelineEvents:this.props.timelineEvents,timelineRanges:this.props.timelineRanges,getSegmentClass:this.props.getSegmentClass,bitrate:this.props.bitrate,isVisible:b("CurrentUser").isEmployee()}),f,i,k,l)};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("VideoDebugOverlay",["cx","CSS","DebugOverlayBitrate","KeyboardShortcuts","MosUtils","React","ReactDOM","SubscriptionsHandler","URI","UserAgent","VideoDebugHistory","VideoDebugOverlay.react","VideoPlayerReason","VideoPlayerShakaGlobalConfig","cancelAnimationFrame","clearTimeout","exposeVideoDebug","getActiveElement","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("MosUtils").getMosValue,i=0,j=1,k=2,l=["SegmentUnknown","SegmentFetching","SegmentFetched","SegmentFailed","SegmentAppended"],m=["_2io2","_19ur","_19us","_19ut","_37la"];function n(a,c,d){"use strict";__p&&__p();this.$12=function(a){a!=="DebugOverlay"&&this.setHidden(!0)}.bind(this),this.inFocusAndAltKey=function(a,c){var d=b("UserAgent").isPlatform("Mac OS X");d=a.altKey&&(d||a.shiftKey);if(!d||c!=="onkeydown"||a.ctrlKey||a.metaKey)return!1;d=this.$4;c=b("getActiveElement")();return c.contains(d)||d.contains(c)}.bind(this),this.toggleMute=function(event){var a=this.$16;a.isMuted()?a.unmute():a.mute()}.bind(this),this.togglePause=function(event){var a=this.$16;a.isState("playing")?a.pause(b("VideoPlayerReason").USER):a.play(b("VideoPlayerReason").USER)}.bind(this),this.onExpose=function(event){b("exposeVideoDebug")(this.getProps(),!!event.shiftKey)}.bind(this),this.onFreeze=function(event){if(this.$11)return this.resume();else return this.freeze()}.bind(this),this.onHistoryRew=function(event){return event.shiftKey?this["goto"](-Infinity):this.prev()}.bind(this),this.onHistoryFwd=function(event){if(event.shiftKey){this["goto"](Infinity);return this.resume()}return this.next()}.bind(this),this.onLivePoll=function(){this.$21&&b("clearTimeout")(this.$21),this.$21=b("setTimeout")(function(){this.$21=null}.bind(this),1e3)}.bind(this),this.onDashPlayerDebug=function(a){__p&&__p();var b=a.type,event=a.event;a=null;switch(b){case"MPDFetchDuration":var c=event;this.$7.lastMpdFetchDuration=c;a={lastMpdFetchDuration:c};break;case"InitialSegmentIndexes":a=this.onSegmentIndexes(event,!0);this.$3=this.$16.getVideoTracks()||[];break;case"SegmentIndexesUpdated":a=this.onSegmentIndexes(event,!1);break;case"SegmentInitSources":this.onSegmentInitSources(event);break;case"SegmentFetching":case"SegmentFetched":case"SegmentFailed":case"SegmentAppended":a=this.onSegmentEvent(b,event);break;case"streamInterruptAt":case"commercialBreakAt":case"endedAt":this.addTimelineMark(b,event);break;case"streamResumedAt":this.removeTimelineMark("streamInterruptAt",event);break;default:return}a&&this.record(b,a)}.bind(this),this.onVpcLogEvent=function(event){this.$7.lastLogEvent=event,this.$7.getLogEventsUntil=this.$6.reconstructors.lastLogEvent.getAllUntil,this.record(event.event,{lastLogEvent:event})}.bind(this),this.getSourceBufferHealth=function(){this.$13[j]=this.$16.getVideoNode();return this.$13.map(this.$23)}.bind(this),this.$23=function(a,b){__p&&__p();var c=[];if(!a)return c;var d;try{a=a.buffered,d=a.length}catch(a){return c}for(var e=0;e<d;e++)c.push({gap:!1,startTime:a.start(e),endTime:a.end(e)});for(var a=1;a<d;a++){e={gap:!0,startTime:c[a-1].endTime,endTime:c[a].startTime};c.push(e);this.$14[b][e.startTime]=e}return c}.bind(this),this.toggleHidden=function(){return this.setHidden(!this.getHidden())}.bind(this),this.getHidden=function(){return this.$24}.bind(this),this.setHidden=function(a){this.$24=a,this.$24?this.stopAnimating():(this.$16&&this.$16.showDebugOverlayView("DebugOverlay"),this.startAnimating()),b("CSS").conditionClass(this.$4,"hidden_elem",this.$24)}.bind(this),this.getDebug=function(){return{VideoPlayerController:this.$16,VideoDebugOverlay:this.vdo,VideoDebugParent:this,VideoBufferGaps:this.$14[i],ComboBufferGaps:this.$14[j],AudioBufferGaps:this.$14[k]}}.bind(this),this.getProps=function(){__p&&__p();var a=this.$16;if(!a)return null;var c=a.getVideoResolution(),d=c.height;c=c.width;var e=a.getDebugInfo(),f=e.currentVideo;e=e.player;var g=e.dimensions,h=b("DebugOverlayBitrate").computeBitrate(a.getCurrentTimePosition(),this.$7.segmentArrays,this.$2);h=h.bitrate;return Object.assign({},this.$7,{videoID:a.getVideoID(),playbackPosition:a.getCurrentTimePosition(),playbackDuration:a.getPlaybackDuration(),isSpherical:a.isSpherical(),streamType:f.streamType,projection:f.projection,isLiveStream:f.isLiveStream,isHD:f.isHD,hasHD:f.hasHD,tagSD:f.tagSD,tagHD:f.tagHD,hasSubtitles:f.hasSubtitles,isRateLimited:f.isRateLimited,hasRateLimit:f.hasRateLimit,liveManifestUrl:f.liveManifestUrl,isAkamai:f.liveManifestUrl&&f.liveManifestUrl.includes("akamaihd"),streamId:f.streamId,audioStreamId:f.audioStreamId,videoHeight:d,videoWidth:c,isDrm:f.isDrm,mosValue:f&&g?this.getActiveMosValue(f.streamId,g.width,g.height):null,hasSpatialAudio:a.getOption("SphericalVideoSpatialAudioController","hasSpatialAudio"),dashAudioFormat:f.dashAudioFormat,initializationTime:e.initializationTime,initializationTimestamp:e.initializationTimestamp,playerVersion:e.version,stallCount:e.stallCount,stallTime:e.stallTime,inPlayStallCount:e.inPlayStallCount,inPlayStallTime:e.inPlayStallTime,interruptCount:e.interruptCount,interruptTime:e.interruptTime,loggedError:e.loggedError,lastError:e.lastError,droppedFrames:e.droppedFrames,totalFrames:e.totalFrames,viewabilityPercentage:e.viewabilityPercentage,getDebug:this.getDebug,playerState:this.$20(),isPolling:!!this.$21,getSegmentClass:n.getSegmentClass,bitrate:h})}.bind(this),this.$26=function(a){this.vdo=a}.bind(this),this.$4=a,this.$5=c,this.$6=new(b("VideoDebugHistory"))(this.getProps),this.$7=this.$8(),this.$9(),this.$10=null,this.$11=!1,this.setHidden(d.hidden),this.$1=d.timeBetweenRender,this.$2=0}n.prototype.$9=function(){"use strict";this.$13=[null,null,null],this.$14=[{},{},{}]};n.prototype.$8=function(){"use strict";var a=this.$5,b=a.autoplayReason,c=a.autoplayReasonReadable,d=a.fblsHost,e=a.fblsTier,f=a.isShadow;a=a.shadowId;return{autoplayReason:b,autoplayReasonReadable:c,lastMpdFetchDuration:null,prevMpdChangesTime:null,lastMpdChangesTime:Date.now(),mpdUpdatePollCount:0,segmentStates:{},segmentInitSourceMap:null,timelineEvents:[],timelineRanges:[],getSourceBufferHealth:this.getSourceBufferHealth,getLogEventsUntil:function(){return[]},yaw:0,pitch:0,lastRTT:null,fblsHost:d,fblsTier:e,isShadow:f,shadowId:a}};n.prototype.disable=function(){"use strict";this.setHidden(!0),this.$15.release(),this.$16.unregisterOption("DebugOverlay","hidden")};n.prototype.enable=function(a){__p&&__p();var c;this.$16=a;this.$3=[];this.$15=new(b("SubscriptionsHandler"))();(c=this.$15).addSubscriptions.apply(c,[a.addListener("showDebugOverlay",this.$12),a.addListener("VideoWithLiveBroadcast/poll",this.onLivePoll),a.addListener("debug/dashPlayerEvent",this.onDashPlayerDebug),a.addListener("debug/vpcLogEvent",this.onVpcLogEvent),a.addListener("streamInterrupted",function(){this.$17("interrupted")}.bind(this)),a.addListener("streamResumed",function(){this.$17(null)}.bind(this)),a.addListener("buffering",function(){this.$17("buffering")}.bind(this)),a.addListener("buffered",function(){this.$17(null)}.bind(this)),a.addListener("abortedLoading",function(){this.$17("aborted")}.bind(this)),a.addListener("restoringAfterAbort",function(){this.$17("restoring"),this.$7=this.$8(),this.$9()}.bind(this)),a.addListener("restoredAfterAbort",function(){this.$17(null)}.bind(this)),a.addListener("bufferingChanged",function(){var b=a.getDebugInfo();b=b.player;var event={stallTime:b.stallTime};b={playbackPosition:a.getCurrentTimePosition()};this.$6.record(event,b,"bufferingChanged")}.bind(this)),a.addListener("viewportChange",function(a,b){this.$7.yaw=a,this.$7.pitch=b}.bind(this))].concat(this.registerKeys({d:this.toggleHidden,e:this.onExpose,f:this.onFreeze,m:this.toggleMute,p:this.togglePause,LEFT:this.onHistoryRew,RIGHT:this.onHistoryFwd})));a.registerOption("DebugOverlay","hidden",this.getHidden,this.setHidden);this.$18(a.getVideoID())&&this.setHidden(!1)};n.prototype.registerKeys=function(a){"use strict";var c=[],d={baseFilters:[this.inFocusAndAltKey],allowDefault:!0};for(var e in a)c.push(b("KeyboardShortcuts").register(e,a[e],d));return c};n.prototype.$18=function(a){"use strict";var c=b("URI").getRequestURI().getQueryData();c=c.vid;switch(c){case undefined:return!1;case null:return!0;default:return c.split(/\D+/g).indexOf(a)!==-1}};n.prototype.$17=function(a){"use strict";this.$19=a};n.prototype.$20=function(){"use strict";var a=this.$16.getState();this.$19&&(a+=" ("+this.$19+")");return a};n.prototype.addTimelineMark=function(a,b){"use strict";var event={type:a,time:b};this.removeTimelineMark(event);a=this.$7.timelineEvents;a.push(event);return b};n.prototype.removeTimelineMark=function(a,b){"use strict";__p&&__p();var c=this.$7.timelineEvents;for(var d=0;d<c.length;d++){var event=c[d];if(event.type===a&&event.time===b){c.splice(d,1);return!0}}return!1};n.prototype.record=function(a,b,c){"use strict";var d=this.$16;c=c||{};b=b||{};this.$6.record(b,Object.assign(c,this.$7,{playerState:this.$20(),playbackPosition:d.getCurrentTimePosition(),getSourceBufferHealth:this.getSourceBufferHealth}),a)};n.getSegmentId=function(a,b){"use strict";return b+(a.unscaledStartTime||a.startTime)};n.getSegmentClass=function(a,b,c){"use strict";b=n.getSegmentId(b,c);return m[a[b]||0]};n.prototype.onSegmentEvent=function(a,event){"use strict";__p&&__p();var b=event.type,c=event.sourceBuffer,d=event.segment;d=this.$22(d);var e=d;e=e.url;d=n.getSegmentId(d,b);var f=l.indexOf(a);this.$7.segmentStates[d]=f;a==="SegmentFetched"&&e.getResourceTimingEntry()&&(this.$7.lastRTT=e.getResourceTimingEntry().timeToFirstByte);switch(b){case"v":this.$13[i]=c;break;case"a":this.$13[k]=c;break}return{segmentStates:[d,f]}};n.prototype.onSegmentIndexes=function(a,c){"use strict";__p&&__p();if(b("VideoPlayerShakaGlobalConfig").getBool("ignore_segment_index_updates_when_debug_overlay_hidden",!1)&&this.$16.isLiveVideo()&&this.$24)return null;c=c||a.some(function(a){return a.lastPollHadChanges&&a.lastPollHadChanges()});a=a.map(function(a){a=a.getSegments?a.getSegments():this.$25(a);return a.map(function(a){return this.$22(a)}.bind(this))}.bind(this));if(c){c=this.$7.lastMpdChangesTime;this.$7.prevMpdChangesTime=c;this.$7.lastMpdChangesTime=Date.now();this.$7.mpdUpdatePollCount=0}else this.$7.mpdUpdatePollCount+=1;this.$7.segmentArrays=a;c=a.map(function(a){return a[a.length-1]}).filter(function(a){return a}).map(function(a){a=a.endTime;return a});c.length&&(this.$7.liveheadPosition=Math.min.apply(Math,c));c=this.$7.mpdUpdatePollCount;return{segmentArrays:a,mpdUpdatePollCount:c}};n.prototype.$25=function(a){"use strict";var b=[],c=a.getSegment(0);while(c)b.push(c),c=a.getSegmentAfter(c);return b};n.prototype.onSegmentInitSources=function(a){"use strict";this.$7.segmentInitSourceMap=new Map(a.map(function(a){var c=a.getFailoverUri();c=new(b("URI"))(c.toString());return[c.getPath(),a]}))};n.prototype.isHidden=function(){"use strict";return this.$24};n.prototype.startAnimating=function(){"use strict";if(this.$10)return;var a=function(){this.renderOverlay(),this.$1?this.$10=b("setTimeout")(a,this.$1):this.$10=b("requestAnimationFrame")(a)}.bind(this);a()};n.prototype.stopAnimating=function(){"use strict";var a=this.$10;this.$10&&(this.$1?b("clearTimeout")(this.$10):b("cancelAnimationFrame")(this.$10),this.$10=null);return a};n.prototype.prev=function(){"use strict";this.freeze(),this.$6.prev()};n.prototype.next=function(){"use strict";this.freeze();var a=this.$6.next();isFinite(a)||this.resume()};n.prototype["goto"]=function(a){"use strict";this.freeze(),this.$6["goto"](a)};n.prototype.freeze=function(){"use strict";this.$11||(this.$6.freezeProps(),this.$11=!0)};n.prototype.resume=function(){"use strict";this.$11=!1};n.prototype.getPropsToRender=function(){"use strict";return this.$11?this.$6.getProps():this.getProps()};n.prototype.getActiveMosValue=function(a,b,c){"use strict";var d=this.$3.find(function(b){return b.streamInfoID===a});return d&&d.playbackResolutionMos?h(d.playbackResolutionMos,b,c):null};n.prototype.renderOverlay=function(){"use strict";var a=!this.$24&&this.getPropsToRender();a&&b("ReactDOM").render(b("React").createElement(b("VideoDebugOverlay.react"),babelHelpers["extends"]({ref:this.$26},a)),this.$4)};n.prototype.$22=function(a){"use strict";if(a.getTimeRange){var b=a.getTimeRange();return{startTime:b.startTime,endTime:b.endTime,url:a.getURI(),debugInfo:null}}return a};e.exports=n}),null);
__d("VideoComponentDebugOverlay.react",["cx","React","ReactDOM","VideoComponent","VideoDebugOverlay","VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.enable=function(a){this.debugOverlay=new(b("VideoDebugOverlay"))(b("ReactDOM").findDOMNode(this.refs.videoDebugOverlay),{autoplayReason:this.props.autoplayReason,autoplayReasonReadable:"?"},{hidden:!0}),this.debugOverlay.enable(a)};a.prototype.disable=function(){this.debugOverlay.setHidden(!0),this.debugOverlay.disable()};a.prototype.render=function(){return b("React").createElement("div",{ref:"videoDebugOverlay",className:"_5m64 _1jto _3htz hidden_elem"})};function a(){h.apply(this,arguments)}e.exports=b("VideoComponent").createContainer(a,{suppressMount:function(){return!b("VideoPlayerShakaGlobalConfig").getBool("enable_video_debug",!1)}})}),null);
__d("ShowmarkErrorDialog.react",["cx","ix","fbt","Image.react","Layout.react","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("Layout.react").Column,l=500;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.hide=function(){this.setState({shown:!1})}.bind(this),this.state={shown:!1}}a.prototype.$1=function(){return this.props.validationFailure==="transparent_and_white"?i._("Le logo du programme doit \u00eatre un graphique blanc sur fond transparent."):null};a.prototype.$2=function(){return this.props.validationFailure==="transparent_and_white"?i._("Vous ne pouvez pas ajouter votre logo de programme dans ce format."):null};a.prototype.render=function(){return b("React").createElement(b("XUIDialog.react"),{shown:this.state.shown,hideOnEscape:!1,layerHideOnBlur:!1,width:l},b("React").createElement(b("XUIDialogTitle.react"),null,b("React").createElement(b("Layout.react"),null,b("React").createElement(k,null,b("React").createElement(b("Image.react"),{className:"_3-90",src:h("26339")})),b("React").createElement(k,null,this.$2()))),b("React").createElement(b("XUIDialogBody.react"),null,this.$1(),b("React").createElement("div",{display:"block",className:"_3-8x"},i._("V\u00e9rifiez que votre logo de programme r\u00e9pond \u00e0 ces conditions et r\u00e9essayez."))),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogButton.react"),{label:i._("OK"),onClick:this.hide})))};a.prototype.show=function(){this.setState({shown:!0})};e.exports=a}),null);
__d("ShowsCreationLoggerUtils",["ShowCreationFlowTypedLogger"],(function(a,b,c,d,e,f){"use strict";a={log:function(a,c,d,e){d=new(b("ShowCreationFlowTypedLogger"))().setFlowSource(d).setStep(a).setPageID(c);e&&(d=d.updateExtraData(e));d.log()},logError:function(a,c,d,e,f){e=new(b("ShowCreationFlowTypedLogger"))().setFlowSource(e).setStep(a).setPageID(c).setError(d);f&&(e=e.updateExtraData(f));e.log()}};e.exports=a}),null);
__d("ShowCreationWebdriverTestDataIDs",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SHOW_CREATION_COMPLETE_STEP:"SHOW_CREATION_COMPLETE_STEP",SHOW_CREATION_PUBLISH_BAR:"SHOW_CREATION_PUBLISH_BAR",SHOW_CREATION_PUBLISH_BUTTON:"SHOW_CREATION_PUBLISH_BUTTON",SHOW_CREATION_PUBLISH_CONFIRMATION_DIALOG:"SHOW_CREATION_PUBLISH_CONFIRMATION_DIALOG",SHOW_CREATION_PUBLISH_CONFIRMATION_DIALOG_BUTTON:"SHOW_CREATION_PUBLISH_CONFIRMATION_DIALOG_BUTTON",SHOW_CREATION_STEP:"SHOW_CREATION_STEP",SHOWS_LOGO_DIALOG:"SHOWS_LOGO_DIALOG",SHOWS_LOGO_DIALOG_CONFIRM:"SHOWS_LOGO_DIALOG_CONFIRM",SHOWS_LOGO_DIALOG_INPUT:"SHOWS_LOGO_DIALOG_INPUT",SHOWS_LOGO_DIALOG_PROGRESS_BAR:"SHOWS_LOGO_DIALOG_PROGRESS_BAR"})}),null);
__d("VideoShowsLogoFileInput.react",["FileInput.react","React","ShowCreationWebdriverTestDataIDs"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return b("React").createElement("span",{"data-testid":b("ShowCreationWebdriverTestDataIDs").SHOWS_LOGO_DIALOG_INPUT},b("React").createElement(b("FileInput.react"),{accept:"image/png",multiple:!1,onChange:this.props.onFileChange,containerClassName:this.props.className},this.props.children))};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("ShowCreationFlowStep",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({RENDER_CONNECTED_PAGE_ENTRY_POINT:"render_connected_page_entry_point",RENDER_CREATION_V2_LANDING_PAGE:"render_creation_v2_landing_page",RENDER_LANDING_PAGE:"render_landing_page",NAME_CLICK:"name_click",NAME_INPUT:"name_input",DESCRIPTION_CLICK:"description_click",DESCRIPTION_INPUT:"description_input",SHOW_ADMIN_TRANSFERAL_FAILURE:"show_admin_transferal_failure",SHOW_ATTRIBUTION_SELECTED_FROM_MEDIA_MANAGER:"show_attribution_selected_from_media_manager",SHOW_CREATE_CLICK:"show_create_click",SHOW_CREATE_CLICK_FROM_MEDIA_MANAGER:"show_create_click_from_media_manager",SHOW_CREATE_DIALOG_EXIT:"show_create_dialog_exit",SHOW_CREATE_DIALOG_FROM_CONNECTED_PAGE:"show_create_dialog_from_connected_page",SHOW_CREATE_DIALOG_OPEN:"show_create_dialog_open",SHOW_CREATE_FROM_CONNECTED_PAGE:"show_create_from_connected_page",SHOW_CREATE_SUCCESS:"show_create_success",SHOW_CREATE_SUCCESS_FROM_MEDIA_MANAGER:"show_create_success_from_media_manager",SHOW_CREATE_ERROR:"show_create_error",SHOW_CREATE_ERROR_FROM_MEDIA_MANAGER:"show_create_error_from_media_manager",SHOW_CREATE_INVALID_TITLE_FROM_MEDIA_MANAGER:"show_create_invalid_title_from_media_manager",SHOWS_ONBOARDING_CARD_CLICK:"shows_onboarding_card_click",PROFILE_PIC_ITEM_CLICK:"profile_pic_item_click",PROFILE_PIC_ITEM_FILE_SELECTED:"profile_pic_item_file_selected",SHOW_TRAILER_ITEM_CLICK:"show_trailer_item_click",SHOW_TRAILER_ITEM_FILE_SELECTED:"show_trailer_item_file_selected",SHOW_TRAILER_UPLOADED:"show_trailer_uploaded",SHOW_TRAILER_UPLOAD_CANCELLED:"show_trailer_upload_cancelled",SHOW_TRAILER_ENCODE_SUCCESS:"show_trailer_encode_success",SHOW_TRAILER_UPLOAD_NEW_CLICKED:"show_trailer_upload_new_clicked",SHOW_TRAILER_UPLOAD_NEW_FILE_SELECTED:"show_trailer_upload_new_file_selected",SHOWMARK_ITEM_CLICK:"showmark_item_click",SHOWMARK_FILE_SELECTED:"showmark_file_selected",SHOWMARK_FILE_CHANGED:"showmark_file_changed",SHOWMARK_DIALOG_CLOSED:"showmark_dialog_closed",SHOWMARK_UPLOAD_CLICKED:"showmark_upload_clicked",SHOWMARK_UPLOAD_CROPPED:"showmark_upload_cropped",SHOWMARK_UPLOAD_CROP_REVERTED:"showmark_upload_crop_reverted",SHOWMARK_UPLOAD_FAILED:"showmark_upload_failed",SHOWMARK_UPLOAD_SUCCESS:"showmark_upload_success",SHOWMARK_CHANGE_CLICK:"showmark_change_click",SHOWMARK_INVALID:"showmark_invalid",SHOWMARK_CREATION_TOGGLE:"showmark_creation_toggle",SHOWMARK_CREATION_TEMPLATE_SELECTED:"showmark_creation_template_selected",SHOWMARK_CREATION_UPLOAD:"showmark_creation_upload",AD_BREAKS_CONFIRM_DIALOG_INIT:"ad_breaks_confirm_dialog_init",AD_BREAKS_ITEM_CLICK:"ad_breaks_item_click",CONVERSION_MENU_OPENED:"conversion_menu_opened",CONVERSION_MENU_CLOSED:"conversion_menu_closed",CONVERSION_APPLY_TEMPLATE_CLICKED:"conversion_apply_template_clicked",PUBLISH_BUTTON_CLICK:"publish_button_click",PUBLISH_CONFIRM_BUTTON_CLICK:"publish_confirm_button_click",PUBLISH_CONFIRM_DIALOG_EXIT:"publish_confirm_dialog_exit",PUBLISH_CONFIRM_DIALOG_OPEN:"publish_confirm_dialog_open",PUBLISH_SUCCESS:"publish_success",UNPUBLISH_SUCCESS:"unpublish_success",PUBLISH_ERROR:"publish_error"})}),null);
__d("ShowmarkTemplate",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({RALEWAY:"RALEWAY",ASAPCONDENSED:"ASAPCONDENSED",MONTSERRAT:"MONTSERRAT",NOTOSERIF:"NOTOSERIF",ROBOTOSLAB:"ROBOTOSLAB",FREDOKAONE:"FREDOKAONE"})}),null);
__d("ShowmarkTemplateFontConfig",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({ASAPCONDENSED:"Asap Condensed Medium",FREDOKAONE:"Fredoka One Regular",MONTSERRAT:"Montserrat Regular",NOTOSERIF:"Noto Serif Bold",RALEWAY:"Raleway ExtraBold",ROBOTOSLAB:"Roboto Slab Bold"});e.exports=a}),null);
__d("XShowsLogoUploadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/showpages/logo/upload/",{page_id:{type:"FBID"},crop_window:{type:"IntVector"},file_data_url:{type:"String"}})}),null);
__d("VideoShowsLogoUploadDialog.react",["ix","cssVar","cx","fbt","ActorURI","AdsXUIProgressBar.react","BasicVector","DOM","FileInputUploader","Grid.react","Image.react","Layout.react","LeftRight.react","Link.react","PhotoZoomCropDimensions","PhotoZoomCropImagePreview.react","React","ReactDOM","ShowCreationFlowStep","ShowCreationFlowTypedLogger","ShowCreationWebdriverTestDataIDs","ShowmarkErrorDialog.react","ShowmarkTemplate","ShowmarkTemplateFontConfig","ShowsConfig","SimpleNUXMessage","SimpleNUXMessageTypes","VideoShowsLogoFileInput.react","XShowsLogoUploadController","XUIAmbientNUX.react","XUIButton.react","XUICard.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIGrayText.react","XUINotice.react","XUISpinner.react","XUIText.react","XUITextInput.react","canvasToBlob","fbglyph","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("Grid.react").GridItem,m=b("Layout.react").Column,n=b("Layout.react").FillColumn,o=900,p=270,q=84,r=144,s=45,t=24,u=3,v=720,w=225,x=215,y=110;c=babelHelpers.inherits(a,b("React").Component);k=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.state={file:null,fileInput:null,fileDataURL:null,uploadToServerState:null,uploadState:null,url:this.props.existingLogoUrl,cropDims:null,cropWindow:null,useCreationTool:!1,templateSelected:null,templateText:this.props.pageName.substr(0,t),creationToolNuxShown:!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").SHOWMARK_CREATION_TOOL_NUX)},this.$2=function(event){this.setState({uploadState:"loading"})}.bind(this),this.$3=function(event){__p&&__p();var a=event.currentTarget.result,c=new Image();c.src=a;c.onload=function(){__p&&__p();var d=document.createElement("canvas");d.width=c.width;d.height=c.height;d=d.getContext("2d");if(d==undefined)return;d.drawImage(c,0,0);d=d.getImageData(0,0,c.width,c.height);d=d.data;var e=0,f=0,g=b("ShowsConfig").countThreshold,h=c.width,i=0,j=c.height,k=0;for(var l=0;l<c.height;l++)for(var m=0;m<c.width;m++){var n=c.width*l+m;n=4*n;if(d[n+3]!=0){e++;m<h&&(h=m);m>i&&(i=m);l<j&&(j=l);l>k&&(k=l);var o=d[n],r=d[n+1];n=d[n+2];o=.2126*o+.7152*r+.0722*n;o>=250&&f++}}if(e===c.width*c.height||e*g>=f*100){e===c.width*c.height?this.$4(b("ShowCreationFlowStep").SHOWMARK_INVALID,new Map([["reason","Not transparent"]])):this.$4(b("ShowCreationFlowStep").SHOWMARK_INVALID,new Map([["reason","Not white"],["non transparent pixels",e],["whitePixels",f]]));r=b("React").createElement(b("ShowmarkErrorDialog.react"),{validationFailure:"transparent_and_white"});r=b("ReactDOM").render(r,b("DOM").create("div"));r.show();this.setState({uploadState:null,url:null});return}n=null;o=null;(h!==0||i!==c.width-1||j!==0||k!==c.height-1)&&(o=[h,j,i,k],n=new(b("PhotoZoomCropDimensions"))(new(b("BasicVector"))(c.width,c.height)),n.setCenter((h+i)/c.width/2,(j+k)/c.height/2),n=this.$5(n,o,p,q),this.$4(b("ShowCreationFlowStep").SHOWMARK_UPLOAD_CROPPED,{cropWindow:JSON.stringify(o)}));this.setState({uploadState:"success",url:a,cropDims:n,cropWindow:o})}.bind(this)}.bind(this),this.$6=function(event){this.setState({uploadState:"failed"})}.bind(this),this.$20=function(){this.$4(b("ShowCreationFlowStep").SHOWMARK_CREATION_TOGGLE,new Map([["is_creation",!this.state.useCreationTool]]));var a=!this.state.useCreationTool;a&&this.$21();this.setState({useCreationTool:a,templateSelected:a?b("ShowmarkTemplate").RALEWAY:null})}.bind(this),this.$25=function(event){var a=event.currentTarget.value;a.length<=t&&this.setState({templateText:a},this.$24)}.bind(this),this.$24=function(){__p&&__p();var a=this.state,c=a.templateSelected;a=a.templateText;if(!c||a.length<u||a.length>t)return;var d=b("DOM").create("canvas");d.width=v;d.height=w;var e=d.getContext("2d");e.fillStyle="#FFFFFF";e.textAlign="left";e.textBaseline="bottom";var f=x;e=this.$26(e,f,c);while(e.measureText(a).width>v&&f>y)f--,e=this.$26(e,f,c);if(e.measureText(a).width<=v)e.fillText(a,0,w);else{c=a.split(" ");var g="";for(var c=c,h=Array.isArray(c),i=0,c=h?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=c.length)break;j=c[i++]}else{i=c.next();if(i.done)break;j=i.value}j=j;if(e.measureText(g+j).width<=v)g+=j+" ";else break}g=g.trim();j=a.slice(g.length).trim();if(e.measureText(j).width>v){while(e.measureText(g+a[g.length]).width<=v)g+=a[g.length];j=a.slice(g.length).trim();while(e.measureText(j).width>v)j=j.slice(0,-1)}e.fillText(g,0,w-f);e.fillText(j,0,w)}b("promiseDone")(b("canvasToBlob")(d,"image/png").then(function(a){var c=new FileReader();c.onload=function(c){this.$3(c),this.setState({file:new File([a],"temp-showmark.png"),fileInput:b("ReactDOM").findDOMNode(this.refs.showmarkCreationFileInput),fileDataURL:d.toDataURL()})}.bind(this);c.onprogress=this.$2;c.onerror=this.$6;c.readAsDataURL(a)}.bind(this)))}.bind(this),this.$21=function(){b("SimpleNUXMessage").markMessageSeenByUser(b("SimpleNUXMessageTypes").SHOWMARK_CREATION_TOOL_NUX),this.setState({creationToolNuxShown:!1})}.bind(this),this.$29=function(){__p&&__p();this.$4(b("ShowCreationFlowStep").SHOWMARK_UPLOAD_CLICKED,{cropWindow:JSON.stringify(this.state.cropWindow)});this.state.useCreationTool&&this.$4(b("ShowCreationFlowStep").SHOWMARK_CREATION_UPLOAD,new Map([["template",this.state.templateSelected],["template_text",this.state.templateText]]));if(this.state.fileInput){this.setState({uploadToServerState:"loading"});var a=b("XShowsLogoUploadController").getURIBuilder().setFBID("page_id",this.props.pageID);this.state.cropWindow&&a.setIntVector("crop_window",this.state.cropWindow);a=b("ActorURI").create(a.getURI(),this.props.pageID);a=new(b("FileInputUploader"))(this.state.fileInput).setURI(a).setFiles({file:this.state.file}).setData({file_data_url:this.state.fileDataURL});a.subscribe("success",function(a,c){this.$4(b("ShowCreationFlowStep").SHOWMARK_UPLOAD_SUCCESS,new Map([["photo_id",c.photoID]])),this.setState({uploadToServerState:"success"}),this.props.onSuccess()}.bind(this));a.subscribe("failure",function(a,c){this.$4(b("ShowCreationFlowStep").SHOWMARK_UPLOAD_FAILED),this.setState({uploadToServerState:"failed"})}.bind(this));a.send()}}.bind(this),this.$30=function(){this.$4(b("ShowCreationFlowStep").SHOWMARK_DIALOG_CLOSED),this.props.hideDialog()}.bind(this),c}a.prototype.$1=function(a){a=a.files;return!a||!a[0]?null:a[0]};a.prototype.$7=function(event,a){__p&&__p();event.preventDefault();var c=event.target,d=this.$1(c);this.setState({fileInput:c,file:d});if(!d)return;c=new FileReader();c.onload=this.$3;c.onprogress=this.$2;c.onerror=this.$6;c.readAsDataURL(d);a?this.$4(b("ShowCreationFlowStep").SHOWMARK_FILE_SELECTED):this.$4(b("ShowCreationFlowStep").SHOWMARK_FILE_CHANGED)};a.prototype.$8=function(){return j._("Ajouter votre logo de programme")};a.prototype.$9=function(){return j._("Votre logo de programme sera superpos\u00e9 en filigrane dans un coin de vos vid\u00e9os quand elle ne sont pas lues. Votre logo devrait repr\u00e9senter votre programme plut\u00f4t que des \u00e9pisodes sp\u00e9cifiques.")};a.prototype.$4=function(a,c){a=new(b("ShowCreationFlowTypedLogger"))().setFlowSource(this.props.showCreationFlowSource).setStep(a).setPageID(this.props.pageID);c&&(a=a.updateExtraData(c));a.log()};a.prototype.$10=function(){return b("React").createElement("div",{className:"_2gzs"},b("React").createElement(b("XUIText.react"),{display:"block",headingLevel:1,weight:"bold",className:"_2gzt"},this.$8()),b("React").createElement(b("XUIText.react"),{display:"block",className:"_2gzu"},this.$9()))};a.prototype.$5=function(a,b,c,d){c=Math.min(Math.min(c/(b[2]-b[0]+1),d/(b[3]-b[1]+1)),1);d=a.clone();d.setSize((b[2]-b[0]+1)*c,(b[3]-b[1]+1)*c);d.setZoom(c);return d};a.prototype.$11=function(){var a=this.state,c=a.cropWindow,d=a.cropDims;a=a.url;d&&c&&(d=this.$5(d,c,r,s));c=b("React").createElement("div",{className:"_16wy"},d?b("React").createElement(b("PhotoZoomCropImagePreview.react"),{dimensions:d,size:d.getSize(),src:String(a),className:"_16wz"}):b("React").createElement(b("Image.react"),{src:a,className:"_16wz"}));return b("React").createElement("div",{className:"_2gzw"},b("React").createElement(b("XUIText.react"),{display:"block",weight:"bold",className:"_2gzz"},j._("Aper\u00e7u du logo de programme")),b("React").createElement(b("XUICard.react"),{background:"base-wash",className:"_2gz-"},b("React").createElement("div",{className:"_16w_"},b("React").createElement(b("Layout.react"),{className:"_16x1"},b("React").createElement(m,null,this.props.pageProfilePic?b("React").createElement(b("Image.react"),{src:this.props.pageProfilePic,className:"_4kh1"}):b("React").createElement("div",{className:"_4kh1"})),b("React").createElement(n,null,b("React").createElement(b("XUIText.react"),{weight:"bold"},this.props.pageName),b("React").createElement(b("Layout.react"),null,b("React").createElement(m,null,b("React").createElement(b("XUIGrayText.react"),{shade:"light",size:"meta1"},j._("il y a 2 heures"))),b("React").createElement(m,{className:"_3-8r"},b("React").createElement(b("XUIGrayText.react"),{shade:"light",size:"meta1"},"\xb7")),b("React").createElement(m,null,b("React").createElement(b("Image.react"),{className:"_4kh3",src:g("124639")})))),b("React").createElement(m,null,b("React").createElement(b("Image.react"),{src:g("125398")}))),b("React").createElement("div",{className:"_16x2"+(this.state.url?" _3d6w":"")},this.state.url?c:b("React").createElement(b("XUIText.react"),{className:"_16wy"},j._("Logo de programme").toString())),b("React").createElement("div",{className:"_16x5"},b("React").createElement(b("Layout.react"),null,b("React").createElement(n,null,b("React").createElement(b("XUIGrayText.react"),{className:"_16x6",display:"block",shade:"light",size:"meta1"},j._("DERNIER \u00c9PISODE")),b("React").createElement(b("XUIText.react"),{display:"block",weight:"bold",className:"_16x8"},j._("Titre de l\u2019\u00e9pisode"))),b("React").createElement(m,null,b("React").createElement(b("XUIButton.react"),{className:"_16x9",image:b("React").createElement(b("Image.react"),{src:g("121816")}),label:j._("\u00c0 regarder"),use:"default",href:"#"})))))),b("React").createElement("div",{className:"_2gz_"},this.$12()))};a.prototype.$13=function(){return b("React").createElement("div",{className:"_2g-0"},this.state.uploadToServerState==="loading"?b("React").createElement("div",{className:"_26of"},b("React").createElement(b("XUISpinner.react"),{className:"_26oj",background:"dark",size:"large"})):null,b("React").createElement(b("LeftRight.react"),null,this.$14(),this.$11()))};a.prototype.$15=function(){return b("React").createElement(b("VideoShowsLogoFileInput.react"),{onFileChange:function(event){return this.$7(event,!0)}.bind(this),ref:"blankLogofileInput"},b("React").createElement("a",{href:"#"},b("React").createElement("div",{className:"_45m5"},b("React").createElement(b("Image.react"),{className:"_3-94",src:g("124971")}),b("React").createElement(b("XUIGrayText.react"),{shade:"medium",size:"header3",className:"_37a1"},j._("Importez ou faites glisser l\u2019image")))))};a.prototype.$16=function(){var a=b("React").createElement(b("VideoShowsLogoFileInput.react"),{onFileChange:function(event){return this.$7(event,!1)}.bind(this),ref:"changeLogofileInput"},b("React").createElement(b("XUIButton.react"),{className:"_3-8y",image:b("React").createElement(b("Image.react"),{src:g("121748")}),label:j._("Modifier le logo du programme"),use:"default",href:"#"}));this.state.cropDims&&(a=b("React").createElement(b("Layout.react"),{className:"_3-8o"},b("React").createElement(m,null,b("React").createElement(b("Image.react"),{src:g("116731")})),b("React").createElement(n,{className:"_18p2"},b("React").createElement(b("XUIText.react"),{weight:"bold",display:"block"},j._("Logo du programme recadr\u00e9")),b("React").createElement(b("XUIText.react"),{display:"block"},j._("Pour que le logo de votre programme s\u2019affiche correctement, l\u2019image a \u00e9t\u00e9 recadr\u00e9e automatiquement afin de supprimer les marges inutiles sur les c\u00f4t\u00e9s.")),b("React").createElement("div",null,b("React").createElement(b("XUIButton.react"),{className:"_3-8y _3-90",image:b("React").createElement(b("Image.react"),{src:g("120765")}),label:j._("Annuler"),use:"default",href:"#",onClick:function(){this.$4(b("ShowCreationFlowStep").SHOWMARK_UPLOAD_CROP_REVERTED),this.setState({cropDims:null,cropWindow:null})}.bind(this)}),a))));var c=this.state,d=c.cropDims;c=c.url;return b("React").createElement("div",null,b("React").createElement("div",{className:"_45m6"},d?b("React").createElement(b("PhotoZoomCropImagePreview.react"),{className:"_18p3",dimensions:d,size:d.getSize(),src:String(c)}):b("React").createElement(b("Image.react"),{className:"_45m9",src:c})),a)};a.prototype.$17=function(){return b("React").createElement(b("AdsXUIProgressBar.react"),{className:"_45mb","data-testid":b("ShowCreationWebdriverTestDataIDs").SHOWS_LOGO_DIALOG_PROGRESS_BAR,striped:!0,value:100})};a.prototype.$18=function(){return b("React").createElement(b("XUINotice.react"),{style:{marginTop:"12px",marginRight:"12px"},use:"warn"},j._("Une erreur s\u2019est produite lors de l\u2019ajout de votre logo de programme. Veuillez r\u00e9essayer."))};a.prototype.$19=function(){return b("React").createElement("ul",{className:"_2g-3"},b("React").createElement("li",{className:"_2g-4"},j._("Au moins 300 pixels de hauteur")),b("React").createElement("li",{className:"_2g-4"},j._("Contenu blanc sur fond transparent")),b("React").createElement("li",{className:"_2g-4"},j._("Fichiers PNG uniquement")),b("React").createElement("li",{className:"_2g-4"},j._("Cadr\u00e9 au plus pr\u00e8s de votre contenu"),b("React").createElement("div",{className:"_2g-5"},b("React").createElement("div",{className:"_2g-6"},j._("Logo de programme").toString()))))};a.prototype.$22=function(){return b("React").createElement("div",null,b("React").createElement(b("XUIText.react"),{className:"_2g-8"},j._("AJOUTER UN LOGO DE PROGRAMME")),this.state.url?this.$16():this.$15(),this.state.uploadState==="loading"?this.$17():null)};a.prototype.$23=function(a){this.$4(b("ShowCreationFlowStep").SHOWMARK_CREATION_TEMPLATE_SELECTED,new Map([["template",a]])),this.setState({templateSelected:a},this.$24)};a.prototype.$26=function(a,c,d){a.font=c+"px "+b("ShowmarkTemplateFontConfig")[d];return a};a.prototype.componentDidUpdate=function(a,c){this.state.useCreationTool&&!c.useCreationTool&&this.$23(b("ShowmarkTemplate").RALEWAY)};a.prototype.$27=function(a){return b("React").createElement("div",{className:"_3h-p"+(a===this.state.templateSelected?" _3h-q":""),onClick:function(){return this.$23(a)}.bind(this),role:"radio","aria-checked":a===this.state.templateSelected,tabIndex:Object.values(b("ShowmarkTemplate")).indexOf(a)},b("React").createElement("span",{style:{fontFamily:b("ShowmarkTemplateFontConfig")[a]},className:"_3h-r"},"Abc"))};a.prototype.$28=function(){var a=t-this.state.templateText.length;return b("React").createElement("div",{className:"_2put"},b("React").createElement(b("XUIText.react"),{className:"_2g-8"},j._("S\u00c9LECTIONNER UN MOD\u00c8LE DE LOGO")),b("React").createElement(b("Grid.react"),{cols:3,spacing:"pas",className:"_3-8o"},Object.keys(b("ShowmarkTemplate")).map(function(a){return b("React").createElement(l,{key:a},this.$27(a))}.bind(this))),b("React").createElement(b("XUITextInput.react"),{className:"_2puu",value:this.state.templateText,onChange:this.$25}),b("React").createElement(b("XUIText.react"),{size:"meta1",display:"block",className:"_3-8x"+(a<=0||this.state.templateText.length<u?" _2puw":"")},this.state.templateText.length>=u?j._({"*":"({number} caract\u00e8res restants)","_1":"(1 caract\u00e8re restant)"},[j._plural(a,"number")]):j._("Le logo de programme doivent contenir plus de 3 caract\u00e8res")),b("React").createElement(b("VideoShowsLogoFileInput.react"),{ref:"showmarkCreationFileInput",onFileChange:function(){},className:"hidden_elem"},b("React").createElement("a",{href:"#"})))};a.prototype.$14=function(){var a=b("React").createElement(b("Link.react"),{href:"#",onClick:this.$20,className:"_33xa",ref:"creationToolToggleLink"},this.state.useCreationTool?j._("Voulez-vous ajouter votre propre logo de programme\u00a0?"):j._("Vous n\u2019avez pas de logo de programme\u00a0? Ajoutez un logo par d\u00e9faut.")),c=b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.creationToolToggleLink}.bind(this),position:"below",shown:this.state.creationToolNuxShown,onCloseButtonClick:this.$21},j._("Nouveau\u00a0! Si vous n\u2019avez pas de logo pour votre programme, Facebook peut vous en faire un pour vous aider \u00e0 d\u00e9marrer."));return b("React").createElement("div",{className:"_2g-7"},b("React").createElement(b("XUIText.react"),{className:"_2g-8"},j._("CRIT\u00c8RES DU LOGO DE PROGRAMME")),this.$19(),this.state.useCreationTool?this.$28():this.$22(),a,this.state.creationToolNuxShown?c:null)};a.prototype.$12=function(){var a=this.state.uploadToServerState==="loading",c=this.state.useCreationTool&&(!this.state.templateSelected||this.state.templateText.length<u);return b("React").createElement(b("LeftRight.react"),null,b("React").createElement("span",null),b("React").createElement("span",null,b("React").createElement(b("XUIDialogButton.react"),{label:j._("Annuler"),action:"cancel",size:"large",use:"default",onClick:this.$30,disabled:a}),b("React").createElement(b("XUIDialogButton.react"),{"data-testid":b("ShowCreationWebdriverTestDataIDs").SHOWS_LOGO_DIALOG_CONFIRM,label:j._("Ajouter un logo de programme"),action:"confirm",size:"large",use:"confirm",disabled:this.state.uploadState!=="success"||a||c,onClick:this.$29})))};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("XUIDialog.react"),{width:o,shown:!0,hideOnEscape:!1,label:this.$8(),layerHideOnBlur:!1},b("React").createElement(b("XUIDialogBody.react"),{className:"_45me","data-testid":b("ShowCreationWebdriverTestDataIDs").SHOWS_LOGO_DIALOG},this.$10(),this.$13())))};e.exports=a}),null);
__d("ShowCreationFlowSource",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SHOW_CONVERSION:"show_conversion",SHOW_CREATION_V1:"show_creation_v1",SHOW_CREATION_V2:"show_creation_v2",SHOW_PERMALINK:"show_permalink"})}),null);