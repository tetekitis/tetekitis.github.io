if (self.CavalryLogger) { CavalryLogger.start_js(["AG3VM"]); }

__d("FBRTCDismissReason",[],(function(a,b,c,d,e,f){e.exports={CALL_ENDED:0,ANSWERED_ON_ANOTHER_DEVICE:1,IN_ANOTHER_CALL:2,CONNECTION_DROPPED:3,REJECTED_ON_ANOTHER_DEVICE:4,REMOVED_BY_PARTICIPANT:5,REJECTED_BY_CALLEE:6,INTERNAL_ERROR:7,JOIN_APPROVAL_DENIED:8}}),null);
__d("FBRTCHangupReason",[],(function(a,b,c,d,e,f){e.exports={IGNORE_CALL:0,HANGUP_CALL:1,NO_ANSWER_TIMEOUT:2,CLIENT_ERROR:3,IN_ANOTHER_CALL:4,CLIENT_INTERRUPTED:5,SESSION_MIGRATED:6}}),null);
__d("FBRTCParticipantCallState",[],(function(a,b,c,d,e,f){e.exports={UNKNOWN:0,DISCONNECTED:1,NO_ANSWER:2,REJECTED:3,UNREACHABLE:4,CONNECTION_DROPPED:5,CONTACTING:6,RINGING:7,CONNECTING:8,CONNECTED:9,PARTICIPANT_LIMIT_REACHED:10,IN_ANOTHER_CALL:11,RING_TYPE_UNSUPPORTED:12}}),null);
__d("FBRTCRtcResponseStatusCode",[],(function(a,b,c,d,e,f){e.exports={OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,METHOD_NOT_ALLOWED:406,CONDITIONAL_REQUEST_FAILED:412,SERVER_INTERNAL_ERROR:500,SERVICE_UNAVAILABLE:503}}),null);
__d("ChromeExtensionInstallError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b=babelHelpers.inherits(a,Error);g=b&&b.prototype;function a(a,b,c){g.constructor.call(this,a),this.message=a,this.$ChromeExtensionInstallError3=a,this.$ChromeExtensionInstallError1=c,this.$ChromeExtensionInstallError2=b,this.name=this.constructor.name}a.prototype.toString=function(){return this.name+": "+[this.message,this.$ChromeExtensionInstallError2,this.$ChromeExtensionInstallError1].join("-")};a.prototype.getTypedMessage=function(){return this.$ChromeExtensionInstallError3};a.prototype.getInstallType=function(){return this.$ChromeExtensionInstallError2};e.exports=a}),null);
__d("ChromeExtensionInstallErrorTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CHROME_WEBSTORE_UNDEFINED:"CHROME_WEBSTORE_UNDEFINED",EXTENSION_INSTALL_FAILED:"EXTENSION_INSTALL_FAILED",EXTENSION_STORE_INSTALL_TIMEOUT:"EXTENSION_STORE_INSTALL_TIMEOUT"})}),null);
__d("RTCChromeExtensionListener",["DateConsts","EventEmitter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=b("DateConsts").MS_PER_SEC;var h=c;d=babelHelpers.inherits(a,b("EventEmitter"));g=d&&d.prototype;function a(a){g.constructor.call(this),this.$RTCChromeExtensionListener1=!1,this.$RTCChromeExtensionListener2=null,this.$RTCChromeExtensionListener5=function(a){var b=a;if(a.type==="notificationButtonClicked"){var c=a.buttonIndex;a=a.notificationId;c!==0&&c!==1&&(b={type:"notificationClicked",notificationId:a})}this.emit(b.type,b)}.bind(this),this.$RTCChromeExtensionListener6=function(a){a.onMessage.removeListener(this.$RTCChromeExtensionListener5),this.$RTCChromeExtensionListener2=null,this.emit("portDisconnected"),this.$RTCChromeExtensionListener1===!1&&this.$RTCChromeExtensionListener7(h)}.bind(this),this.$RTCChromeExtensionListener3=a}a.prototype.$RTCChromeExtensionListener4=function(){if(this.$RTCChromeExtensionListener2==null)try{var a=window.chrome.runtime.connect(this.$RTCChromeExtensionListener3,{name:"notifications"});a.onMessage.addListener(this.$RTCChromeExtensionListener5);a.onDisconnect.addListener(this.$RTCChromeExtensionListener6);this.$RTCChromeExtensionListener2=a;this.emit("portConnected")}catch(a){this.emit("portConnectionError",a)}};a.prototype.$RTCChromeExtensionListener7=function(a){a===void 0&&(a=10),window.setTimeout(function(){this.$RTCChromeExtensionListener4()}.bind(this),a)};a.prototype.connect=function(){this.$RTCChromeExtensionListener7()};a.prototype.disconnect=function(){this.$RTCChromeExtensionListener2!=null&&(this.$RTCChromeExtensionListener1=!0,this.$RTCChromeExtensionListener2.disconnect(),this.$RTCChromeExtensionListener2=null)};e.exports=a}),null);
__d("RTCChromeScreenSharingExtension",["Promise","RTCChromeExtensionListener","uuid"],(function(a,b,c,d,e,f){__p&&__p();var g="ncfpggehkhmjpdjpefomjchjafhmbnai";function a(a){return new(b("RTCChromeExtensionListener"))(a)}function h(a,c){return new(b("Promise"))(function(b,d){window.chrome.runtime.sendMessage(c,a,function(a){if(a!=null)typeof a==="object"&&a.type==="error"?d(new Error(a.message)):b(a);else{a=window.chrome.runtime.lastError.message;d(new Error(a))}})})}function c(a,b){b===void 0&&(b=["screen","window","tab"]);return h({type:"getStreamID",sources:b},a)}function d(a,b){return h({type:"cancel",requestID:a},b)}function f(){return b("uuid")()}e.exports={EXTENSION_ID:g,connectToNotifications:a,generateNotificationID:f,getMediaSourceFromExtension:c,sendExtensionRequest:h,stopExtensionScreenSharing:d}}),null);
__d("ScreenSharingExtensionInstallationEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({STARTED:"started",INSTALLED:"installed",FAILED:"failed"})}),null);
__d("ScreenSharingExtensionInstallationType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({INLINE:"inline",STORE:"store"})}),null);
__d("ScreenSharingExtensionInstallationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:ScreenSharingExtensionInstallationLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:ScreenSharingExtensionInstallationLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ScreenSharingExtensionInstallationLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setExtensionID=function(a){this.$1.extension_id=a;return this};a.prototype.setFailReason=function(a){this.$1.fail_reason=a;return this};a.prototype.setInstallEvent=function(a){this.$1.install_event=a;return this};a.prototype.setSourceApp=function(a){this.$1.source_app=a;return this};a.prototype.setType=function(a){this.$1.type=a;return this};a.prototype.setURIPath=function(a){this.$1.uri_path=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={extension_id:!0,fail_reason:!0,install_event:!0,source_app:!0,type:!0,uri_path:!0,vc:!0};e.exports=a}),null);
__d("CollabRTCChromeScreenSharingExtension",["invariant","Promise","regeneratorRuntime","ChromeExtensionInstallError","ChromeExtensionInstallErrorTypes","DateConsts","RTCChromeScreenSharingExtension","ScreenSharingExtensionInstallationEvent","ScreenSharingExtensionInstallationType","ScreenSharingExtensionInstallationTypedLogger","URI","gkx","isFacebookURI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("DateConsts").MS_PER_MIN;var h=b("RTCChromeScreenSharingExtension").EXTENSION_ID,i=b("RTCChromeScreenSharingExtension").generateNotificationID,j=b("RTCChromeScreenSharingExtension").getMediaSourceFromExtension,k=b("RTCChromeScreenSharingExtension").sendExtensionRequest,l=b("RTCChromeScreenSharingExtension").stopExtensionScreenSharing,m="DIALOG_USER_CANCEL",n="EXTENSION_NOT_FOUND",o="MESSAGESENDER_TAB_UNDEFINED",p="REQUEST_ID_UNDEFINED",q="UNEXPECTED_ERROR",r="data-fb-only-screensharing-extension-available",s=250,t=2*c,u=2;function a(){this.DIALOG_USER_CANCEL=m,this.EXTENSION_NOT_FOUND=n,this.MESSAGESENDER_TAB_UNDEFINED=o,this.REQUEST_ID_UNDEFINED=p,this.UNEXPECTED_ERROR=q,this.$2=h}a.prototype.isInstalled=function(){var a=document;a=a.documentElement;return a!=null?a.hasAttribute(r)&&a.getAttribute(r)==="true"?!0:!1:!1};a.prototype.throwIfNotInstalled=function(){if(this.isInstalled()!==!0)throw new Error(n)};a.prototype.$3=function(a,c){__p&&__p();var d=(c=a)!=null?(c=c.chrome)!=null?c.webstore:c:c;if(d==null)return b("Promise").reject(new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").CHROME_WEBSTORE_UNDEFINED,b("ScreenSharingExtensionInstallationType").INLINE));var e=window.document.documentElement;v(this.getExtensionURL(),window.document);a!==window&&v(this.getExtensionURL(),a.document);return new(b("Promise"))(function(a,c){d.install(this.getExtensionURL(),function(){e!=null&&e.setAttribute(this.getPresenseAttr(),"true"),a()}.bind(this),function(a,d){c(new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").EXTENSION_INSTALL_FAILED,b("ScreenSharingExtensionInstallationType").INLINE,d))})}.bind(this)).then(function(){this.$4(u);return b("ScreenSharingExtensionInstallationType").INLINE}.bind(this))};a.prototype.$5=function(a){__p&&__p();if(this.isInstalled())return b("Promise").resolve(b("ScreenSharingExtensionInstallationType").STORE);v(this.getExtensionURL(),window.document);a=(a=window)!=null?(a=a.chrome)!=null?a.webstore:a:a;if(a==null)return b("Promise").reject(new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").CHROME_WEBSTORE_UNDEFINED,b("ScreenSharingExtensionInstallationType").STORE));window.open(this.getExtensionURL(),"_blank");return this.$4(t/s).then(function(){var a=window.document.documentElement;a.setAttribute(this.getPresenseAttr(),"true");return b("ScreenSharingExtensionInstallationType").STORE}.bind(this))["catch"](function(){throw new(b("ChromeExtensionInstallError"))(b("ChromeExtensionInstallErrorTypes").EXTENSION_STORE_INSTALL_TIMEOUT,b("ScreenSharingExtensionInstallationType").STORE)})};a.prototype.getPresenseAttr=function(){return r};a.prototype.isInlineInstallCapableDomain=function(){return b("isFacebookURI")(b("URI").getRequestURI())};a.prototype.install=function(a){if(this.isInstalled())return b("Promise").resolve();new(b("ScreenSharingExtensionInstallationTypedLogger"))().setInstallEvent(b("ScreenSharingExtensionInstallationEvent").STARTED).setExtensionID(this.$2).setSourceApp(a).log();return this.$6(a).then(function(c){new(b("ScreenSharingExtensionInstallationTypedLogger"))().setInstallEvent(b("ScreenSharingExtensionInstallationEvent").INSTALLED).setExtensionID(this.$2).setType(c).setSourceApp(a).setURIPath(b("URI").getRequestURI().getPath()).log()}.bind(this))["catch"](function(c){new(b("ScreenSharingExtensionInstallationTypedLogger"))().setInstallEvent(b("ScreenSharingExtensionInstallationEvent").FAILED).setExtensionID(this.$2).setFailReason(c.getTypedMessage()).setType(c.getInstallType()).setSourceApp(a).setURIPath(b("URI").getRequestURI().getPath()).log();throw c}.bind(this))};a.prototype.$6=function(a){__p&&__p();if(!this.isInlineInstallCapableDomain())return this.$5(a);if(window.opener){if(b("gkx")("678271"))return this.$5(a);try{window.opener.document;return window.opener.closed?this.$5(a):this.$3(window.opener,a)}catch(b){return this.$5(a)}}return this.$3(window,a)};a.prototype.getSourceID=function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:if(this.isInstalled()){d.next=2;break}throw new Error(n);case 2:d.next=4;return b("regeneratorRuntime").awrap(j(this.$2,a));case 4:c=d.sent;d.t0=c.type;d.next=d.t0==="streamID"?8:d.t0==="canceledGetStreamID"?10:11;break;case 8:this.$1=c.requestID;return d.abrupt("return",c.streamID);case 10:throw new Error(m);case 11:throw new Error(q);case 12:case"end":return d.stop()}},null,this)};a.prototype.getExtensionID=function(){return this.$2};a.prototype.getExtensionURL=function(){return"https://chrome.google.com/webstore/detail/"+this.$2};a.prototype.stop=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(l(this.$1,this.$2));case 2:this.$1=null;case 3:case"end":return a.stop()}},null,this)};a.prototype.$4=function(a){return k({type:"ping"},this.$2)["catch"](function(b){if(a<1)throw b;return w(s).then(function(){return this.$4(a-1)}.bind(this))}.bind(this))};a.prototype.isMinimumVersionNumber=function(a,c,d){__p&&__p();var e,f,g,h,i,j;return b("regeneratorRuntime").async(function(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:this.throwIfNotInstalled();l.next=3;return b("regeneratorRuntime").awrap(k({type:"ping"},this.$2));case 3:e=l.sent;f=e.version;g=f.split(".").map(function(a){return parseInt(a,10)}),h=g[0],i=g[1],j=g[2];if(!(h>=a)){l.next=10;break}if(!(i>c)){l.next=9;break}return l.abrupt("return",!0);case 9:return l.abrupt("return",i===c&&j>=d);case 10:return l.abrupt("return",!1);case 11:case"end":return l.stop()}},null,this)};a.prototype.focusTabAndWindow=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"focusTabAndWindow"},this.$2));case 3:a=c.sent;return c.abrupt("return",{tab:a.tab,window:a.window});case 5:case"end":return c.stop()}},null,this)};a.prototype.getLastFocusedWindow=function(a){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:this.throwIfNotInstalled();d.next=3;return b("regeneratorRuntime").awrap(k({type:"getLastFocusedWindow",getInfo:a},this.$2));case 3:c=d.sent;return d.abrupt("return",c.window);case 5:case"end":return d.stop()}},null,this)};a.prototype.getTabForSender=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"getTabForSender"},this.$2));case 3:a=c.sent;return c.abrupt("return",a.tab);case 5:case"end":return c.stop()}},null,this)};a.prototype.getTabAndWindowForSender=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"getTabAndWindowForSender"},this.$2));case 3:a=c.sent;return c.abrupt("return",{tab:a.tab,window:a.window});case 5:case"end":return c.stop()}},null,this)};a.prototype.getWindow=function(a,c){__p&&__p();var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.throwIfNotInstalled();e.next=3;return b("regeneratorRuntime").awrap(k({type:"getWindow",windowId:a,getInfo:c},this.$2));case 3:d=e.sent;return e.abrupt("return",d.window);case 5:case"end":return e.stop()}},null,this)};a.prototype.updateTab=function(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:this.throwIfNotInstalled();d={type:"updateTab",updateProperties:a};c!==undefined&&(d.tabId=c);f.next=5;return b("regeneratorRuntime").awrap(k(d,this.$2));case 5:e=f.sent;return f.abrupt("return",e.tab);case 7:case"end":return f.stop()}},null,this)};a.prototype.updateWindow=function(a,c){__p&&__p();var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:this.throwIfNotInstalled();e.next=3;return b("regeneratorRuntime").awrap(k({type:"updateWindow",windowId:a,updateInfo:c},this.$2));case 3:d=e.sent;return e.abrupt("return",d.window);case 5:case"end":return e.stop()}},null,this)};a.prototype.clearNotification=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:c=e.sent;if(!(c===!1)){e.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:e.next=7;return b("regeneratorRuntime").awrap(k({type:"clearNotification",notificationId:a},this.$2));case 7:d=e.sent;return e.abrupt("return",d.wasCleared);case 9:case"end":return e.stop()}},null,this)};a.prototype.createNotification=function(a){__p&&__p();var c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:c=e.sent;if(!(c===!1)){e.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:e.next=7;return b("regeneratorRuntime").awrap(k({type:"createNotification",notificationId:i(),options:a},this.$2));case 7:d=e.sent;return e.abrupt("return",d.notificationId);case 9:case"end":return e.stop()}},null,this)};a.prototype.getAllNotifications=function(){__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:a=d.sent;if(!(a===!1)){d.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:d.next=7;return b("regeneratorRuntime").awrap(k({type:"getAllNotifications"},this.$2));case 7:c=d.sent;return d.abrupt("return",Object.keys(c.notifications));case 9:case"end":return d.stop()}},null,this)};a.prototype.getNotificationsPermissionLevel=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:this.throwIfNotInstalled();c.next=3;return b("regeneratorRuntime").awrap(k({type:"getNotificationsPermissionLevel"},this.$2));case 3:a=c.sent;return c.abrupt("return",a.level);case 5:case"end":return c.stop()}},null,this)};a.prototype.updateNotification=function(a,c){__p&&__p();var d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:f.next=2;return b("regeneratorRuntime").awrap(this.isNotificationPermissionGranted());case 2:d=f.sent;if(!(d===!1)){f.next=5;break}throw new Error("Chrome extension notifications permission not granted");case 5:f.next=7;return b("regeneratorRuntime").awrap(k({type:"updateNotification",notificationId:a,options:c},this.$2));case 7:e=f.sent;return f.abrupt("return",e.wasUpdated);case 9:case"end":return f.stop()}},null,this)};a.prototype.isNotificationPermissionGranted=function(){__p&&__p();var a;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:a="denied";c.prev=1;c.next=4;return b("regeneratorRuntime").awrap(this.getNotificationsPermissionLevel());case 4:a=c.sent;c.next=10;break;case 7:c.prev=7,c.t0=c["catch"](1),a="denied";case 10:c.t1=a;c.next=c.t1==="granted"?13:c.t1==="denied"?14:15;break;case 13:return c.abrupt("return",!0);case 14:return c.abrupt("return",!1);case 15:throw new Error("Received an unexpected permission level: "+a);case 16:case"end":return c.stop()}},null,this,[[1,7]])};function v(a,b){var c="chrome-webstore-item";if(!b.querySelector('link[href="'+a+'"][rel="'+c+'"]')){var d=b.createElement("link");d.setAttribute("href",a);d.setAttribute("rel",c);b.head!=null||g(0,6240);b.head.appendChild(d)}}function w(a){return new(b("Promise"))(function(b){return setTimeout(b,a)})}e.exports=new a()}),null);
__d("CollabRTCChromeScreenSharing",["CollabRTCChromeScreenSharingExtension"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={focusTabAndWindow:function(){return b("CollabRTCChromeScreenSharingExtension").focusTabAndWindow()},getLastFocusedWindow:function(a){return b("CollabRTCChromeScreenSharingExtension").getLastFocusedWindow(a)},getTabForSender:function(){return b("CollabRTCChromeScreenSharingExtension").getTabForSender()},getTabAndWindowForSender:function(){return b("CollabRTCChromeScreenSharingExtension").getTabAndWindowForSender()},getWindow:function(a,c){return b("CollabRTCChromeScreenSharingExtension").getWindow(a,c)},getSourceID:function(a,c){return b("CollabRTCChromeScreenSharingExtension").install(c).then(function(){return b("CollabRTCChromeScreenSharingExtension").getSourceID(a)})},stop:function(){return b("CollabRTCChromeScreenSharingExtension").stop()},updateTab:function(a,c){return b("CollabRTCChromeScreenSharingExtension").updateTab(a,c)},updateWindow:function(a,c){return b("CollabRTCChromeScreenSharingExtension").updateWindow(a,c)}};e.exports=a}),null);
__d("FBRTCConfig",["CurrentUser","RTCSignalingExperiments"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=null,i=null,j=0,k={};a={setConfig:function(a){var b=a.isVCEndpointCall,c=a.meetingID,d=a.meetingPassword,e=a.peerID;a=a.serverConfig;g=b;h=c;i=d;j=e;k=a},isVCEndpointCall:function(){return g},getMeetingID:function(){return h},getMeetingPassword:function(){return i},getPeerID:function(){return j},statsInterpreterConfig:function(){return{bad_score_count:3,frr_weight:800,plr_weight:500,rtt_weight:2,score_threshold:1e3}},unsupportedBrowserUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.unsupported_browser)return k.troubleshooting_urls.unsupported_browser;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/919532078125908";else return"https://www.facebook.com/help/211644178877843"},userMediaErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_error)return k.troubleshooting_urls.user_media_error;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},userMediaPermissionErrorUrl:function(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_permission_error)return k.troubleshooting_urls.user_media_permission_error;if(b("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},supportedSignalingExperiments:function(){return b("RTCSignalingExperiments").getLocal()},isMessengerDotCom:function(){return k.is_messenger_dot_com},useMessengerCallUI:function(){return k.messenger_call_ui},useHDVideoQuality:function(){return k.use_hd_video_quality},shouldCreateDataChannel:function(){return k.data_channel},disableURLManager:function(){return k.disable_url_manager}};e.exports=a}),null);
__d("assignMediaStream",[],(function(a,b,c,d,e,f){"use strict";var g=window.URL||window.webkitURL,h="srcObject"in window.HTMLMediaElement.prototype,i="mozSrcObject"in window.HTMLMediaElement.prototype;function a(a,b){h?a.srcObject=b:i?a.mozSrcObject=b:(typeof a.src==="string"&&g.revokeObjectURL(a.src),a.src=b!=null?g.createObjectURL(b):"")}e.exports=a}),null);
__d("FBRTCUtils",["AsyncRequest","CollabCallTriggerType","FBIDCheck","FBRTCConfig","RTCConfig","assignMediaStream","emptyFunction","randomInt"],(function(a,b,c,d,e,f){__p&&__p();var g=6e3,h="setSinkId"in window.HTMLMediaElement.prototype;a={attachMediaStream:function(a,c){if(a==null)return;b("assignMediaStream")(a,c);c&&a.play()},aboutEqual:function(a,b){return a-b<.01&&b-a<.01},sendServerRequest:function(a,c,d,e,f,h){c===void 0&&(c=b("emptyFunction"));d===void 0&&(d=b("emptyFunction"));e===void 0&&(e=!1);f===void 0&&(f=g);h===void 0&&(h={});a=new(b("AsyncRequest"))().setURI(a).setData(h).setAllowCrossPageTransition(!0).setHandler(c).setErrorHandler(d).setTimeoutHandler(f,function(){d()});e&&a.setOption("asynchronous_DEPRECATED",!1);a.send()},supportsSetSink:function(){return h},isPeerVCEndpoint:function(a){var c=b("FBRTCConfig").isVCEndpointCall();return c!==undefined?c:!!a&&!b("FBIDCheck").isUser_deprecated(a)&&b("RTCConfig").CollabVCEndpointsVideoCallGK},isCollabTrigger:function(a){return a===b("CollabCallTriggerType").QUICK_DIAL||a===b("CollabCallTriggerType").MEETING_ROOM_PAGE_PROFILE}};e.exports=a}),null);
__d("FBRTCVersionDetection",["UserAgent","UserAgentData"],(function(a,b,c,d,e,f){__p&&__p();a={isChrome:function(){return b("UserAgent").isBrowser("Chrome")},isFirefox:function(){return b("UserAgent").isBrowser("Firefox")},isChromium:function(){return!!navigator.webkitGetUserMedia},webrtcVersion:function(){if(this.isFirefox()||this.isChrome())return b("UserAgentData").browserVersion||0;if(this.isChromium()){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return a!=null?parseInt(a[2],10):999}return 0}};e.exports=a}),null);
__d("RTCSignalingExperiments",["FBRTCExperiment","FBRTCScreenSharingUtils","FBRTCSupport","FBRTCVersionDetection","UserAgent","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){this.$2=new Set(),this.$1=new Set(g.getLocal()),a&&(this.$2=new Set(a))}g.prototype.getLocal=function(){return Array.from(this.$1)};g.prototype.setRemote=function(a){return!a?this:new g(a)};g.prototype.getRemote=function(){return Array.from(this.$2)};g.prototype.support=function(a){return this.localSupport(a)&&this.remoteSupport(a)};g.prototype.localSupport=function(a){return this.$1.has(a)};g.prototype.remoteSupport=function(a){return this.$2.has(a)};g.getLocal=function(){var a=[];(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")||b("UserAgent").isBrowser("Firefox >= 38"))&&a.push("sdp_update");h()&&a.push("multiple_streams_plan_b");b("FBRTCScreenSharingUtils").canUserReceiveScreenSharing()&&a.push("screen_sharing");i()&&a.push("multiple_streams_unified");b("FBRTCSupport").isMobileDevice()?a.push("mweb"):a.push("www");b("FBRTCSupport").videoEscalationByUnmuteWorkaround()&&a.push("video_escalation_by_unmute");return a};g.shouldSendDuplicateAck=function(){return b("FBRTCExperiment").gen("rtc_www_retriable_messages").getBool("send_dup_ack",!1)};g.passesRTCWebSignalingHoldOut=function(){return!b("gkx")("692459")};function h(){return(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera"))&&b("FBRTCVersionDetection").webrtcVersion()>=34}function i(){return b("UserAgent").isBrowser("Firefox")&&b("FBRTCVersionDetection").webrtcVersion()>=40}e.exports=g}),null);
__d("MediaRequestSourceApp",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LIVE_BROADCAST:"live_broadcast",RTC_CALL:"rtc_call",SCREEN_RECORDER:"screen_recorder",UNKNOWN:"unknown",WIRELESS_SCREEN_SHARING:"wireless_screen_sharing",WORKPLACE:"workplace"})}),null);
__d("RTCAudioTrackNoiseDetector",["invariant","Promise","MediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="audio track with absolute silence",i="audio track data timeout",j='wrong track type, expected "audio"',k=100;a={ABSOLUTE_SILENCE_ERROR:h,DATA_TIMEOUT_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="audio")return b("Promise").reject(new Error(j));var d=new(b("MediaStream"))();d.addTrack(a);var e=new AudioContext(),f=e.createMediaStreamSource(d),l=e.createScriptProcessor(0,1,1),m=k,n=function(){__p&&__p();l!=null||g(0,2865);l.onaudioprocess=null;l.disconnect();l=null;f!=null||g(0,2866);f.disconnect();f=null;d!=null||g(0,2867);d.removeTrack(a);d=null;e!=null||g(0,2868);return b("Promise").resolve(e.close())["catch"](function(){return b("Promise").resolve()}).then(function(){e=null})};return b("Promise").race([new(b("Promise"))(function(a,b){__p&&__p();l!=null||g(0,2865),l.onaudioprocess=function(c){__p&&__p();c=c.inputBuffer;for(var c=c.getChannelData(0),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;if(f!==0){a();return}}m>0?m--:b(new Error(h))},f!=null||g(0,2866),f.connect(l),e!=null||g(0,2868),l.connect(e.destination)}),new(b("Promise"))(function(a){return setTimeout(a,c)}).then(function(){throw new Error(i)})]).then(function(){return n()})["catch"](function(a){return n().then(function(){throw a})})}};e.exports=a}),null);
__d("RTCEndCallReason",["fbt","FBRTCConstants","FBRTCDismissReason","FBRTCHangupReason","FBRTCRtcResponseStatusCode"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").CallEndReason,i=b("FBRTCConstants").CollabCallEndSubreason;function j(a){this.$3="local",typeof a==="string"||a instanceof String?this.$1=b("FBRTCConstants").endCallReasonFromString(a):this.$1=a}j.prototype.setSubreason=function(a){this.$2=a;return this};j.prototype.getSubreason=function(){return this.$2};j.prototype.setRemoteEnded=function(a){this.$3=a?"remote":"local";return this};j.prototype.getRemoteEnded=function(){return this.$3==="remote"};j.prototype.toStrName=function(a){a===void 0&&(a=!0);return a?this.$4()+"_"+this.$3:this.$4()};j.prototype.$4=function(){return b("FBRTCConstants").callEndReasonString(this.$1)};j.prototype.getReasonID=function(){return this.$1};j.prototype.toString=function(a){var b;a===void 0&&(a=!1);b=((b=this.$5(a))!=null?b:"").toString();return a?b+" "+this.$6():b};j.prototype.$5=function(a){__p&&__p();switch(this.$1){case h.NO_ANSWER_TIMEOUT:case h.IGNORE_CALL:return g._("Pas de r\u00e9ponse");case h.OTHER_NOT_CAPABLE:if(this.$2===i.MCU_INVALID_STREAM_CONFIGURATION)return g._("Trop de clients connect\u00e9s au salon");case h.INCOMING_TIMEOUT:case h.NO_PERMISSION:case h.OTHER_CARRIER_BLOCKED:return g._("Pas joignable");case h.SIGNALING_MESSAGE_FAILED:case h.WEBRTC_ERROR:case h.NO_UI_ERROR:case h.CALLER_NOT_VISIBLE:case h.CLIENT_ERROR:return g._("\u00c9chec de l\u2019appel");case h.UNSUPPORTED_VERSION:return g._("Impossible de connecter l\u2019appel");case h.IN_ANOTHER_CALL:return g._("D\u00e9j\u00e0 en ligne");case h.CARRIER_BLOCKED:return g._("Passez en Wi-Fi pour appeler");case h.CLIENT_INTERRUPTED:return g._("Appel interrompu");case h.HANGUP_CALL:case h.ACCEPT_AFTER_HANGUP:return a?"":g._("Appel termin\u00e9");case h.CONNECTION_DROPPED:return g._("Connexion perdue");case h.OTHER_INSTANCE_HANDLED:return null;case h.CLIENT_ENCRYPTION_ERROR:return g._("Client Encryption Error");case h.INACTIVE_TIMEOUT:return g._("Call is Inactive");default:return null}};j.prototype.$6=function(){__p&&__p();var a;if(this.$1!==h.OTHER_NOT_CAPABLE&&this.$1!==h.SIGNALING_MESSAGE_FAILED&&this.$1!==h.HANGUP_CALL&&this.$1!==h.ACCEPT_AFTER_HANGUP)return"";switch(this.$2){case i.REMOTE_PEER_HANGUP:return"Call ended";case i.REMOTE_PEER_REJECT:return"Call declined";case i.CLOSED_BY_MCU:return"Call expired";case i.CLOSED_AS_STALE:return"Server failed, call is stale";case i.CALL_INITIALIZATION_FAILED:return"Call initialization to room failed";case i.SIP_CONNECTION_INITIALIZATION_FAILED:return"No Answer";case i.LOST_MCU_CONNECTION:return"MCU Media connection failed";case i.LOST_MCU_THRIFT_CONNECTION:return"MCU infrastructure dropped connection";case i.LOST_SIP_ADAPTER_CONNECTION:return"SIP infrastructure dropped connection";case i.MCU_NO_AUDIO_STREAM:return"Invalid audio stream";case i.MCU_INVALID_STREAM_CONFIGURATION:return"Invalid stream configuration";case i.INVALID_MEETING_ID:return"Invalid meeting ID";case i.UNKNOWN:default:a=(a=this.$2)!=null?a:"Unknown";return this.$2!=null&&this.$2!==""?"Unexpected call failure: "+a:"Call ended"}};j.fromHangupReason=function(a){switch(a){case b("FBRTCHangupReason").IGNORE_CALL:return new j(h.IGNORE_CALL);case b("FBRTCHangupReason").NO_ANSWER_TIMEOUT:return new j(h.NO_ANSWER_TIMEOUT);case b("FBRTCHangupReason").HANGUP_CALL:return new j(h.HANGUP_CALL);case b("FBRTCHangupReason").CLIENT_ERROR:return new j(h.CLIENT_ERROR);case b("FBRTCHangupReason").IN_ANOTHER_CALL:return new j(h.IN_ANOTHER_CALL);case b("FBRTCHangupReason").CLIENT_INTERRUPTED:return new j(h.CLIENT_INTERRUPTED);default:return new j(h.HANGUP_CALL)}};j.fromDismissRequest=function(a){__p&&__p();if(!a)return new j(h.HANGUP_CALL);switch(a.reason){case b("FBRTCDismissReason").ANSWERED_ON_ANOTHER_DEVICE:case b("FBRTCDismissReason").REJECTED_ON_ANOTHER_DEVICE:return new j(h.OTHER_INSTANCE_HANDLED);case b("FBRTCDismissReason").CALL_ENDED:return new j(h.HANGUP_CALL);case b("FBRTCDismissReason").IN_ANOTHER_CALL:return new j(h.IN_ANOTHER_CALL);case b("FBRTCDismissReason").CONNECTION_DROPPED:return new j(h.CONNECTION_DROPPED);case b("FBRTCDismissReason").REMOVED_BY_PARTICIPANT:return new j(h.HANGUP_CALL);case b("FBRTCDismissReason").REJECTED_BY_CALLEE:return new j(h.IGNORE_CALL);case b("FBRTCDismissReason").INTERNAL_ERROR:return new j(h.SIGNALING_MESSAGE_FAILED);default:return new j(h.HANGUP_CALL)}};j.fromResponseStatusCode=function(a){switch(a){case b("FBRTCRtcResponseStatusCode").PRECONDITION_FAILURE:case b("FBRTCRtcResponseStatusCode").METHOD_NOT_ALLOWED:case b("FBRTCRtcResponseStatusCode").UNAUTHORIZED:return new j(h.NO_PERMISSION);case b("FBRTCRtcResponseStatusCode").SERVICE_UNAVAILABLE:return new j(h.SIGNALING_MESSAGE_FAILED);case b("FBRTCRtcResponseStatusCode").SERVER_INTERNAL_ERROR:case b("FBRTCRtcResponseStatusCode").BAD_REQUEST:case b("FBRTCRtcResponseStatusCode").BUSY_HERE:case b("FBRTCRtcResponseStatusCode").CONDITIONAL_REQUEST_FAILED:case b("FBRTCRtcResponseStatusCode").NOT_FOUND:return new j(h.CLIENT_ERROR);default:return new j(h.HANGUP_CALL)}};e.exports=j}),null);
__d("RTCMediaDevices",["invariant","Promise","RTCOnDeviceChangePoller"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==="function",i=window.MediaStreamTrack&&window.MediaStreamTrack.getSources==="function",j=1e3,k;a={addEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k||(k=new(b("RTCOnDeviceChangePoller"))(j));k.add(c);return}var d=navigator;d=d.mediaDevices;d&&"addEventListener"in d&&d.addEventListener(a,c)},removeEventListener:function(a,c){if(a==="devicechange"&&b("RTCOnDeviceChangePoller").isNeeded()){k&&k.remove(c);return}var d=navigator;d=d.mediaDevices;d&&"removeEventListener"in d&&d.removeEventListener(a,c)},isSupported:function(a){switch(a){case"enumerateDevices":return h||i;default:return Boolean(navigator.mediaDevices)}},enumerateDevices:function(){if(h){navigator.mediaDevices||g(0,4492);return b("Promise").resolve(navigator.mediaDevices.enumerateDevices())}else if(i)return new(b("Promise"))(function(a){return window.MediaStreamTrack.getSources(a)}).then(l);return b("Promise").reject(new Error("enumerateDevices() not supported"))},filterDevicesOfKind:function(a,b){return a.filter(function(a){return a.kind===b})}};function l(a){return a.map(function(a){var b=a.id,c=a.kind;a=a.label;return{deviceId:b,groupId:"",kind:c==="video"?"videoinput":"audioinput",label:a}})}e.exports=a}),null);
__d("RTCOnDeviceChangePoller",["Promise","FBRTCLogger","RTCMediaDevices"],(function(a,b,c,d,e,f){__p&&__p();a.isNeeded=function(){"use strict";var a=navigator;a=a.mediaDevices;return!b("RTCMediaDevices").isSupported("enumerateDevices")||a&&"ondevicechange"in a?!1:!0};function a(a){"use strict";__p&&__p();this.$1=[],this.$2="",this.$4=null,this.$7=function(){__p&&__p();b("RTCMediaDevices").enumerateDevices().then(function(a){__p&&__p();a=a.map(function(a){return a.deviceId+":"+a.label+":"+a.groupId}).sort().join("~");if(a===this.$2)return;this.$2=a;for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;try{d()}catch(a){}}}.bind(this))["catch"](function(a){return b("Promise").resolve()}).then(function(){this.$4=setTimeout(this.$7,this.$3)}.bind(this))["catch"](function(a){})}.bind(this),this.$3=a}a.prototype.add=function(a){"use strict";this.$1.push(a),this.$5()};a.prototype.remove=function(a){"use strict";this.$1=this.$1.filter(function(b){return b!==a}),this.$6()};a.prototype.$5=function(){"use strict";if(this.$4!==null)return;this.$4=setTimeout(this.$7,0)};a.prototype.$6=function(){"use strict";if(this.$1.length>0)return;this.$4!==null&&(clearTimeout(this.$4),this.$4=null)};e.exports=a}),null);
__d("RTCVideoTrackActivityDetector",["invariant","Promise","MediaStream","assignMediaStream"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="video track playback timeout",i="unexpected video track ready state",j='wrong track type, expected "video"';a={PLAYBACK_TIMEOUT_ERROR:h,WRONG_READY_STATE_ERROR:i,WRONG_TRACK_TYPE_ERROR:j,detect:function(a,c){__p&&__p();if("kind"in a&&a.kind!=="video")return b("Promise").reject(new Error(j));var d=document.createElement("video");d.muted=!0;var e=new(b("MediaStream"))();e.addTrack(a);var f,k=null,l=function(){clearInterval(k),d&&(d.pause(),b("assignMediaStream")(d,null),d.removeEventListener("timeupdate",f),d=null),e&&(e.removeTrack(a),e=null)};return b("Promise").race([new(b("Promise"))(function(c,h){d!=null||g(0,5995),b("assignMediaStream")(d,e),f=function(b){d!=null||g(0,5995),d.currentTime>0&&(a.readyState==="live"?(c(),l()):h(new Error(i)))},b("Promise").resolve(d.pause()).then(function(){d!=null||g(0,5995);return d.play()}).then(function(){f(),d!=null||g(0,5995),d.addEventListener("timeupdate",f),k=setInterval(f,50)})["catch"](function(a){return h(a)})}),new(b("Promise"))(function(a){return setTimeout(a,c)}).then(function(){throw new Error(h)})])["catch"](function(a){l();throw a})}};e.exports=a}),null);
__d("RTCMediaStreamValidator",["Promise","RTCAudioTrackNoiseDetector","RTCVideoTrackActivityDetector"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="no audio tracks",h="no video tracks",i="too many audio tracks",j="too many video tracks",k="unexpected audio track(s)",l="unexpected video track(s)";a={NO_AUDIO_TRACKS_ERROR:g,NO_VIDEO_TRACKS_ERROR:h,TOO_MANY_AUDIO_TRACKS_ERROR:i,TOO_MANY_VIDEO_TRACKS_ERROR:j,UNEXPECTED_AUDIO_TRACKS_ERROR:k,UNEXPECTED_VIDEO_TRACKS_ERROR:l,validate:function(a,c,d,e){__p&&__p();d===void 0&&(d={});e===void 0&&(e={});d=d;var f=d.audio;f=f===void 0?!0:f;d=d.video;d=d===void 0?!0:d;e=e;var g=e.audio;g=g===void 0?1e3:g;e=e.video;e=e===void 0?1e3:e;return b("Promise").all([m(a,c,f,g),n(a,c,d,e)]).then(function(){return a})}};function m(a,c,d,e){var f=a.getAudioTracks();if(!c.audio)return f.length>0?b("Promise").reject(new Error(k)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(g));else if(f.length>1)return b("Promise").reject(new Error(i));return d?b("RTCAudioTrackNoiseDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}function n(a,c,d,e){var f=a.getVideoTracks();if(!c.video)return f.length>0?b("Promise").reject(new Error(l)):b("Promise").resolve(a);if(f.length<1)return b("Promise").reject(new Error(h));else if(f.length>1)return b("Promise").reject(new Error(j));return d?b("RTCVideoTrackActivityDetector").detect(f[0],e).then(function(){return a}):b("Promise").resolve(a)}e.exports=a}),null);
__d("RTCUserRecord",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c=b("immutable").Record({FBID:"UNDEFINED",isGuestUser:!1,isMessengerUser:!1,isPartiesUser:!1,lastConnectedAt:0,meetingID:null,meetingPassword:null,participantState:null,profilePictureUrl:null,profileUrl:null,roomLocation:null,screenStreams:b("immutable").Set(),streams:b("immutable").Set(),userName:"",userShortName:"",vanity:""});g=babelHelpers.inherits(a,c);g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCUser",["FBRTCConstants","FBRTCParticipantCallState","RTCUserRecord","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("FBRTCConstants").MediaContentTypes;g=babelHelpers.inherits(i,b("RTCUserRecord"));g&&g.prototype;i.prototype.clone=function(){return new i(this.toObject())};i.prototype.setParticipantState=function(a){return(!this.participantState||this.participantState.state!==b("FBRTCParticipantCallState").CONNECTED)&&a.state===b("FBRTCParticipantCallState").CONNECTED?this.set("participantState",a).set("lastConnectedAt",Date.now()):!this.participantState||this.participantState.state!==a.state?this.set("participantState",a):this};i.prototype.getParticipantState=function(){return this.participantState&&this.participantState.state};i.prototype.hasAudio=function(){return this.getAllStreamAudioTracks().some(function(a){return a.length>0})};i.prototype.hasVideo=function(){return this.streams.some(function(a){return a.getVideoTracks().length>0})};i.prototype.hasLiveVideoTracks=function(){return this.streams.some(function(a){return a.getVideoTracks().some(function(a){return a.readyState==="live"})})};i.prototype.isAudioMuted=function(){return!this.hasAudio()?!0:this.getAllStreamAudioTracks().every(function(a){return this.areAllTracksMuted(a)}.bind(this))};i.prototype.isVideoMuted=function(){return!this.hasVideo()?!0:this.streams.every(function(a){return this.areAllTracksMuted(a.getVideoTracks())}.bind(this))};i.prototype.areAllTracksMuted=function(a){return!a.some(function(a){return a.enabled})};i.prototype.toggleMuteAudio=function(a){this.getAllStreamAudioTracks().forEach(function(a){return this.$RTCUser1(a)}.bind(this));return this.clone()};i.prototype.toggleMuteVideo=function(a,b){this.streams.forEach(function(b){this.$RTCUser1(b.getVideoTracks(),a)}.bind(this));return this.clone()};i.prototype.stopVideo=function(){this.streams.forEach(function(a){a.getVideoTracks().forEach(function(b){this.$RTCUser1(a.getVideoTracks(),!0),b.readyState!=="ended"&&(b.onended&&b.onended(),b.stop())}.bind(this))}.bind(this));return this.clone()};i.prototype.getAllStreamAudioTracks=function(){return this.streams.concat(this.screenStreams).map(function(a){return a.getAudioTracks()})};i.prototype.hasStream=function(){return!this.streams.isEmpty()};i.prototype.addStream=function(a){return this.set("streams",this.streams.add(a))};i.prototype.removeStream=function(a){return this.set("streams",this.streams["delete"](a))};i.prototype.getStream=function(){return this.hasStream()?this.streams.first():null};i.prototype.replaceStream=function(a,b){return!this.streams.contains(a)?this:this.set("streams",this.streams["delete"](a).add(b))};i.prototype.removeAllStreams=function(){return this.set("streams",b("immutable").Set())};i.prototype.getScreenStream=function(){return this.screenStreams&&this.hasScreenStream()?this.screenStreams.first():null};i.prototype.hasScreenStream=function(){return!this.screenStreams.isEmpty()};i.prototype.addScreenStream=function(a){return this.set("screenStreams",this.screenStreams.add(a))};i.prototype.removeScreenStream=function(a){return this.set("screenStreams",this.screenStreams["delete"](a))};i.prototype.removeAllScreenStreams=function(){return this.set("screenStreams",b("immutable").Set())};i.prototype.replaceScreenStream=function(a,b){if(!this.screenStreams.contains(a))return this;return a===b?this:this.set("screenStreams",this.screenStreams.add(b)["delete"](a))};i.prototype.setRoomLocation=function(a){return this.set("roomLocation",a)};i.prototype.getRoomLocation=function(){return this.roomLocation};i.prototype.setMeetingID=function(a){return this.set("meetingID",a)};i.prototype.getMeetingID=function(){return this.meetingID};i.prototype.setMeetingPassword=function(a){return this.set("meetingPassword",a)};i.prototype.getMeetingPassword=function(){return this.meetingPassword};i.prototype.$RTCUser1=function(a,b){var c=b!=null?!b:this.areAllTracksMuted(a);a.forEach(function(a){return a.enabled=c})};i.prototype.getMediaTypeForTracks=function(){var a=new Map(),b=this.getScreenStream();b&&b.getVideoTracks().forEach(function(b){return a.set(b.id,h.SCREEN)});return a};function i(){g.apply(this,arguments)}e.exports=i}),null);
__d("RTCUserMediaConstraints",["FBRTCConstants","FBRTCSupport","RTCConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("FBRTCConstants").RTCConstraints;var g=b("FBRTCConstants").VideoQuality,h={width:a.FHD_WIDTH,height:a.FHD_HEIGHT,frameRate:a.FRAME_RATE},i={width:a.HD_WIDTH,height:a.HD_HEIGHT,frameRate:a.FRAME_RATE},j={width:a.SD_WIDTH,height:a.SD_HEIGHT,frameRate:a.FRAME_RATE},k={width:a.LQ_WIDTH,height:a.LQ_HEIGHT,frameRate:a.LQ_FRAME_RATE},l={audio:function(a){return a?{deviceId:{exact:a}}:!0},video:function(a,c,d){__p&&__p();d===void 0&&(d=b("RTCConfig").CollaborationCallQuality.videoToRoom);if(a===g.NO_VIDEO)return!1;c=c?{deviceId:{exact:c}}:null;if(a===g.CUSTOM_VIDEO)return babelHelpers["extends"]({},d,c);if(b("FBRTCSupport").isMobileDevice())return{facingMode:{ideal:"user"}};d=m(a);a=a===g.HD_IDEAL_LQ_REQUIRED_VIDEO?k:o(d);return babelHelpers["extends"]({width:n(d,"width",a),height:n(d,"height",a),frameRate:n(d,"frameRate",{frameRate:10})},c)},chromeMediaSource:function(a,b){a=a.video;a=l.chromify(a);if(typeof a!=="object")return{audio:!1,video:Boolean(a)};var c=a.mandatory;a=a.optional;a=a===void 0?[]:a;return{audio:!1,video:{mandatory:babelHelpers["extends"]({},c,{chromeMediaSource:"desktop",chromeMediaSourceId:b}),optional:[{googTemporalLayeredScreencast:!0}].concat(a)}}},chromify:function(a,b){__p&&__p();if(!a||typeof a!=="object")return Boolean(a);if(!r(a))return a;b=b?b.optionalConstraintsOnly:!1;var c=a.mandatory;c=c===void 0?{}:c;var d=a.optional;d=d===void 0?[]:d;var e=Object.entries(a);for(var f=0;f<e.length;f++){var g=e[f],h=g[0];g=g[1];if(h==="require"||h==="advanced"||h==="mediaSource")continue;g=g&&typeof g==="object"?g:{ideal:g};Number.isFinite(g.exact)&&(g.min=g.exact,g.max=g.exact);var i=g.ideal,j=g.exact;if(i!==undefined)if(Number.isFinite(i)){var k;d.push((k={},k[q(h,"min")]=i,k),(k={},k[q(h,"max")]=i,k))}else{d.push((k={},k[q(h)]=i,k))}if(!b)if(j!==undefined&&!Number.isFinite(j))c[q(h)]=j;else{i=["min","max"];for(var k=0;k<i.length;k++){j=i[k];Number.isFinite(g[j])&&(c[q(h,j)]=g[j])}}}a.advanced&&d.push.apply(d,a.advanced);j={};Object.keys(c).length>0?j.mandatory=c:b&&(j.mandatory={});d.length>0&&(j.optional=d);return j}};function m(a){switch(a){case g.FHD_VIDEO:return h;case g.HD_VIDEO:case g.HD_IDEAL_LQ_REQUIRED_VIDEO:return i;case g.LQ_VIDEO:return k;case g.SD_VIDEO:return j;default:return i}}function n(a,b,c){c===void 0&&(c=o(a));var d=a[b];return{min:Math.min(c[b],d),max:Math.max(p(a)[b],d),ideal:d}}function o(a){switch(a){case h:return i;case i:return j;case j:case k:default:return k}}function p(a){switch(a){case k:return j;case j:return i;case i:case h:default:return h}}function q(b,a){return a?""+a+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b}function r(a){return Object.keys(a).some(function(a){return a!=="mandatory"&&a!=="optional"})}e.exports=l}),null);
__d("UserMediaRequestError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=babelHelpers.inherits(h,Error);g=a&&a.prototype;function h(a,b,c){g.constructor.call(this,b),this.constraint=c,this.nativeErrorName=a,this.message=i(b),this.name=j(a)}h.createFromNative=function(a){var b=a.message,c=a.name;a=a.constraint;return new h(c,b,a||"")};h.prototype.isRecoverableError=function(){return this.name==="InvalidStateError"?!0:!1};h.prototype.getEndCallSubReason=function(){return"MediaFailed: "+this.name+", "+this.constraint};function i(a){switch(a){case"The operation is insecure.":return"The request is not allowed by the user agent or the platform in the current context.";default:return a}}function j(a){switch(a){case"ConstraintNotSatisfiedError":return"OverconstrainedError";case"NO_DEVICES_FOUND":case"DevicesNotFoundError":return"NotFoundError";case"MediaDeviceFailedDueToShutdown":case"MediaDeviceKillSwitchOn":case"TrackStartError":return"NotReadableError";case"PermissionDeniedError":case"PERMISSION_DENIED":case"PermissionDismissedError":return"NotAllowedError";default:return a}}e.exports=h}),null);
__d("generateRTCTransactionID",["randomInt"],(function(a,b,c,d,e,f){"use strict";function a(){return String(b("randomInt")(0,4294967294)+1)}e.exports=a}),null);
__d("RTCUtils",["invariant","Promise","CurrentUser","FBLogger","FBRTCConfig","FBRTCLogger","FBRTCUtils","MediaRequestSourceApp","RTCAudioTrackNoiseDetector","RTCConfig","RTCEndCallReason","RTCMediaDevices","RTCMediaStreamValidator","RTCScreenSharing","RTCUser","RTCUserMediaConstraints","RTCVideoFilterRenderer","RTCVideoTrackActivityDetector","RTWebClientFeatureGating","URI","UserAgent","UserMediaRequestError","generateRTCTransactionID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RTCAudioTrackNoiseDetector").DATA_TIMEOUT_ERROR,i=b("RTCVideoTrackActivityDetector").PLAYBACK_TIMEOUT_ERROR;function j(a,c,d){b("FBRTCLogger").getInstance().logInfo(null,null,{userMediaErrorType:a,errorName:(c==null?void 0:c.name)||"",errorDescription:(c==null?void 0:c.description)||"",initialConstraints:d})}var k={isGroupCall:function(a){return a.split(":")[0]==="GROUP"},isMessengerCall:function(a){return a.split(":")[0]==="MESSENGER"},isBonfireCall:function(a){return!!this.parseBonfireID(a)},isAlohaCall:function(a){return a.split(":")[0]==="ALOHA"},isWatchPartyCall:function(a){return a.split(":")[0]==="WATCH"},isSupportedMWCall:function(a){return k.isGroupCall(a)||k.isMessengerCall(a)||k.isAlohaCall(a)||k.isBonfireCall(a)||k.isWatchPartyCall(a)},parseBonfireID:function(a){a=a.match(/BONFIRE:(\d+)/);return a&&a.length>1?a[1]:null},getPeerID:function(a){if(k.isGroupCall(a))throw new Error("Not a P2P call: "+a);a=a.split(":");a=a.slice(1);return a[0]===b("CurrentUser").getID()?a[1]:a[0]},getMessengerCallID:function(a){if(!k.isMessengerCall(a))throw new Error("Not a Messenger call: "+a);return Number(a.split(":")[1])},getThreadID:function(a){return!k.isGroupCall(a)?null:Number(a.split(":")[1])},getSandboxingTierFromURIOrEmpty:function(a,b){b=b+"=";a=a.split(b);if(a[1]){b=a.pop().split("&").shift();return b}return""},createRequestHeader:function(a,c,d,e,f){__p&&__p();a={type:a,transactionId:b("generateRTCTransactionID")(),retryCount:0,conferenceName:c,clientSessionId:e?e:""};c={};d&&(a.serverInfoData=d);f&&(c.esc_p2p_call_id=f);if(b("RTWebClientFeatureGating").canUseMultiwaySandbox()){e=window.location.href;d=k.getSandboxingTierFromURIOrEmpty(e,"multiway_www_tier");f=k.getSandboxingTierFromURIOrEmpty(e,"multiway_core_tier");d&&(c.multiwayWwwTier=d);f&&(c.multiwayCoreTier=f)}a.extensions=c;return a},createClientContextMessage:function(a,b){a={num_participants:a,trigger:b};b={header:{topic_DEPRECATED:"client_context",shouldSendToAllUsers:!1},body:{genericMessage:{topic:"client_context",data:JSON.stringify(a)}}};return b},createResponseHeader:function(a,b,c){b={type:a.type,transactionId:a.transactionId,retryCount:0,conferenceName:a.conferenceName,responseStatusCode:b,clientSessionId:c?c:""};a.serverInfoData&&(b.serverInfoData=a.serverInfoData);return b},maybeRemoveVideoConstraint:function(a){return b("RTCMediaDevices").enumerateDevices().then(function(b){if(b.some(function(a){return a.kind==="videoinput"}))return a;j("noCameraFallback",null,a);return babelHelpers["extends"]({},a,{video:!1})})["catch"](function(){return b("Promise").resolve(a)})},getUserMediaWithAudioFallback:function(a,b){__p&&__p();return a.video?k.maybeRemoveVideoConstraint(a).then(function(a){return k.getUserMedia(a,b)})["catch"](function(b){__p&&__p();if(a.video){if(b.name==="NotFoundError"||b.name==="StreamFailedToStart"){j("audioFallbackError",b,a);return k.getUserMedia({video:!1,audio:a.audio})}if(b.name==="OverconstrainedError"){j("overConstrainedError",b,a);return k.getUserMedia({video:!0,audio:a.audio})}}j("unknownGetUserMediaError",b,a);throw b}):k.getUserMedia(a,b)},getUserMediaWithFallbackToEmptyVideoConstraints:function(a,b){return k.getUserMedia(a,b)["catch"](function(b){if(a.video&&b.name==="OverconstrainedError")return k.getUserMedia(babelHelpers["extends"]({},a,{video:!0}));throw b})},getUserScreenMedia:function(a,c,d){return b("RTCScreenSharing").getUserMedia(a,c,d)},getUserMedia:function(a,c){__p&&__p();var d=navigator,e=d.mediaDevices;if(typeof a.video==="object"&&a.video.mediaSource){b("FBLogger")("rtc_www").mustfix("Please use %s instead of %s for screen","RTCUtils.getUserScreenMedia()","RTCUtils.getUserMedia()");return b("RTCScreenSharing").getUserMedia(a,b("MediaRequestSourceApp").UNKNOWN)}d=c&&c.optionalConstraintsOnly&&a.video;var f=k._parseConstraints(a,{optionalConstraintsOnly:!!d}),g=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return new(b("Promise"))(function(a,b){e&&typeof e.getUserMedia==="function"?a(e.getUserMedia(f).then(function(a){return k._maybeSupportFilteredStreams(a,!!(c&&c.supportFilteredStreams))})):g?g.call(navigator,f,a,b):b("getUserMedia not supported")})["catch"](function(a){throw b("UserMediaRequestError").createFromNative(a)})},_parseConstraints:function(a,c){if(b("UserAgent").isBrowser("Chrome")||b("UserAgent").isBrowser("Opera")){var d=a.audio,e=a.video,f={};d!==undefined&&(f.audio=b("RTCUserMediaConstraints").chromify(d));e!==undefined&&(f.video=b("RTCUserMediaConstraints").chromify(e,c));return f}return a},_maybeSupportFilteredStreams:function(a,c){return c&&a.getVideoTracks().length>0?b("RTCVideoFilterRenderer").initStreamForFilters(a):a},getUserMediaWithValidation:function(a,c,d,e){__p&&__p();c===void 0&&(c={audio:!0,video:!0});d===void 0&&(d=5);e===void 0&&(e={audio:1e3,video:1e3});return new(b("Promise"))(function(f,g){__p&&__p();var j=function d(j){k.getUserMedia(a).then(function(d){return b("RTCMediaStreamValidator").validate(d,a,c,e).then(function(a){return f({stream:a})})["catch"](function(a){if(a.message===h||a.message===i)f({stream:d,err:a});else{k.stopMediaStream(d);throw a}})},g)["catch"](function(a){j>0?d(j-1):g(a)})};j(d)})},isFullScreen:function(){return Boolean(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullScreen:function(a){a===void 0&&(a=document.documentElement),typeof a.requestFullscreen==="function"?a.requestFullscreen():typeof a.msRequestFullscreen==="function"?a.msRequestFullscreen():typeof a.mozRequestFullScreen==="function"?a.mozRequestFullScreen():typeof a.webkitRequestFullscreen==="function"&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},exitFullScreen:function(){typeof document.exitFullscreen==="function"?document.exitFullscreen():typeof document.msExitFullscreen==="function"?document.msExitFullscreen():typeof document.mozCancelFullScreen==="function"?document.mozCancelFullScreen():typeof document.webkitExitFullscreen==="function"&&document.webkitExitFullscreen()},toggleFullScreen:function(){k.isFullScreen()?k.exitFullScreen():k.requestFullScreen()},endCallReasonFromHangupReason:function(a){return b("RTCEndCallReason").fromHangupReason(a).getReasonID()},endCallReasonFromDismissRequest:function(a){return b("RTCEndCallReason").fromDismissRequest(a).getReasonID()},endCallReasonFromResponseStatusCode:function(a){return b("RTCEndCallReason").fromResponseStatusCode(a).getReasonID()},stopMediaStream:function(a){if(!a.active&&"active"in a)return;a.getTracks().forEach(function(a){a.readyState!=="ended"&&(a.stop(),a.dispatchEvent(new Event("ended")))})},transferAudioTracks:function(a,b){__p&&__p();for(var c=b.getAudioTracks(),d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;a.addTrack(f);b.removeTrack(f)}},payloadParticipantsToRTCUsers:function(a){return a.map(function(a){var c=a.big_image_src||a.image_src;a.fbid||g(0,1174);return new(b("RTCUser"))({FBID:a.fbid,profileUrl:new(b("URI"))(a.href),profilePictureUrl:c,isMessengerUser:!!a.is_messenger_user,isPartiesUser:!!a.is_parties_user,userName:a.name,userShortName:a.short_name,vanity:a.vanity||""})})},getStreamVideoResolution:function(a){return new(b("Promise"))(function(c,d){var e=document.createElement("video");b("FBRTCUtils").attachMediaStream(e,a);var f=function(){e.removeEventListener("loadedmetadata",g),e.removeEventListener("error",h),b("FBRTCUtils").attachMediaStream(e,null)},g=function(){c({height:e.videoHeight,width:e.videoWidth}),f()},h=function(){d(e.error),f()};e.addEventListener("loadedmetadata",g);e.addEventListener("error",h)})},limitFrameRate:function(a){a=a.getVideoTracks();a=a[0];if(a.applyConstraints){var b=a.getConstraints();b.frameRate=15;a.applyConstraints(b)}},isScreenSharingSupported:function(){return b("UserAgent").isBrowser("Chrome")||this.isVCScreenSharingSupported()},isVCScreenSharingSupported:function(){return b("FBRTCConfig").isVCEndpointCall()&&b("RTCConfig").CollabWhitelistedBrowserGK},filterDevicesByKind:function(a,b){return a?a.filter(function(a){return a.kind===b}):[]},showPreCallSetup:function(a){var c=b("FBRTCConfig").getMeetingID()!=null;return!a&&!c?!1:b("RTCConfig").CollabPrecallScreen&&b("FBRTCConfig").isVCEndpointCall()},showPushToTalk:function(){return b("FBRTCConfig").isVCEndpointCall()}};e.exports=k}),null);
__d("FBRTCStatsHelpers",["Promise"],(function(a,b,c,d,e,f){__p&&__p();var g=!1,h=function(a){if(a==="host"||a==="local")return"local";if(a==="serverreflexive")return"srflx";if(a==="peerreflexive")return"prflx";return a==="relayed"||a==="relay"?"relay":"unknown"},i={UNKNOWN_CONNECTION:"l:unknown-unknown;r:unknown-unknown",connectionType:function(a,b,c,d){return a!==null&&a!==undefined&&b!==null&&c!==null&&c!==undefined&&d!==null?["l:",h(a),"-",b,";","r:",h(c),"-",d].join(""):null},getVideoCapabilitiesInfo:function(a){__p&&__p();a=a.getVideoTracks();a=a[0];if(a==null)return null;if(typeof a.getCapabilities!=="function")return null;a=a.getCapabilities();var b=a.aspectRatio,c=a.facingMode,d=a.frameRate,e=a.height;a=a.width;return{facing_mode:(c=c)!=null?c:null,max_aspect_ratio:(c=b==null?void 0:b.max)!=null?c:null,max_frame_rate:(c=d==null?void 0:d.max)!=null?c:null,max_height:(d=e==null?void 0:e.max)!=null?d:null,max_width:(c=a==null?void 0:a.max)!=null?c:null,min_aspect_ratio:(e=b==null?void 0:b.min)!=null?e:null}},getMediaInputs:function(a){var b={audio_inputs:[],video_inputs:[]};a.forEach(function(a){switch(a.kind){case"videoinput":b.video_inputs.push(a.label);break;case"audioinput":b.audio_inputs.push(a.label);break}});return b},logCapabilities:function(a,b,c){a.setVideoCapabilities(i.getVideoCapabilitiesInfo(b)),a.setMediaInputs(i.getMediaInputs(c))},internalGetWindow:function(){return window},getBatteryStats:function(){return new(b("Promise"))(function(a,b){var c=i.internalGetWindow().navigator.getBattery;typeof c==="function"?a(c.call(navigator)):b()}).then(function(a){a.charging?g=!0:a.onchargingchange=function(event){event.target.charging&&(g=!0),event.target.onchargingchange=null};return{level:a.level*100,wasCharged:g}})["catch"](function(){return{placeholder:!0,level:-1,wasCharged:!1}})}};e.exports=i}),null);
__d("RTCConferenceState",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AWAITING_USER_START:"AWAITING_USER_START",CONNECTED:"CONNECTED",CONNECTING:"CONNECTING",NEW:"NEW",RENEGOTIATING:"RENEGOTIATING",TERMINATED:"TERMINATED",TERMINATING:"TERMINATING"})}),null);
__d("FBRTCCallSummaryReducer",["FBRTCCallSummaryStore","FBRTCLogger","FBRTCMediaMetricParser","FBRTCStatsHelpers","RTCCallActionTypes","RTCCallStore","RTCConferenceState","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCLogger").Key;a={setCallSummary:function(a,c){switch(c.type){case b("RTCCallActionTypes").SET_CALL_SUMMARY:return a.set("callSummary",c.callSummary)}return a},onCallStarted:function(a,c){switch(c.type){case b("RTCCallActionTypes").INCOMING_CALL_SUCCESS:case b("RTCCallActionTypes").CALL_SUCCESS:c=function c(){var d=b("RTCCallStore").getState().callInfo.conferenceState;d!==b("RTCConferenceState").TERMINATED&&(a.callSummary.save(b("FBRTCCallSummaryStore").getInstance()),setTimeout(c,1e4))};c();b("FBRTCMediaMetricParser").startCollectingMediaStats();return a}return a},onMessageSignaling:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_JOIN_REQUEST_SENT:a.callSummary.setJoinRequestSent();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").ON_RECEIVED_JOIN_RESPONSE:a.callSummary.setJoinResponseReceived();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").ON_JOIN_RESPONSE:a.callSummary.setServerInfoData(c.serverInfoData);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").ON_PROCESSED_JOIN_RESPONSE:a.callSummary.setJoinResponseProcessed();a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onCallEnded:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").CALL_ERROR:case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").END_CALL:a.callSummary.onCallEnded(c.endCallReason,!1,!1,c.endCallSubreason);b("promiseDone")(b("FBRTCStatsHelpers").getBatteryStats(),function(c){a.callSummary.addExtraInfo("battery_end",c.level),a.callSummary.setDeviceCharged(c.wasCharged),a.callSummary.save(b("FBRTCCallSummaryStore").getInstance())});a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").DISMISS:a.callSummary.onCallEnded(c.endCallReason,!0,!1,c.endCallSubreason);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a},onSurveyResult:function(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").RATING_SHOWN:a.callSummary.addExtraInfo(g.RATING_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").FEEDBACK_SHOWN:a.callSummary.addExtraInfo(g.SURVEY_SHOWN,"1");a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").SUBMIT_RATING:a.callSummary.addExtraInfo(g.RATING,c.rating);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").SUBMIT_FEEDBACK:a.callSummary.addExtraInfo(g.SURVEY_DETAILS,c.feedback);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a;case b("RTCCallActionTypes").SUBMIT_SURVEY_CHOICE:a.callSummary.addExtraInfo(g.SURVEY_CHOICE,c.surveyChoice);a.callSummary.save(b("FBRTCCallSummaryStore").getInstance());return a}return a}};e.exports=a}),null);
__d("RTCGroupCallEscalationActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({GROUP_ESCALATION_START:"GROUP_ESCALATION_START",GROUP_ESCALATION_SUCCESS:"GROUP_ESCALATION_SUCCESS",GROUP_ESCALATION_CANCEL:"GROUP_ESCALATION_CANCEL",GROUP_ESCALATION_SET_USERS_TO_RING:"GROUP_ESCALATION_SET_USERS_TO_RING",GROUP_ESCALATION_CLEAR_P2P_CONNECTION:"GROUP_ESCALATION_CLEAR_P2P_CONNECTION",GROUP_ESCALATION_SET_P2P_CALLSUMMARY:"GROUP_ESCALATION_SET_P2P_CALLSUMMARY",GROUP_ESCALATION_ADD_LOCAL_STREAM:"GROUP_ESCALATION_ADD_LOCAL_STREAM"})}),null);
__d("RTCCallReducer",["invariant","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCParticipantCallState","FBRTCRtcResponseStatusCode","FBRTCScreenSharingUtils","RTCCallActionTypes","RTCCallStore","RTCConferenceState","RTCGroupCallEscalationActionTypes","RTCUser","RTCUtils","RTWebUserActionLogger","URI","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCConstants").SignalingProtocol;function i(a,c){b("RTWebUserActionLogger").logCheckpoint({checkpoint:"stateChange_conferencestate",conferenceState:c});return a.setIn(["callInfo","conferenceState"],c)}function a(a,c){switch(c.type){case b("RTCCallActionTypes").INIT:return a.set("callInfo",a.callInfo.set("callID",c.callID).set("conferenceName",c.conferenceName).set("serverInfoData",c.serverInfoData).set("protocol",c.protocol));case b("RTCCallActionTypes").RESET:return i(a,b("RTCConferenceState").NEW).set("callInfo",a.callInfo.set("callID",c.conferenceName).set("conferenceName",c.conferenceName)).set("callSummary",b("FBRTCCallSummary").nullSummary()).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}))}return a}function c(a,c){switch(c.type){case b("RTCCallActionTypes").CALL:return i(a,b("RTCConferenceState").CONNECTING).set("connections",a.connections.add(c.peerConnection));case b("RTCCallActionTypes").CALL_ERROR:return i(a,b("RTCConferenceState").TERMINATED);case b("RTCCallActionTypes").CALL_SUCCESS:return c.connected?i(a,b("RTCConferenceState").CONNECTED):a}return a}function d(a,c){switch(c.type){case b("RTCCallActionTypes").INCOMING_CALL_SUCCESS:return i(a,b("RTCConferenceState").CONNECTED)}return a}function f(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").HANGUP:a.connections.forEach(function(a){return a.close()});return i(a,b("RTCConferenceState").TERMINATING).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("RTCCallActionTypes").DISMISS:c.transaction.sendResponse(c.request.createResponse(b("FBRTCRtcResponseStatusCode").OK,{callID:a.callInfo.callID}));case b("RTCCallActionTypes").END_CALL:a.connections.forEach(function(a){return a.close()});return i(a,b("RTCConferenceState").TERMINATED).set("connections",b("immutable").Set()).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeAllStreams()}));case b("RTCCallActionTypes").HANGUP_ERROR:case b("RTCCallActionTypes").HANGUP_SUCCESS:return i(a,b("RTCConferenceState").TERMINATED)}return a}function j(a,c){__p&&__p();switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CLEAR_P2P_CONNECTION:var d=b("RTCCallStore").getConnection(h.P2P);if(d){c=d.getRemoteStreams();var e=c[0];d.close();var f=a.localUser;if(!b("FBRTCScreenSharingUtils").isGroupCallScreenSharingSupported()){c=f.getScreenStream();if(c){var g=f.getStream();g&&b("RTCUtils").transferAudioTracks(g,c);b("RTCUtils").stopMediaStream(c);f=f.removeScreenStream(c)}}return a.withMutations(function(a){a.set("connections",a.connections.remove(d)).set("localUser",f).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(e)}))})}}return a}function k(a,c){__p&&__p();switch(c.type){case b("RTCGroupCallEscalationActionTypes").GROUP_ESCALATION_CANCEL:var d=b("RTCCallStore").getConnection(h.MULTIWAY);if(d){var e=d.getRemoteStreams(),f=e[0],g=a.callSummary;c.p2pCallSummary&&(g=c.p2pCallSummary,b("FBRTCCallSummaryStore").getInstance().removeCallSummary(a.callSummary.peerID,a.callSummary.callID));d.close();b("RTWebUserActionLogger").logCheckpoint({checkpoint:"stateChange_conferencestate",conferenceState:b("RTCConferenceState").CONNECTED});return a.withMutations(function(a){a.set("callInfo",a.callInfo.set("conferenceState",b("RTCConferenceState").CONNECTED).set("conferenceName",g.callID).set("protocol","p2p").set("serverInfoData","")).set("callSummary",g).set("connections",a.connections.remove(d)).set("remoteUsers",a.remoteUsers.map(function(a){return a.removeStream(f)}))})}}return a}function l(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_PARTICIPANTS_ADDED:var d=a.remoteUsers.map(function(a){return a.FBID});return a.set("remoteUsers",a.remoteUsers.union(Object.keys(c.participants).filter(function(a){return!d.has(c.participants[a].fbid)}).map(function(a){var d=c.participants[a],e=d.big_image_src||d.image_src;c.images&&c.images[a]&&(e=c.images[a]);d.fbid||g(0,1174);return new(b("RTCUser"))({FBID:d.fbid,profileUrl:new(b("URI"))(d.href),profilePictureUrl:e,isMessengerUser:!!d.is_messenger_user,isPartiesUser:!!d.is_parties_user,userName:d.name,userShortName:d.short_name,vanity:d.vanity})})))}return a}function m(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ON_CONFERENCE_STATE:var d=c.transaction,e=c.request,f=c.request.conferenceStateRequest();if(c.conferenceStateVersion>=f.version){d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return a}c.resolve(f.version);var g=a.remoteUsers.map(function(a){var b=f.participantStates[a.FBID];return b?a.setParticipantState(b):a}),h=g.some(function(a){a=a.participantState;return a&&a.state===b("FBRTCParticipantCallState").CONNECTED});h=h?b("RTCConferenceState").CONNECTED:a.callInfo.conferenceState;d.sendResponse(e.createResponse(b("FBRTCRtcResponseStatusCode").OK,{body:{ConferenceStateResponse:{currentVerison:c.conferenceStateVersion}},callID:a.callInfo.callID}));return i(a,h).setIn(["remoteUsers"],g)}return a}function n(a,c){switch(c.type){case b("RTCCallActionTypes").ON_JOIN_RESPONSE:return a.setIn(["callInfo","serverInfoData"],c.serverInfoData)}return a}function o(a,c){switch(c.type){case b("RTCCallActionTypes").INIT_LOCAL_USER:return a.set("localUser",c.localUser);case b("RTCCallActionTypes").INIT_REMOTE_USERS:case b("RTCCallActionTypes").UPDATE_REMOTE_USERS:return a.set("remoteUsers",c.remoteUsers)}return a}function p(a,c){switch(c.type){case b("RTCCallActionTypes").AUDIO_MUTED:case b("RTCCallActionTypes").AUDIO_UNMUTED:return a.set("localUser",a.localUser.toggleMuteAudio());case b("RTCCallActionTypes").VIDEO_MUTED:return a.set("localUser",a.localUser.toggleMuteVideo(!0));case b("RTCCallActionTypes").VIDEO_UNMUTED:return a.set("localUser",a.localUser.toggleMuteVideo(!1));default:return a}}function q(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ADD_LOCAL_STREAM:return a.set("localUser",a.localUser.addStream(c.stream));case b("RTCCallActionTypes").REMOVE_LOCAL_STREAM:return a.set("localUser",a.localUser.removeStream(c.stream));case b("RTCCallActionTypes").REPLACE_LOCAL_STREAM:var d=c.oldStream.getAudioTracks();d=d[0];if(d!=null)for(var e=c.newStream.getAudioTracks(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;h.enabled=d.enabled}return a.set("localUser",a.localUser.replaceStream(c.oldStream,c.newStream));case b("RTCCallActionTypes").STOP_LOCAL_STREAM:return a.set("localUser",a.localUser.stopVideo());case b("RTCCallActionTypes").REMOVE_ALL_LOCAL_STREAMS:if(c.stopStreams)for(var h=a.localUser.streams,g=Array.isArray(h),f=0,h=g?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(g){if(f>=h.length)break;e=h[f++]}else{f=h.next();if(f.done)break;e=f.value}d=e;b("RTCUtils").stopMediaStream(d)}return a.set("localUser",a.localUser.removeAllStreams())}return a}function r(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").ADD_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.addScreenStream(c.stream));case b("RTCCallActionTypes").REMOVE_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.removeScreenStream(c.stream));case b("RTCCallActionTypes").REMOVE_ALL_LOCAL_SCREEN_STREAMS:if(c.stopStreams)for(var d=a.localUser.screenStreams,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("RTCUtils").stopMediaStream(g)}return a.set("localUser",a.localUser.removeAllScreenStreams());case b("RTCCallActionTypes").REPLACE_LOCAL_SCREEN_STREAM:return a.set("localUser",a.localUser.replaceScreenStream(c.oldStream,c.newStream))}return a}function s(a,c){__p&&__p();var d;switch(c.type){case b("RTCCallActionTypes").ADD_REMOTE_STREAM:d=w(a,c);if(!d)return a;var e=a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.addStream(c.stream)));return v(e,{type:b("RTCCallActionTypes").TOGGLE_REMOTE_STREAM,mediaStatus:e.mediaStatus.toJS()});case b("RTCCallActionTypes").REMOVE_REMOTE_STREAM:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeStream(c.stream)));case b("RTCCallActionTypes").REMOVE_ALL_REMOTE_STREAMS:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeAllStreams().removeAllScreenStreams()))}return a}function t(a,c){var d;switch(c.type){case b("RTCCallActionTypes").ADD_REMOTE_TRACK:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.clone()));case b("RTCCallActionTypes").REMOVE_REMOTE_TRACK:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.clone()))}return a}function u(a,c){var d;switch(c.type){case b("RTCCallActionTypes").ADD_REMOTE_SCREEN_STREAM:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.addScreenStream(c.stream)));case b("RTCCallActionTypes").REMOVE_REMOTE_SCREEN_STREAM:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.removeScreenStream(c.stream)))}return a}function v(a,c){__p&&__p();var d;switch(c.type){case b("RTCCallActionTypes").TOGGLE_REMOTE_STREAM:return a.set("remoteUsers",Object.entries(c.mediaStatus).reduce(function(b,c){__p&&__p();var d=c[0];c=c[1];var e=b.reduce(function(b,a){var c=a.streams.map(function(a){return a.getTracks().find(function(a){return a.id===d})}).find(Boolean);return c?{user:a,track:c}:b},{}),a=e.user;e=e.track;if(a&&e){if(e.kind==="audio"&&a.isAudioMuted()===c)return b["delete"](a).add(a.toggleMuteAudio());if(e.kind==="video"&&a.isVideoMuted()===c)return b["delete"](a).add(a.toggleMuteVideo(!a.isVideoMuted()))}return b},a.remoteUsers)).set("mediaStatus",b("immutable").Map(c.mediaStatus));case b("RTCCallActionTypes").REMOTE_AUDIO_MUTED:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!0)));case b("RTCCallActionTypes").REMOTE_AUDIO_UNMUTED:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteAudio(!1)));case b("RTCCallActionTypes").REMOTE_VIDEO_MUTED:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!0)));case b("RTCCallActionTypes").REMOTE_VIDEO_UNMUTED:d=w(a,c);return!d?a:a.setIn(["remoteUsers"],a.remoteUsers["delete"](d).add(d.toggleMuteVideo(!1)))}return a}function w(a,b){return a.remoteUsers.find(function(a){return b.userID?a.FBID==b.userID:a.FBID===b.stream.id.split(":")[0]})}function x(a,c){switch(c.type){case b("RTCCallActionTypes").WAIT_FOR_USER_INPUT:return a.callInfo.conferenceState===b("RTCConferenceState").NEW?i(a,b("RTCConferenceState").AWAITING_USER_START):a}return a}e.exports={abortMultiwayEscalationProcess:k,callInit:a,callStart:c,callEnd:f,completeTransitionToMultiway:j,onParticipantsChanged:l,incomingCallStart:d,processUsers:o,toggleLocalStream:p,processLocalStream:q,processLocalScreenStream:r,processRemoteStream:s,processRemoteScreenStream:u,processRemoteTrack:t,toggleRemoteStream:v,processConferenceState:m,processJoinResponse:n,waitForUserInput:x}}),null);
__d("RTCCoExperienceActionTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({TOGGLE_CHAT_WINDOW:"TOGGLE_CHAT_WINDOW",SET_FILTER:"SET_FILTER"})}),null);
__d("RTCExpressionIntent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({EFFECT:"effect",CHAT:"chat",SCREENSHARE:"screenshare"})}),null);
__d("RTCCallStoreState",["CurrentUser","FBRTCCallSummary","RTCConferenceState","RTCUser","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;d={debugID:0,callID:"",conferenceState:b("RTCConferenceState").NEW,conferenceName:"",protocol:"",serverInfoData:""};g=babelHelpers.inherits(a,b("immutable").Record(d));g&&g.prototype;function a(){g.apply(this,arguments)}f={connections:b("immutable").Set(),localUser:new(b("RTCUser"))({FBID:b("CurrentUser").getID()}),remoteUsers:b("immutable").Set(),callInfo:new a(),callSummary:b("FBRTCCallSummary").nullSummary(),mediaStatus:b("immutable").Map()};h=babelHelpers.inherits(c,b("immutable").Record(f));h&&h.prototype;function c(){h.apply(this,arguments)}e.exports=c}),null);
__d("RTCExpressionAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({ENABLED:"enabled",DISABLED:"disabled"})}),null);
__d("RtcExpressionWWWTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RtcExpressionWWWLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RtcExpressionWWWLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RtcExpressionWWWLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAuthFlag=function(a){this.$1.auth_flag=a;return this};a.prototype.setBundleID=function(a){this.$1.bundle_id=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setConferenceName=function(a){this.$1.conference_name=a;return this};a.prototype.setOsBuildNumber=function(a){this.$1.os_build_number=a;return this};a.prototype.setPeerID=function(a){this.$1.peer_id=a;return this};a.prototype.setRadioType=function(a){this.$1.radio_type=a;return this};a.prototype.setRawClientTime=function(a){this.$1.raw_client_time=a;return this};a.prototype.setRtcExpressionAction=function(a){this.$1.rtc_expression_action=a;return this};a.prototype.setRtcExpressionDuration=function(a){this.$1.rtc_expression_duration=a;return this};a.prototype.setRtcExpressionID=function(a){this.$1.rtc_expression_id=a;return this};a.prototype.setRtcExpressionIntent=function(a){this.$1.rtc_expression_intent=a;return this};a.prototype.setRtcExpressionName=function(a){this.$1.rtc_expression_name=a;return this};a.prototype.setRtcExpressionParticipantCount=function(a){this.$1.rtc_expression_participant_count=a;return this};a.prototype.setRtcExpressionType=function(a){this.$1.rtc_expression_type=a;return this};a.prototype.setSamplingFrequency=function(a){this.$1.sampling_frequency=a;return this};c={auth_flag:!0,bundle_id:!0,call_id:!0,conference_name:!0,os_build_number:!0,peer_id:!0,radio_type:!0,raw_client_time:!0,rtc_expression_action:!0,rtc_expression_duration:!0,rtc_expression_id:!0,rtc_expression_intent:!0,rtc_expression_name:!0,rtc_expression_participant_count:!0,rtc_expression_type:!0,sampling_frequency:!0};e.exports=a}),null);
__d("RTCExpressionWWWLogger",["invariant","FBRTCConsoleLogger","FBRTCParticipantCallState","RTCCallStoreState","RTCExpressionAction","RtcExpressionWWWTypedLogger","immutable","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Map;function a(){this.$1=h()}a.prototype.logStartTimer=function(event){var a=b("performanceNow")(),c=event.rtcExpressionIntent;this.$1=this.$1.set(c,a);event.rtcExpressionAction=b("RTCExpressionAction").ENABLED;this.logEvent(event);this.$2(c,{startTime:a})};a.prototype.$3=function(a){var c=this.$1.get(a);c||g(0,2586);this.$1=this.$1.remove(a);return parseInt(b("performanceNow")()-c,10)};a.prototype.logStopTimer=function(event){var a=event.rtcExpressionIntent;a=this.$3(a);event.rtcExpressionDuration=a;event.rtcExpressionAction=b("RTCExpressionAction").DISABLED;this.logEvent(event);return a};a.prototype.logEvent=function(event){var a=new(b("RtcExpressionWWWTypedLogger"))().setCallID(event.callID||123).setConferenceName(event.conferenceName).setPeerID(event.peerID).setRawClientTime(b("performanceNow")()).setRtcExpressionAction(event.rtcExpressionAction).setRtcExpressionDuration(event.rtcExpressionDuration).setRtcExpressionID(event.rtcExpressionId).setRtcExpressionIntent(event.rtcExpressionIntent).setRtcExpressionName(event.rtcExpressionName).setRtcExpressionParticipantCount(event.rtcExpressionParticipantCount).setRtcExpressionType(event.rtcExpressionType),c=a.getData();this.$2(event.rtcExpressionName,c);a.log()};a.prototype.getExpressionLoggerInfoFromStore=function(a){var c=a.callInfo,d=c.callID;c=c.conferenceName;a=a.remoteUsers;a=a.filter(function(a){return a.getParticipantState()===b("FBRTCParticipantCallState").CONNECTED}).size+1;return{callID:d,conferenceName:c,rtcExpressionParticipantCount:a}};a.prototype.$2=function(a,b){};e.exports=new a()}),null);
__d("RTCCoExperienceReducer",["RTCCallActionTypes","RTCCallStore","RTCCoExperienceActionTypes","RTCCoExperienceStore","RTCExpressionIntent","RTCExpressionWWWLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c){switch(c.type){case b("RTCCoExperienceActionTypes").TOGGLE_CHAT_WINDOW:c=b("RTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("RTCCallStore").getState());a.chatWindowVisible?b("RTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:b("RTCExpressionIntent").CHAT})):b("RTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},c,{rtcExpressionName:"chat",rtcExpressionIntent:b("RTCExpressionIntent").CHAT}));return a.set("chatWindowVisible",!a.chatWindowVisible);default:return a}}function c(a,c){__p&&__p();switch(c.type){case b("RTCCallActionTypes").HANGUP:case b("RTCCallActionTypes").END_CALL:case b("RTCCallActionTypes").HANGUP_ERROR:case b("RTCCallActionTypes").HANGUP_SUCCESS:case b("RTCCoExperienceActionTypes").SET_FILTER:var d=b("RTCExpressionWWWLogger").getExpressionLoggerInfoFromStore(b("RTCCallStore").getState()),e=a.currentVideoFilter,f=a.videoFilterHistory;if(e){var g=b("RTCExpressionWWWLogger").logStopTimer(babelHelpers["extends"]({},d,{rtcExpressionName:e,rtcExpressionIntent:b("RTCExpressionIntent").EFFECT})),h=f.get(e)||0;f=f.set(e,h+g);b("RTCCoExperienceStore").logCoExperienceDurationToSummary(f)}c.filter&&b("RTCExpressionWWWLogger").logStartTimer(babelHelpers["extends"]({},d,{rtcExpressionName:c.filter,rtcExpressionIntent:b("RTCExpressionIntent").EFFECT}));return a.set("currentVideoFilter",c.filter).set("videoFilterHistory",f);default:return a}}e.exports={processChatWindowToggle:a,processSetVideoFilter:c}}),null);
__d("RTCAppDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationDispatcher"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!0})}),null);
__d("RTCCallStore",["FBRTCCallSummaryReducer","FBRTCCallSummaryStore","FluxReduceStore","MessengerRTCFunnelLogger","RTCAppDispatcher","RTCCallReducer","RTCCallStoreState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("FBRTCCallSummaryReducer").onCallEnded,b("FBRTCCallSummaryReducer").onCallStarted,b("FBRTCCallSummaryReducer").onMessageSignaling,b("FBRTCCallSummaryReducer").onSurveyResult,b("FBRTCCallSummaryReducer").setCallSummary,b("RTCCallReducer").abortMultiwayEscalationProcess,b("RTCCallReducer").callEnd,b("RTCCallReducer").callInit,b("RTCCallReducer").callStart,b("RTCCallReducer").completeTransitionToMultiway,b("RTCCallReducer").incomingCallStart,b("RTCCallReducer").onParticipantsChanged,b("RTCCallReducer").processConferenceState,b("RTCCallReducer").processJoinResponse,b("RTCCallReducer").processLocalScreenStream,b("RTCCallReducer").processLocalStream,b("RTCCallReducer").processRemoteScreenStream,b("RTCCallReducer").processRemoteStream,b("RTCCallReducer").processRemoteTrack,b("RTCCallReducer").processUsers,b("RTCCallReducer").toggleLocalStream,b("RTCCallReducer").toggleRemoteStream,b("RTCCallReducer").waitForUserInput,b("MessengerRTCFunnelLogger").logRTCCallAction];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCCallStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.hasRemoteVideo=function(){return this.getState().remoteUsers.some(function(a){return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())})};a.prototype.hasLocalVideo=function(){var a=this.getState();a=a.localUser;return a.hasStream()&&!a.areAllTracksMuted(a.streams.first().getVideoTracks())};a.prototype.getConnection=function(a){var b=this.getState();b=b.connections;a&&(b=b.filter(function(b){return b.getSignalingProtocol()===a}));return b.first()};a.prototype.mutateCallSummary=function(a){var c=this.getState();c=c.callSummary;a(c);c.save(b("FBRTCCallSummaryStore").getInstance())};a.prototype.getSortedRemoteUsers=function(){return this.getState().remoteUsers.toList().sort(function(a,b){return a.lastConnectedAt===b.lastConnectedAt?a.FBID>b.FBID?1:-1:a.lastConnectedAt-b.lastConnectedAt})};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCCoExperienceStoreState",["immutable"],(function(a,b,c,d,e,f){"use strict";var g;c={chatWindowVisible:!1,currentVideoFilter:null,videoFilterHistory:b("immutable").Map()};g=babelHelpers.inherits(a,b("immutable").Record(c));g&&g.prototype;function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("RTCCoExperienceStore",["FBRTCCallSummaryStore","FluxReduceStore","RTCAppDispatcher","RTCCallStore","RTCCoExperienceReducer","RTCCoExperienceStoreState","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[b("RTCCoExperienceReducer").processChatWindowToggle,b("RTCCoExperienceReducer").processSetVideoFilter];g=babelHelpers.inherits(a,b("FluxReduceStore"));g&&g.prototype;a.prototype.getInitialState=function(){return new(b("RTCCoExperienceStoreState"))()};a.prototype.reduce=function(a,b){return h.reduce(function(a,c){return c(a,b)},a)};a.prototype.logCoExperienceDurationToSummary=function(a){var c=b("RTCCallStore").getState();c=c.callSummary;c.setEffectCount(a.size);var d=0;a.reduce(function(a,b){d+=b},0);c.setTotalVideoFilterDuration(d);c.setCoExperienceEffectDuration(d);c.save(b("FBRTCCallSummaryStore").getInstance())};function a(){g.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("RTCAppDispatcher"))}),null);
__d("RTCCoExperienceActions",["RTCAppDispatcher","RTCCoExperienceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={toggleChatWindow:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").TOGGLE_CHAT_WINDOW})},setVideoFilter:function(a){b("RTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").SET_FILTER,filter:a})},removeVideoFilter:function(){b("RTCAppDispatcher").dispatch({type:b("RTCCoExperienceActionTypes").SET_FILTER,filter:null})}};e.exports=a}),null);
__d("RTCVideoFilterRenderer",["invariant","FBRTCUtils","RTCCallStore","RTCCoExperienceActions","RTCCoExperienceStore","RTCVideoFilterConfig"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("FBRTCUtils").attachMediaStream,i=b("RTCVideoFilterConfig").config,j=30;k.initStreamForFilters=function(a){a=k.initFilters(a);return a};k.applyStreamEffect=function(a){k.createEffectElement(a),b("RTCCoExperienceActions").setVideoFilter(a),k.applyFilters()};k.removeStreamEffect=function(){b("RTCCoExperienceActions").removeVideoFilter(),k.applyFilters()};k.initCanvas=function(a){__p&&__p();var b=document.createElement("canvas"),c=document.createElement("video");b.className="filteredCanvas";c.className="filteredVideo";h(c,a);c.muted=!0;c.play();b.width=a.getVideoTracks()[0].getSettings().width;b.height=a.getVideoTracks()[0].getSettings().height;a=document;a=a.body;a!=null||g(0,2402);a.append(b);a.append(c);return{cvs:b,vid:c}};k.initFilters=function(a){__p&&__p();var b;!document.querySelector("canvas.filteredCanvas")||!document.querySelector("video.filteredVideo")?b=k.initCanvas(a).cvs:b=document.querySelector("canvas.filteredCanvas");if(b===null)return a;b=b.captureStream(j).getVideoTracks()[0];if(!b)return a;k.startApplyingFilters(a);var c=new MediaStream([a.getAudioTracks()[0],b]);b.addEventListener("ended",function(b){a.getVideoTracks().forEach(function(a){a.readyState!=="ended"&&a.stop()})});return c};k.startApplyingFilters=function(a){if(window.MediaRecorder!==undefined){a=new MediaRecorder(a);a.ondataavailable=k.applyFilters;a.start(Math.floor(1e3/j))}else{a=function a(){k.applyFilters(),requestAnimationFrame(a)};a()}};k.applyFilters=function(){__p&&__p();var a=b("RTCCallStore").getState().localUser.isVideoMuted(),c=document.querySelector("canvas.filteredCanvas"),d=document.querySelector("video.filteredVideo");if(a||c==null||d==null)return;a=d.videoWidth;var e=d.videoHeight;if(a>0&&e>0){c=c.getContext("2d");c.drawImage(d,0,0,a,e);d=b("RTCCoExperienceStore").getState().currentVideoFilter;if(d){d=document.querySelector("video."+(d?d:""));c.drawImage(d,0,0,a,e)}else if(window.native_bindings&&window.enable_native_filter_demo){d=c.getImageData(0,0,a,e);window.native_bindings.process_frame(d.data,a,e,120);c.putImageData(d,0,0)}}};k.createEffectElement=function(a){__p&&__p();if(document.querySelector("video."+a))return null;var b=document.createElement("video");b.className=a;b.crossOrigin="anonymous";b.src=i[a].video_url;b.play();b.autoplay=!0;b.loop=!0;a=document;a=a.body;a!=null||g(0,2402);a.append(b);return b};function k(){}e.exports=k}),null);
__d("RTWebClientFeatureGating",["CurrentUser","FBRTCConfig","FBRTCExperiment","FBRTCSupport","URI","gkx","isBonfireURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={addScreenContentTypeInSDP:function(){return b("gkx")("678343")},doubleSelfViewSize:function(){return!g.isRTCWebHoldOut()},draggableSelfView:function(){return b("FBRTCExperiment").gen("rtc_www_larger_self_view").getBool("draggable_self_view",!1)},endCallSurveyDropdownOptions:function(){return b("FBRTCExperiment").gen("rtc_www_p2p_end_call_screen").getBool("survey_dropdown",!1)},fixedHeightGridView:function(){return b("FBRTCExperiment").gen("rtc_www_fixed_height_grid_view").getBool("fixed_height_grid_view",!1)},fixMLineInRemoveCodex:function(){return b("gkx")("678344")},canUseMWVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&!b("isBonfireURI")(b("URI").getRequestURI())&&b("FBRTCSupport").isVideoFilterEffectSupported()&&b("FBRTCExperiment").gen("rtc_www_video_chat_filters").getBool("use_filters_mw",!1)},isRTCWebHoldOut:function(){return b("gkx")("678345")},isChatEnabled:function(){return b("FBRTCConfig").isVCEndpointCall()||g.isRTCWebHoldOut()?!1:b("FBRTCExperiment").gen("rtc_www_show_chat_while_in_call").getBool("show_chat",!0)},isGroupChatEnabled:function(){return b("FBRTCExperiment").gen("rtc_www_show_chat_while_in_call").getBool("show_chat_for_mw",!1)},canUseP2PVideoFilters:function(){return!b("CurrentUser").isWorkUser()&&b("FBRTCSupport").isVideoFilterEffectSupported()&&b("gkx")("678346")&&!this.stopVideoWhenMute()},isGuestLoginEnabled:function(){return b("gkx")("678347")},useNewIncomingCallDialog:function(){return b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_new_incoming_call_dialog",!1)},answerCallWithThreeButtons:function(){return b("FBRTCExperiment").getIncomingCallExperiments().getBool("use_three_buttons",!1)},callUnification:function(){return b("FBRTCExperiment").gen("rtc_www_call_unification").getBool("in_call_background_updated",!1)},waitForMediaPermission:function(){return b("gkx")("678348")},shouldUseRealMultiwayAppID:function(){return b("gkx")("678349")},canUseMultiwaySandbox:function(){return b("gkx")("678350")},stopVideoWhenMute:function(){if(b("FBRTCConfig").isVCEndpointCall())return!1;var a=b("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("camera_off",!1)},restartVideoWithTrackAPI:function(){var a=b("FBRTCExperiment").gen("turnoff_camera_when_facemute");return a.getBool("track_api",!1)},shouldAlwaysShowRedial:function(){return b("FBRTCExperiment").gen("rtc_www_p2p_end_call_screen").getBool("persist_redial_in_footer",!1)},disableOpusStereo:function(){return b("gkx")("678351")}};e.exports=g}),null);
__d("FBRTCScreenSharingUtils",["FBRTCExperiment","FBRTCSupport","FBRTCVersionDetection","RTCConfig","RTCUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={RECIPIENT:"SC_CONTENT_SCRIPT",isScreenSharingSupported:function(){return b("RTCConfig").ScreenSharingGK},isGroupCallScreenSharingSupported:function(){return b("RTCConfig").ScreenSharingToGroupGK},isSupportedBrowser:function(){return b("FBRTCVersionDetection").isChrome()&&b("FBRTCVersionDetection").webrtcVersion()>=34},canUserReceiveScreenSharing:function(){return!b("FBRTCSupport").isMobileDevice()&&(b("FBRTCVersionDetection").isChromium()&&b("FBRTCVersionDetection").webrtcVersion()>=34||b("RTCUtils").isVCScreenSharingSupported())},canPeerReceiveScreenSharing:function(a){if(a.remoteSupport("screen_sharing"))return!0;if(!a.remoteSupport("www")&&!a.remoteSupport("mweb")){if(b("RTCConfig").ScreenSharingToMobileGK)return!0;a=b("FBRTCExperiment").gen("webrtc_enable_screen_sharing");return a.getBool("can_share_to_mobile",!1)}return!1}};e.exports=a}),null);
__d("VFDesktopHelper",["regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={isDesktopApp:function(){return window.messengervideo!==undefined},getScreenSharingSourceID:function(){return window.messengervideo.getScreenSharingSourceID()},stopScreenSharing:function(){return window.messengervideo.stopScreenSharing()},restoreFromMiniView:function(){window.messengervideo!==undefined&&window.messengervideo.restoreFromMiniView()},getOpenAtLogin:function(){return window.messengervideo.getOpenAtLogin()},setOpenAtLogin:function(a){g.isDesktopApp()&&window.messengervideo.setOpenAtLogin(a)},openContextMenu:function(a){if(g.isDesktopApp()){a=a.map(function(a){var b=a.label;a=babelHelpers.objectWithoutProperties(a,["label"]);return babelHelpers["extends"]({},a,{label:b.toString()})});window.messengervideo.openContextMenu(a)}},showIncomingCallDialog:function(a,c,d,e){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",window.messengervideo.showIncomingCallDialog(a,c,d,e));case 1:case"end":return b.stop()}},null,this)},dismissIncomingCallDialog:function(){window.messengervideo.dismissIncomingCallDialog()},hideSplash:function(){g.isDesktopApp()&&window.messengervideo.hideSplash!==undefined&&window.messengervideo.hideSplash()},hideSplashAfterLoad:function(){window.addEventListener("load",this.hideSplash)}};e.exports=g}),null);
__d("RTCScreenSharing",["Promise","CollabRTCChromeScreenSharing","RTCUserMediaConstraints","RTCUtils","UserAgent","VFDesktopHelper","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="SCREEN_SHARING_NOT_SUPPORTED",h="UNEXPECTED_ERROR",i={SCREEN_SHARING_NOT_SUPPORTED:g,getUserMedia:function(a,c,d){__p&&__p();if(b("UserAgent").isBrowser("Chrome")){var e;b("WorkplaceChatHelper").isDesktopChatApp()?e=b("WorkplaceChatHelper").getScreenSharingSourceID():b("VFDesktopHelper").isDesktopApp()?e=b("VFDesktopHelper").getScreenSharingSourceID():e=b("CollabRTCChromeScreenSharing").getSourceID(d,c);return e.then(function(c){return b("RTCUtils").getUserMedia(b("RTCUserMediaConstraints").chromeMediaSource(a,c))}).then(function(a){__p&&__p();for(var b=a.getTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.addEventListener("ended",function(b){return setTimeout(function(){a.active||i.stop()})})}return a})}else if(b("RTCUtils").isVCScreenSharingSupported()&&navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia==="function")return b("Promise").resolve(navigator.mediaDevices.getUserMedia(a)["catch"](function(a){if(a.name==="NotAllowedError")throw new Error(g)}));return b("Promise").reject(new Error(g))},stop:function(){if(b("UserAgent").isBrowser("Chrome")){if(b("WorkplaceChatHelper").isDesktopChatApp())return b("WorkplaceChatHelper").stopScreenSharing();return b("VFDesktopHelper").isDesktopApp()?b("VFDesktopHelper").stopScreenSharing():b("CollabRTCChromeScreenSharing").stop()}return b("Promise").reject(new Error(h))}};e.exports=i}),null);
__d("FBRTCChromeMediaStatsReport",["FBRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b){return a&&a[b]!=null&&a[b]!==""?a[b]:null}function h(a,b){return a&&a[b]!=null&&a[b]!==""?Number(a[b]):null}function a(a){__p&&__p();this.$1={};this.$2={};this.$3={};this.$4={};this.$5={};this.$6=[];if(a)for(var a=a.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.type==="ssrc"&&d.audioOutputLevel!=null&&d.audioOutputLevel!==""?this.$1[d.id]=d:d.type==="ssrc"&&d.audioInputLevel!=null&&d.audioInputLevel!==""?this.$2[d.id]=d:d.type==="ssrc"&&d.mediaType==="video"?d.bytesReceived!=null?this.$3[d.id]=d:this.$4[d.id]=d:d.type==="VideoBwe"?this.$5[d.id]=d:d.type==="googCandidatePair"&&d.googActiveConnection!==null&&d.googActiveConnection==="true"&&this.$6.push(d)}}a.prototype.getAudioSendKeys=function(){return Object.keys(this.$2)};a.prototype.getAudioRecvKeys=function(){return Object.keys(this.$1)};a.prototype.getVideoRecvKeys=function(){return Object.keys(this.$3)};a.prototype.getVideoSendKeys=function(){return Object.keys(this.$4)};a.prototype.getVideoBweKeys=function(){return Object.keys(this.$5)};a.prototype.getAudioBytesSent=function(a){return h(this.$2[a],"bytesSent")};a.prototype.getAudioDecodingPLC=function(a){return h(this.$1[a],"googDecodingPLC")};a.prototype.getAudioDecodingPLCCNG=function(a){return h(this.$1[a],"googDecodingPLCCNG")};a.prototype.getAudioDecodingCNG=function(a){return h(this.$1[a],"googDecodingCNG")};a.prototype.getAudioDecodingNormal=function(a){return h(this.$1[a],"googDecodingNormal")};a.prototype.getAudioPacketsSentLost=function(a){return h(this.$2[a],"packetsLost")};a.prototype.getAudioPacketsSent=function(a){return h(this.$2[a],"packetsSent")};a.prototype.getAudioSendRtt=function(a){return h(this.$2[a],"googRtt")};a.prototype.getAudioBytesReceived=function(a){return h(this.$1[a],"bytesReceived")};a.prototype.getAudioPacketsReceived=function(a){return h(this.$1[a],"packetsReceived")};a.prototype.getAudioPacketsReceivedLost=function(a){return h(this.$1[a],"packetsLost")};a.prototype.getAudioReceivedRtt=function(a){return h(this.$1[a],"googRtt")};a.prototype.getVideoBytesReceived=function(a){return h(this.$3[a],"bytesReceived")};a.prototype.getVideoPacketsReceived=function(a){return h(this.$3[a],"packetsReceived")};a.prototype.getVideoPacketsReceivedLost=function(a){return h(this.$3[a],"packetsLost")};a.prototype.getFramesDecoded=function(a){return h(this.$3[a],"framesDecoded")};a.prototype.getInboundQpSum=function(a){return h(this.$3[a],"qpSum")};a.prototype.getVideoFrameHeightReceived=function(a){return h(this.$3[a],"googFrameHeightReceived")};a.prototype.getVideoFrameRateReceived=function(a){return h(this.$3[a],"googFrameRateReceived")};a.prototype.getVideoFrameWidthReceived=function(a){return h(this.$3[a],"googFrameWidthReceived")};a.prototype.getFramesEncoded=function(a){return h(this.$4[a],"framesEncoded")};a.prototype.getVideoBytesSent=function(a){return h(this.$4[a],"bytesSent")};a.prototype.getVideoFrameHeightSent=function(a){return h(this.$4[a],"googFrameHeightSent")};a.prototype.getVideoFrameRateSent=function(a){return h(this.$4[a],"googFrameRateSent")};a.prototype.getVideoFrameWidthSent=function(a){return h(this.$4[a],"googFrameWidthSent")};a.prototype.getVideoPacketsSent=function(a){return h(this.$4[a],"packetsSent")};a.prototype.getVideoPacketsSentLost=function(a){return h(this.$4[a],"packetsLost")};a.prototype.getVideoSentRtt=function(a){return h(this.$4[a],"googRtt")};a.prototype.getOutboundQpSum=function(a){return h(this.$4[a],"qpSum")};a.prototype.getAudioJitter=function(a){return h(this.$1[a],"googJitterReceived")};a.prototype.getJitterBufferDelay=function(a){return h(this.$1[a],"googCurrentDelayMs")};a.prototype.getAccelerateRate=function(a){return h(this.$1[a],"googAccelerateRate")};a.prototype.getPreemptiveExpandRate=function(a){return h(this.$1[a],"googPreemptiveExpandRate")};a.prototype.getExpandRate=function(a){return h(this.$1[a],"googExpandRate")};a.prototype.getDiscardRate=function(a){return h(this.$1[a],"googSecondaryDiscardedRate")};a.prototype.getVideoBweRetransmitBitrate=function(a){return h(this.$5[a],"googRetransmitBitrate")};a.prototype.getVideoBweSendBandwidth=function(a){return h(this.$5[a],"googAvailableSendBandwidth")};a.prototype.getVideoBweTransmitBitrate=function(a){return h(this.$5[a],"googTransmitBitrate")};a.prototype.getVideoRecvCodec=function(a){return g(this.$3[a],"googCodecName")};a.prototype.getVideoSendCodec=function(a){return g(this.$4[a],"googCodecName")};a.prototype.getConnectionType=function(){var a=null;this.$6.some(function(c){a=b("FBRTCStatsHelpers").connectionType(g(c,"googLocalCandidateType"),g(c,"googTransportType"),g(c,"googRemoteCandidateType"),g(c,"googTransportType"));return a!==null});if(a!==null)return a;else return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};e.exports=a}),null);
__d("FBRTCMozMediaStatsReport",["FBRTCStatsHelpers"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,b){return a&&a[b]!=null&&a[b]!==""?a[b]:null}function h(a,b){return a&&a[b]!=null&&a[b]!==""?Number(a[b]):null}function a(a){__p&&__p();this.$1={};this.$2={};this.$3={};this.$4={};this.$5={};this.$6={};for(var a=a.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.type==="inbound-rtp"&&d.mediaType==="audio"&&d.isRemote===!1?this.$1[d.id]=d:d.type==="outbound-rtp"&&d.mediaType==="audio"&&d.isRemote===!1?this.$2[d.id]=d:d.type==="inbound-rtp"&&d.mediaType==="video"&&d.isRemote===!1?this.$3[d.id]=d:d.type==="outbound-rtp"&&d.mediaType==="video"&&d.isRemote===!1?this.$4[d.id]=d:d.type==="candidate-pair"&&d.state==="succeeded"?this.$6[d.id]=d:(d.type==="local-candidate"||d.type==="remote-candidate")&&(this.$5[d.id]=d)}}a.prototype.getAudioSendKeys=function(){return Object.keys(this.$2)};a.prototype.getAudioRecvKeys=function(){return Object.keys(this.$1)};a.prototype.getVideoRecvKeys=function(){return Object.keys(this.$3)};a.prototype.getVideoSendKeys=function(){return Object.keys(this.$4)};a.prototype.getVideoBweKeys=function(){return[]};a.prototype.getAudioBytesSent=function(a){return h(this.$2[a],"bytesSent")};a.prototype.getAudioPacketsSent=function(a){return h(this.$2[a],"packetsSent")};a.prototype.getAudioSendRtt=function(a){return null};a.prototype.getAudioBytesReceived=function(a){return h(this.$1[a],"bytesReceived")};a.prototype.getAudioPacketsReceived=function(a){return h(this.$1[a],"packetsReceived")};a.prototype.getAudioPacketsReceivedLost=function(a){return h(this.$1[a],"packetsLost")};a.prototype.getAudioReceivedRtt=function(a){return h(this.$1[a],"roundTripTime")};a.prototype.getFramesDecoded=function(a){return h(this.$3[a],"framesDecoded")};a.prototype.getFramesEncoded=function(a){return h(this.$4[a],"framesEncoded")};a.prototype.getVideoBytesReceived=function(a){return h(this.$3[a],"bytesReceived")};a.prototype.getVideoFrameHeightReceived=function(a){return null};a.prototype.getVideoFrameRateReceived=function(a){var b=this.getFramesDecoded(a);return b==null||b===0?null:h(this.$3[a],"framerateMean")};a.prototype.getVideoFrameWidthReceived=function(a){return null};a.prototype.getVideoPacketsReceived=function(a){return h(this.$3[a],"packetsReceived")};a.prototype.getVideoPacketsReceivedLost=function(a){return h(this.$3[a],"packetsLost")};a.prototype.getVideoBytesSent=function(a){return h(this.$4[a],"bytesSent")};a.prototype.getVideoFrameHeightSent=function(a){return null};a.prototype.getVideoFrameRateSent=function(a){var b=this.getFramesEncoded(a);return b==null||b===0?null:h(this.$4[a],"framerateMean")};a.prototype.getVideoFrameWidthSent=function(a){return null};a.prototype.getVideoPacketsSent=function(a){return h(this.$4[a],"packetsSent")};a.prototype.getAudioJitter=function(a){return h(this.$1[a],"jitter")};a.prototype.getJitterBufferDelay=function(a){return h(this.$1[a],"mozJitterBufferDelay")};a.prototype.getAudioDecodingPLC=function(a){return null};a.prototype.getAudioDecodingPLCCNG=function(a){return null};a.prototype.getAudioDecodingCNG=function(a){return null};a.prototype.getAudioDecodingNormal=function(a){return null};a.prototype.getAudioPacketsSentLost=function(a){return null};a.prototype.getVideoPacketsSentLost=function(a){return null};a.prototype.getVideoSentRtt=function(a){return null};a.prototype.getInboundQpSum=function(a){return null};a.prototype.getOutboundQpSum=function(a){return null};a.prototype.getAccelerateRate=function(a){return null};a.prototype.getPreemptiveExpandRate=function(a){return null};a.prototype.getExpandRate=function(a){return null};a.prototype.getDiscardRate=function(a){return null};a.prototype.getVideoBweRetransmitBitrate=function(a){return null};a.prototype.getVideoBweSendBandwidth=function(a){return null};a.prototype.getVideoBweTransmitBitrate=function(a){return null};a.prototype.getVideoRecvCodec=function(a){return null};a.prototype.getVideoSendCodec=function(a){return null};a.prototype.getConnectionType=function(){__p&&__p();var a=null;Object.keys(this.$6).forEach(function(c){c=this.$6[c];var d=g(c,"localCandidateId");c=g(c,"remoteCandidateId");d!==undefined&&d!==null&&c!==undefined&&c!==null&&(a=b("FBRTCStatsHelpers").connectionType(g(this.$5[d],"candidateType"),g(this.$5[d],"transport"),g(this.$5[c],"candidateType"),g(this.$5[c],"transport")));return a!==null}.bind(this));if(a!==null)return a;else return b("FBRTCStatsHelpers").UNKNOWN_CONNECTION};e.exports=a}),null);
__d("RTCWebMediaLoggingStreamsTypes",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({VIDEO:"video",AUDIO:"audio"})}),null);
__d("RTCWebMediaStreamsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:RTCWebMediaStreamsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:RTCWebMediaStreamsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:RTCWebMediaStreamsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setBytes=function(a){this.$1.bytes=a;return this};a.prototype.setCallID=function(a){this.$1.call_id=a;return this};a.prototype.setCallType=function(a){this.$1.call_type=a;return this};a.prototype.setConferenceName=function(a){this.$1.conference_name=a;return this};a.prototype.setFrameHeight=function(a){this.$1.frame_height=a;return this};a.prototype.setFrameWidth=function(a){this.$1.frame_width=a;return this};a.prototype.setFrames=function(a){this.$1.frames=a;return this};a.prototype.setFramesPerSecond=function(a){this.$1.frames_per_second=a;return this};a.prototype.setIsLocal=function(a){this.$1.is_local=a;return this};a.prototype.setJitter=function(a){this.$1.jitter=a;return this};a.prototype.setJitterBufferDelay=function(a){this.$1.jitter_buffer_delay=a;return this};a.prototype.setPackets=function(a){this.$1.packets=a;return this};a.prototype.setPacketsLost=function(a){this.$1.packets_lost=a;return this};a.prototype.setQpSum=function(a){this.$1.qp_sum=a;return this};a.prototype.setRtt=function(a){this.$1.rtt=a;return this};a.prototype.setStreamID=function(a){this.$1.stream_id=a;return this};a.prototype.setStreamType=function(a){this.$1.stream_type=a;return this};a.prototype.setTimeElapsed=function(a){this.$1.time_elapsed=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={bytes:!0,call_id:!0,call_type:!0,conference_name:!0,frame_height:!0,frame_width:!0,frames:!0,frames_per_second:!0,is_local:!0,jitter:!0,jitter_buffer_delay:!0,packets:!0,packets_lost:!0,qp_sum:!0,rtt:!0,stream_id:!0,stream_type:!0,time_elapsed:!0,vc:!0};e.exports=a}),null);
__d("FBRTCMediaMetricParser",["FBRTCChromeMediaStatsReport","FBRTCConstants","FBRTCLogger","FBRTCMediaMetricsConst","FBRTCMozMediaStatsReport","RTCCallStore","RTCConferenceState","RTCWebMediaLoggingStreamsTypes","RTCWebMediaStreamsTypedLogger","RTWebLoggingCallType","UserAgent","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FBRTCConstants").SignalingProtocol;function h(){if(b("gkx")("678354")){var a=b("RTCCallStore").getState(),c=a.callInfo;a=a.callSummary;return new(b("RTCWebMediaStreamsTypedLogger"))().setCallID(c.callID).setTimeElapsed(a.getCurrentTimeFromCallConnected()).setConferenceName(c.conferenceName).setCallType(c.protocol===g.MULTIWAY?b("RTWebLoggingCallType").MW:b("RTWebLoggingCallType").P2P)}return null}function i(a,c){a.getVideoSendKeys().forEach(function(d){var e=a.getOutboundQpSum(d),f=a.getFramesEncoded(d),g=a.getVideoBytesSent(d),i=a.getVideoPacketsSent(d),j=a.getVideoPacketsSentLost(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").OUTBOUND_QP,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_ENCODED,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_BYTES_SENT,g);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SENT,i);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_SEND_LOST,j);var k=h();k&&k.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setFrames(f).setQpSum(e).setBytes(g).setPackets(i).setPacketsLost(j).setFrameHeight(a.getVideoFrameHeightSent(d)).setFramesPerSecond(a.getVideoFrameRateSent(d)).setFrameWidth(a.getVideoFrameWidthSent(d)).log()})}function j(a,c){a.getVideoBweKeys().forEach(function(d){var e=a.getVideoBweSendBandwidth(d),f=a.getVideoBweTransmitBitrate(d),g=a.getVideoBweRetransmitBitrate(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_SEND_BANDWIDTH,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_TRANSMIT_BITRATE,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEOBWE_RETRANSMIT_BITRATE,g);f=h();f&&f.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setBytes(e).log()})}function k(a,c){a.getVideoRecvKeys().forEach(function(d){var e=a.getInboundQpSum(d),f=a.getFramesDecoded(d),g=a.getVideoBytesReceived(d),i=a.getVideoPacketsReceived(d),j=a.getVideoPacketsReceivedLost(d);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_BYTES_RECEIVED,g);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").INBOUND_QP,e);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").FRAMES_DECODED,f);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECEIVED,i);c.setVideoMetric(d,b("FBRTCMediaMetricsConst").VIDEO_PKTS_RECV_LOST,j);var k=h();k&&k.setIsLocal(!1).setStreamType(b("RTCWebMediaLoggingStreamsTypes").VIDEO).setStreamID(d).setBytes(g).setFrames(f).setQpSum(e).setPackets(i).setPacketsLost(j).setFrameHeight(a.getVideoFrameHeightReceived(d)).setFramesPerSecond(a.getVideoFrameRateReceived(d)).setFrameWidth(a.getVideoFrameWidthReceived(d)).log()})}function l(a,c){a.getAudioSendKeys().forEach(function(d){var e=a.getAudioBytesSent(d),f=a.getAudioPacketsSent(d),g=a.getAudioPacketsSentLost(d),i=a.getAudioSendRtt(d);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_BYTES_SENT,e);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT,f);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_SENT_LOST,g);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_RTT_SENT,i);var j=h();j&&j.setIsLocal(!0).setStreamType(b("RTCWebMediaLoggingStreamsTypes").AUDIO).setStreamID(d).setPackets(f).setBytes(e).setRtt(i).setPacketsLost(g).log()})}function m(a,c){__p&&__p();a.getAudioRecvKeys().forEach(function(d){__p&&__p();var e=a.getJitterBufferDelay(d),f=a.getAudioJitter(d),g=a.getAccelerateRate(d),i=a.getExpandRate(d),j=a.getPreemptiveExpandRate(d),k=a.getDiscardRate(d),l=a.getAudioBytesReceived(d),m=a.getAudioPacketsReceived(d),n=a.getAudioPacketsReceivedLost(d),o=a.getAudioReceivedRtt(d);c.addJitterBufferDelay(d,e);c.addMetricStat(d,b("FBRTCMediaMetricsConst").JITTER,f);c.addMetricStat(d,b("FBRTCMediaMetricsConst").ACCELERATE_RATE,g);c.addMetricStat(d,b("FBRTCMediaMetricsConst").DISCARD_RATE,k);c.addMetricStat(d,b("FBRTCMediaMetricsConst").EXPAND_RATE,i);c.addMetricStat(d,b("FBRTCMediaMetricsConst").PREEMPTIVE_RATE,j);c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_PLC,a.getAudioDecodingPLC(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_CNG,a.getAudioDecodingCNG(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_NORMAL,a.getAudioDecodingNormal(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").DECODING_PLC_CNG,a.getAudioDecodingPLCCNG(d));c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_BYTES_RECEIVED,l);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED,m);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_PACKETS_RECEIVED_LOST,n);c.addMetricStat(d,b("FBRTCMediaMetricsConst").AUDIO_RTT_RECEIVED,o);g=h();g&&g.setIsLocal(!1).setStreamType(b("RTCWebMediaLoggingStreamsTypes").AUDIO).setStreamID(d).setJitter(f).setJitterBufferDelay(e).setBytes(l).setPackets(m).setRtt(o).setPacketsLost(n).log()})}var n={getVideoRecvCodec:function(a){var b=null;a.getVideoRecvKeys().forEach(function(c){c=a.getVideoRecvCodec(c);c!=null&&c!==""&&(b=c)});return b},getVideoSendCodec:function(a){var b=null;a.getVideoSendKeys().forEach(function(c){c=a.getVideoSendCodec(c);c!=null&&c!==""&&(b=c)});return b},parseStats:function(a,c){__p&&__p();a.getStats().then(function(a){__p&&__p();var d=null;b("UserAgent").isBrowser("Chrome")?d=new(b("FBRTCChromeMediaStatsReport"))(a):b("UserAgent").isBrowser("Firefox")&&(d=new(b("FBRTCMozMediaStatsReport"))(a));if(d){a=c.getMediaMetricTracker();m(d,a);l(d,a);k(d,a);i(d,a);j(d,a);c.setConnectionType(d.getConnectionType());a=n.getVideoRecvCodec(d);a!=null&&a!==""&&c.setVideoReceivedCodec(a);a=n.getVideoSendCodec(d);a!=null&&a!==""&&c.setVideoSentCodec(a)}})["catch"](function(a){b("FBRTCLogger").getInstance().logToConsole("error parsing RTCStatsReport")})},startCollectingMediaStats:function(){var a=b("RTCCallStore").getState().callInfo.conferenceState,c=b("RTCCallStore").getState().callSummary,d=b("RTCCallStore").getState().connections.first();a!==b("RTCConferenceState").TERMINATED&&(d&&n.parseStats(d,c),setTimeout(n.startCollectingMediaStats,5e3))}};e.exports=n}),null);
__d("PhotoUtils",["Event","URI"],(function(a,b,c,d,e,f){__p&&__p();var g={getImagesFromData:function(a){var b=[];for(var c in a)c.indexOf("image")===0&&b.push(a[c]);return b},getFBIDFromData:function(a){return a&&a.id},getOriginalImageFromData:function(a){return a.original||a.download_image},getDownloadURLFromData:function(a){a=this.getOriginalImageFromData(a);if(!a)return null;a=new(b("URI"))(a.uri);a.addQueryData({dl:1});return a},getPermalinkFromData:function(a){return a.permalink},canViewerMakeCoverPhoto:function(a){return!!a.can_viewer_make_cover_photo},getCoverPhotoURLFromData:function(a){return new(b("URI"))("/profile.php").addQueryData({preview_cover:g.getFBIDFromData(a)})},preload:function(a,c,d){var e=a.getDimensions();for(var f=0;f<c.length;++f){var g=e.getBestFitImageFromPhoto(c[f],e.getMaxStageDimensions()),h=new Image();d&&b("Event").listen(h,"load",d.bind(null,c[f]));a.getLogger().log(g.uri);h.src=g.uri}}};e.exports=g}),null);
__d("SpotlightViewer",["cx","React","Spotlight.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";if(!this.props.open)return null;var a="_n3";this.props.className&&(a+=" "+this.props.className);return b("React").createElement(b("Spotlight.react"),{onBeforeHide:this.props.onBeforeHide,onHide:this.props.onHide,rootClassName:this.props.rootClassName,shown:this.props.open,key:"photoLayer"},b("React").createElement("div",{className:a,onClick:this.props.onClick,role:"presentation"},this.props.children))};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("SpotlightViewerImage",["cx","Image.react","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){"use strict";h.constructor.call(this,a),this.$3=function(){this.setState({loading:!1})}.bind(this),this.state={loading:!0}}a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";a.src!==this.props.src&&this.setState({loading:!0})};a.prototype.render=function(){"use strict";return b("React").createElement("div",{className:"_4-od"},this.$1(),this.$2())};a.prototype.$1=function(){"use strict";return!this.state.loading?null:b("React").createElement(b("XUISpinner.react"),{className:"_enh",size:"large"})};a.prototype.$2=function(){"use strict";return b("React").createElement("div",{className:this.state.loading?"_eni":""},b("React").createElement(b("Image.react"),{onLoad:this.$3,src:this.props.src,style:{width:this.props.dimensions.x||"",height:this.props.dimensions.y||""}}))};e.exports=a}),null);
__d("SpotlightViewport",["csx","cx","Locale","Parent","React","ReactDOM","Vector","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"SpotlightViewport",propTypes:{stageDimensions:a.object.isRequired,useWidth:a.bool},PAGE_TO_PREV_PERCENTAGE:.2,sections:{NONE:null,FORWARD:1,BACKWARD:2},timer:null,getInitialState:function(){return{currentActiveSection:this.sections.NONE,active:!0}},componentDidMount:function(){this._onMouseEnter()},componentWillUnmount:function(){this.props.fadeInNOut&&clearTimeout(this.timer)},_onMouseMove:function(event){var a=b("ReactDOM").findDOMNode(this),c=b("Vector").getEventPosition(event.nativeEvent),d=b("Vector").getElementPosition(a);a=this.props.useWidth?this.props.stageDimensions.x:b("Vector").getElementDimensions(a).x;this.props.fadeInNOut&&(this._isMouseOverActionBars(c)?clearTimeout(this.timer):this._onMouseEnter());c=c.x-d.x;d=c/a;b("Locale").isRTL()?c=d>1-this.PAGE_TO_PREV_PERCENTAGE:c=d<this.PAGE_TO_PREV_PERCENTAGE;c?this.setState({currentActiveSection:this.sections.BACKWARD}):this.setState({currentActiveSection:this.sections.FORWARD})},_onClick:function(event){var a=this.state.currentActiveSection==this.sections.FORWARD,c=event.target;b("Parent").bySelector(c,"._51an")||this.props.onClick&&this.props.onClick(a,event)},_isMouseOverActionBars:function(a){return a.y<70||a.y>this.props.stageDimensions.y-70},_onMouseEnter:function(){this.setState({active:!0}),this.props.fadeInNOut&&(clearTimeout(this.timer),this.timer=setTimeout(this._onMouseLeave,1e3))},_onMouseLeave:function(){this.setState({active:!1})},makeActive:function(){this._onMouseEnter()},render:function(){var a="_4-of"+(!this.state.active&&!this.props.active?" _50-l":"")+(this.state.currentActiveSection===this.sections.BACKWARD?" _516a":"")+(this.state.currentActiveSection===this.sections.FORWARD?" _516b":"")+(this.props.showLoadingIndicator?" _51jp":"");this.props.className&&(a=b("joinClasses")(a,this.props.className));var c={};this.props.stageDimensions&&(c={height:this.props.stageDimensions.y},this.props.useWidth&&(c.width=this.props.stageDimensions.x));return b("React").createElement("div",{className:a,onClick:this._onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onMouseMove:this._onMouseMove,role:"presentation",style:c},this.props.children,b("React").createElement("div",{className:"_4-og"},b("React").createElement("span",{className:"_4-oh"}),this.props.media,b("React").createElement("div",{className:"_4-oi"})))}});e.exports=c}),null);