if (self.CavalryLogger) { CavalryLogger.start_js(["Lpf3Z"]); }

__d("PagesHomepagePageletUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PagesHomepagePageletUsageLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesHomepagePageletUsageLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesHomepagePageletUsageLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setAdminMessage=function(a){this.$1.admin_message=a;return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setIsEmbedded=function(a){this.$1.is_embedded=a;return this};a.prototype.setUserMessage=function(a){this.$1.user_message=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={admin_message:!0,event_name:!0,is_embedded:!0,user_message:!0,vc:!0};e.exports=a}),null);
__d("PagesMessagingLoadingRow.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";var a="_5y2c"+(this.props.useDarkVersion?"":" _4a7c")+(this.props.useDarkVersion?" _4a7d":"");a=b("joinClasses")(a,this.props.className);return b("React").createElement("div",{className:a})};function a(){"use strict";h.apply(this,arguments)}e.exports=a}),null);
__d("PagesMessagingRelativeTimestamp.react",["LongLiveTimer","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=1e3;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(a,b){g.constructor.call(this,a,b),this.state={relativeTime:this.$1(a.utcTimestamp,a.shouldShorternTime)}}a.prototype.UNSAFE_componentWillReceiveProps=function(a){(a.utcTimestamp!==this.props.utcTimestamp||a.shouldShorternTime!==this.props.shouldShorternTime)&&this.setState({relativeTime:this.$1(a.utcTimestamp,a.shouldShorternTime)})};a.prototype.render=function(){return b("React").createElement("div",{className:this.props.className},b("React").createElement("abbr",{className:"livetimestamp","data-utime":this.props.utcTimestamp/h,"data-shorten":this.props.shouldShorternTime},this.state.relativeTime.text))};a.prototype.$1=function(a,c){return b("LongLiveTimer").renderRelativeTimeToServer(a/h,c)};e.exports=a}),null);
__d("PagesMessageSnippetFetcher",["invariant","immutable","MercuryFilters.bs","MercuryIDs","MercuryPageOrderedThreadlist","MessengerParticipants.bs","MercuryThreadInformer","MessagingTag","MessengerState.bs","Random","SubscriptionsHandler","XPagesManagerMessagesController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("immutable").Map;a.getInboxURI=function(a,c,d){return b("XPagesManagerMessagesController").getURIBuilder().setString("page_token",a).setString("threadid",b("MercuryIDs").getUserIDFromThreadID(c)).setString("ref",d).getURI()};function a(a,c,d,e){this.$3=a,this.$1=c,this.$2=d,this.$5=b("MercuryPageOrderedThreadlist").getForFBID(a),this.$7=b("MercuryThreadInformer").getForFBID(a),this.$6=new(b("SubscriptionsHandler"))(),this.$9(),this.$4=!1,this.$8=e}a.prototype.$10=function(a){this.$6.addSubscriptions(this.$7.subscribe(a,function(a,b){return this.fetch()}.bind(this)))};a.prototype.$9=function(){this.$10("threadlist-updated"),this.$10("threads-updated"),this.$10("unread-updated")};a.prototype.fetch=function(){if(this.$4)return;this.$4=!0;this.$5.getFilteredThreadlist(0,5,b("MessagingTag").INBOX,b("MercuryFilters.bs").unread,function(a){return this.$11(a)}.bind(this))};a.prototype.cleanup=function(){this.$6.release()};a.prototype.$11=function(a){__p&&__p();if(!a||a.length===0){this.$2();this.$4=!1;return}a=this.$8?a[Math.floor(b("Random").random()*a.length)]:a[0];var c=b("MessengerState.bs").getThreadMetaNow(this.$3,a);c||g(0,3277);a=c.other_user_fbid;a||g(0,3278);a="fbid:"+a;b("MessengerParticipants.bs").get(a,function(a){this.$4=!1,c||g(0,3277),this.$1({senderImageSrc:a.image_src,senderName:a.name,senderShortName:a.short_name,thread:c,participants:h(b("immutable").Seq(c.participants).map(function(a){return[a,b("MessengerParticipants.bs").getNow(a)]}))})}.bind(this))};e.exports=a}),null);
__d("PagesMessagingHomePageletLogger",["PagesHomepagePageletUsageTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){this.$1=a}a.prototype.$2=function(event,a){var c={is_embedded:this.$1,event_name:event};a&&(c=Object.assign(c,a));a=new(b("PagesHomepagePageletUsageTypedLogger"))();a.updateData(c).log()};a.prototype.logEvent=function(a){this.$2(a,null)};a.prototype.logEventWithUserMessage=function(a,b){this.$2(a,{user_message:b})};a.prototype.logReplyMessage=function(a,b,c){this.$2(a,{user_message:b,admin_message:c})};e.exports=a}),null);
__d("PagesMessagingHomePageletAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CLICK_MESSAGE:"click_message",MARK_ARCHIVE:"mark_archive",MARK_READ:"mark_read",MARK_SPAM:"mark_spam",REPLY_MESSAGE:"reply_message",GO_TO_INBOX:"go_to_inbox",RENDER:"render"})}),null);
__d("PagesMessageSender",["MercuryMessageActions","MercuryMessageObject","MercurySourceType","MessengerDiscoveryEntryPointsLoggingHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e){this.__senderID=a,this.__threadID=c,this.__messageActions=b("MercuryMessageActions").getForFBID(a),this.__messageObject=b("MercuryMessageObject").getForFBID(a),this.__creatorInfo=e?e:null,this.__pageID=d}a.prototype.__willSendMessage=function(a){};a.prototype.getTargetThreadID=function(){return this.__threadID};a.prototype.sendMessage=function(a,c){this.__willSendMessage(a);var d=[];c&&d.push(b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([c]));c=this.__messageObject.constructUserGeneratedMessageObject(a,b("MercurySourceType").TITAN_WEB,this.__threadID,null,this.__creatorInfo,d);this.__messageActions.send(c)};e.exports=a}),null);
__d("PagesMessagingActionPlacement",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPRINGBOARD_INLINE_ACTION:"springboard_inline_action",THREAD_LIST_BATCH_ACTION:"thread_list_batch_action",THREAD_ROW_ACTION_ICON:"thread_row_action_icon",MESSAGE_DIALOG_ACTION_LIST:"message_dialog_action_list",MESSAGE_DIALOG_OPENING:"message_dialog_opening",MESSAGE_DIALOG_SHOWN:"message_dialog_shown",THREAD_TITLE_BAR:"thread_title_bar",HOME_PAGE_PAGELET_INLINE_ACTION:"home_page_pagelet_inline_action",UNKNOWN:"unknown"})}),null);
__d("PagesMessagingInboxOverviewMessageProcessor",["MercuryPageThreadActions","PagesMessageSender","PagesMessagingActionPlacement","PagesMessagingHomePageletAction","PagesMessagingHomePageletLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("PagesMessageSender"));g=c&&c.prototype;function a(a,c,d,e){g.constructor.call(this,c,e.thread.thread_id,c,a),this.$PagesMessagingInboxOverviewMessageProcessor1=d,this.$PagesMessagingInboxOverviewMessageProcessor2=e,this.$PagesMessagingInboxOverviewMessageProcessor3=b("MercuryPageThreadActions").getForFBID(c),this.$PagesMessagingInboxOverviewMessageProcessor4=new(b("PagesMessagingHomePageletLogger"))(d)}a.prototype.__willSendMessage=function(a){this.$PagesMessagingInboxOverviewMessageProcessor4.logReplyMessage(b("PagesMessagingHomePageletAction").REPLY_MESSAGE,this.$PagesMessagingInboxOverviewMessageProcessor2.thread.snippet,a),this.markAsRead()};a.prototype.$PagesMessagingInboxOverviewMessageProcessor5=function(a){this.$PagesMessagingInboxOverviewMessageProcessor4.logEventWithUserMessage(a,this.$PagesMessagingInboxOverviewMessageProcessor2.thread.snippet)};a.prototype.$PagesMessagingInboxOverviewMessageProcessor6=function(a){a.call(this.$PagesMessagingInboxOverviewMessageProcessor3,[this.__threadID],b("PagesMessagingActionPlacement").HOME_PAGE_PAGELET_INLINE_ACTION)};a.prototype.markAsSpam=function(){this.$PagesMessagingInboxOverviewMessageProcessor5(b("PagesMessagingHomePageletAction").MARK_SPAM),this.$PagesMessagingInboxOverviewMessageProcessor6(this.$PagesMessagingInboxOverviewMessageProcessor3.batchMarkSpam)};a.prototype.markAsRead=function(){this.$PagesMessagingInboxOverviewMessageProcessor5(b("PagesMessagingHomePageletAction").MARK_READ),this.$PagesMessagingInboxOverviewMessageProcessor6(this.$PagesMessagingInboxOverviewMessageProcessor3.batchMarkRead)};a.prototype.markAsArchive=function(){this.$PagesMessagingInboxOverviewMessageProcessor5(b("PagesMessagingHomePageletAction").MARK_ARCHIVE),this.$PagesMessagingInboxOverviewMessageProcessor6(this.$PagesMessagingInboxOverviewMessageProcessor3.batchArchive)};e.exports=a}),null);
__d("PagesMessagingInboxOverviewPlacement",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({AYMT_HOMEPAGE_PANEL:"aymt_homepage_panel",ADMIN_HOVERCARD:"admin_hovercard",UNKNOWN:"unknown"})}),null);
__d("PagesMessagingMessageSnippet.react",["cx","fbt","Image.react","Layout.react","LeftRight.react","MercuryThreadSnippet.react","PagesMessagingInboxOverviewPlacement","PagesMessagingLoadingRow.react","PagesMessagingRelativeTimestamp.react","React","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("Layout.react").Column,k=b("Layout.react").FillColumn;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){"use strict";var a=b("joinClasses")("_3sfn",this.props.className);return b("React").createElement("div",{className:a,"data-hover":"tooltip","data-tooltip-content":h._("Cliquez pour lire et agir sur le message entier."),role:"button"},this.$1())};a.prototype.$1=function(){"use strict";return b("React").createElement(b("Layout.react"),null,b("React").createElement(j,null,this.$2()),b("React").createElement(k,null,this.$3()))};a.prototype.$2=function(){"use strict";return!this.props.message?b("React").createElement(b("PagesMessagingLoadingRow.react"),{className:(this.props.placement===b("PagesMessagingInboxOverviewPlacement").AYMT_HOMEPAGE_PANEL?"_3fep":"")+(this.props.placement===b("PagesMessagingInboxOverviewPlacement").ADMIN_HOVERCARD?" _3feq":"")}):b("React").createElement(b("Image.react"),{className:(this.props.placement===b("PagesMessagingInboxOverviewPlacement").AYMT_HOMEPAGE_PANEL?"_3fep":"")+(this.props.placement===b("PagesMessagingInboxOverviewPlacement").ADMIN_HOVERCARD?" _3feq":""),src:this.props.message?this.props.message.senderImageSrc:""})};a.prototype.$3=function(){"use strict";var a=this.props.message;if(!a)return b("React").createElement("div",{className:"_3sfp"},b("React").createElement(b("PagesMessagingLoadingRow.react"),{className:"_3sfq"}),b("React").createElement(b("PagesMessagingLoadingRow.react"),{className:"_3sfr"}));var c=null;this.props.placement===b("PagesMessagingInboxOverviewPlacement").ADMIN_HOVERCARD&&(c=b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_2iz9"},h._("Dernier message non lu")),b("React").createElement(b("PagesMessagingRelativeTimestamp.react"),{className:"_2iz6",utcTimestamp:a.thread.last_message_timestamp,shouldShorternTime:!1})));return b("React").createElement("div",{className:"_3sfp"},c,b("React").createElement("div",{className:(this.props.placement===b("PagesMessagingInboxOverviewPlacement").AYMT_HOMEPAGE_PANEL?"_3fer":"")+(this.props.placement===b("PagesMessagingInboxOverviewPlacement").ADMIN_HOVERCARD?" _3fes":"")+" _3sg9"},a.senderName),b("React").createElement(b("MercuryThreadSnippet.react"),{className:"_3sga _3sg9",participants:a.participants,shouldRenderYou:!1,thread:a.thread,viewer:this.props.pageID}))};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("PagesMessagingInboxOverview.react",["cx","fbt","invariant","LeftRight.react","Link.react","MercurySyncPageEnvironment","PagesMessageSnippetFetcher","PagesMessagingHomePageletAction","PagesMessagingHomePageletLogger","PagesMessagingInboxOverviewMessageProcessor","PagesMessagingInboxOverviewPlacement","PagesMessagingMessageSnippet.react","PagesMessagingRelativeTimestamp.react","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a,c){j.constructor.call(this,a,c),this.$1=this.$4(a.pageInfo,a.showRandomMessage),this.$3=new(b("PagesMessagingHomePageletLogger"))(!0),this.state={lastUnreadMessage:null,replyMessage:"",noMoreMessage:!1}}a.prototype.componentWillUMount=function(){b("MercurySyncPageEnvironment").setUp(this.props.pageInfo.id.toString(),this.props.pageInfo.syncSequenceID)};a.prototype.componentDidMount=function(){this.$1.fetch(),this.$3.logEvent(b("PagesMessagingHomePageletAction").RENDER)};a.prototype.componentWillUnmount=function(){b("MercurySyncPageEnvironment").tearDown(this.props.pageInfo.id.toString()),this.$1.cleanup()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){a.pageInfo!==this.props.pageInfo&&(this.setState({lastUnreadMessage:null}),this.$1=this.$4(a.pageInfo,a.showRandomMessage),this.$1.fetch())};a.prototype.render=function(){if(this.state.noMoreMessage)return null;var a=null;if(this.state.noMoreMessage)a=this.$5();else{var c=this.state.lastUnreadMessage;c?a=this.$6(c):a=this.$7()}return b("React").createElement("div",{className:this.props.className},a)};a.prototype.$8=function(){var a=this.state.lastUnreadMessage;this.$2&&a&&this.$2.getTargetThreadID()===a.thread.thread_id||i(0,3537)};a.prototype.$4=function(a,c){return new(b("PagesMessageSnippetFetcher"))(a.id.toString(),function(a){return this.$9(a)}.bind(this),function(){return this.$10()}.bind(this),c)};a.prototype.$9=function(a){this.setState({lastUnreadMessage:a,noMoreMessage:!1},function(){this.$2=new(b("PagesMessagingInboxOverviewMessageProcessor"))(this.props.pageInfo.creatorInfo,this.props.pageInfo.id,!0,a)}.bind(this))};a.prototype.$10=function(){this.setState({noMoreMessage:!0})};a.prototype.$11=function(a){a.key==="Enter"&&this.state.replyMessage.length>0&&(this.$8(),this.$2.sendMessage(this.state.replyMessage),this.setState({replyMessage:""}))};a.prototype.$5=function(){return b("React").createElement("div",{className:"_4c40"},h._("Plus de messages non lus"))};a.prototype.$7=function(){return b("React").createElement(b("PagesMessagingMessageSnippet.react"),{className:"_2iza _12f2",message:this.state.lastUnreadMessage,pageID:this.props.pageInfo.id,placement:this.props.placement})};a.prototype.$12=function(a){return b("PagesMessageSnippetFetcher").getInboxURI(this.props.pageInfo.uriToken,a.thread.thread_id,this.props.placement)};a.prototype.$6=function(a){var c=null;this.props.placement===b("PagesMessagingInboxOverviewPlacement").AYMT_HOMEPAGE_PANEL&&(c=b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{className:"_2iz9"},h._("Dernier message non lu")),b("React").createElement(b("PagesMessagingRelativeTimestamp.react"),{className:"_2iz6",utcTimestamp:a.thread.last_message_timestamp,shouldShorternTime:!1})));return b("React").createElement(b("Link.react"),{className:"_2hlr",href:this.$12(a)},c,b("React").createElement(b("PagesMessagingMessageSnippet.react"),{className:"_2iza",message:a,pageID:this.props.pageInfo.id,placement:this.props.placement}))};e.exports=a}),null);
__d("PagesMessagingInlineInboxView.react",["PagesMessagingInboxOverview.react","React"],(function(a,b,c,d,e,f){"use strict";var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){return b("React").createElement(b("PagesMessagingInboxOverview.react"),{pageInfo:this.props.pageInfo,showRandomMessage:this.props.showRandomMessage,placement:this.props.placement})};function a(){g.apply(this,arguments)}e.exports=a}),null);